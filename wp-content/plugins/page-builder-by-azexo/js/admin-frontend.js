!function(t){"use strict";var a={next:function(t,e,n){var i,o,s=a.regexp(t);if(s.lastIndex=n||0,i=s.exec(e))return"["===i[1]&&"]"===i[7]?a.next(t,e,s.lastIndex):(o={index:i.index,content:i[0],shortcode:a.fromMatch(i)},i[1]&&(o.content=o.content.slice(1),o.index++),i[7]&&(o.content=o.content.slice(0,-1)),o)},replace:function(t,e,n){return e.replace(a.regexp(t),function(t,e,i,o,s,r,h,l){if("["===e&&"]"===l)return t;var c=n(a.fromMatch(arguments));return c?e+c+l:t})},string:function(t){return new a(t).string()},regexp:_.memoize(function(t){return new RegExp("\\[(\\[?)("+t+")(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)","g")}),attrs:_.memoize(function(t){var a,e,n={},i=[];for(a=/([\w-]+)\s*=\s*"([^"]*)"(?:\s|$)|([\w-]+)\s*=\s*'([^']*)'(?:\s|$)|([\w-]+)\s*=\s*([^\s'"]+)(?:\s|$)|"([^"]*)"(?:\s|$)|(\S+)(?:\s|$)/g,t=t.replace(/[\u00a0\u200b]/g," ");e=a.exec(t);)e[1]?n[e[1].toLowerCase()]=e[2]:e[3]?n[e[3].toLowerCase()]=e[4]:e[5]?n[e[5].toLowerCase()]=e[6]:e[7]?i.push(e[7]):e[8]&&i.push(e[8]);return{named:n,numeric:i}}),fromMatch:function(t){var e;return e=t[4]?"self-closing":t[6]?"closed":"single",new a({tag:t[2],attrs:t[3],type:e,content:t[5]})}};function e(){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;e<5;e++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}function n(t,a){var e;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(t)?(3===(e=t.substring(1).split("")).length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2]]),"rgba("+[(e="0x"+e.join(""))>>16&255,e>>8&255,255&e].join(",")+","+a+")"):t}function i(a){return t("<div/>").text(a).html()}function o(a){return t("<div/>").html(a).text()}function s(a){var e="";return AZHParser(a,{start:function(t,a,n){e+="<"+t;for(var s=0;s<a.length;s++){var r=a[s].value;/&[^\s]+;/.test(r)&&(r=o(r)),(r.indexOf(">")||r.indexOf("<"))&&(r=i(r)),r.indexOf('"')>=0&&r.indexOf("'")<0?e+=" "+a[s].name+"='"+r+"'":(r=r.replace(/(^|[^\\])"/g,'$1\\"'),e+=" "+a[s].name+'="'+r+'"')}e+=(n?"/":"")+">"},end:function(t){e+="</"+t+">"},chars:function(a){t.trim(a)&&(e+=a.replace(/[\t\r\n]*/g,""))}}),e}a=_.extend(function(t){_.extend(this,_.pick(t||{},"tag","attrs","type","content"));var e=this.attrs;this.attrs={named:{},numeric:[]},e&&(_.isString(e)?this.attrs=a.attrs(e):_.isEqual(_.keys(e),["named","numeric"])?this.attrs=e:_.each(t.attrs,function(t,a){this.set(a,t)},this))},a),_.extend(a.prototype,{get:function(t){return this.attrs[_.isNumber(t)?"numeric":"named"][t]},set:function(t,a){return this.attrs[_.isNumber(t)?"numeric":"named"][t]=a,this},string:function(){var t="["+this.tag;return _.each(this.attrs.numeric,function(a){/\s/.test(a)?t+=' "'+a+'"':t+=" "+a}),_.each(this.attrs.named,function(a,e){t+=" "+e+'="'+a+'"'}),"single"===this.type?t+"]":"self-closing"===this.type?t+" /]":(t+="]",this.content&&(t+=this.content),t+"[/"+this.tag+"]")}});var r=t(window),h=t(document),l=t("body");function c(){var t=azh.body.prop("clientWidth");return r.get(0)!=azh.window.get(0)&&(t=azh.window.prop("innerWidth")),t}window.azh=t.extend({},window.azh),azh.$=t,azh.window=r,azh.window_off=function(t){return r.off(t),azh.window.off(t),azh},azh.window_on=function(t,a){return r.on(t,function(t){a(t)}),r.get(0)!=azh.window.get(0)&&azh.window.on(t,function(t){a(t)}),azh},azh.document=h,azh.document_off=function(t){return h.off(t),azh.document.off(t),azh},azh.document_on=function(t,a){return h.on(t,function(t){a(t)}),r.get(0)!=azh.window.get(0)&&azh.document.on(t,function(t){a(t)}),azh},azh.body=l,azh.body_off=function(t){return l.off(t),azh.body.off(t),azh},azh.body_on=function(t,a){return l.on(t,function(t){a(t)}),r.get(0)!=azh.window.get(0)&&azh.body.on(t,function(t){a(t)}),azh},azh.section_controlled_device_prefixes=["lg","md"],azh.element_controlled_device_prefixes=["lg","md","sm"],azh.column_offset_patterns={lg:/[ '"-]col-lg-offset-([0-9]?[0-9])[ '"]/gi,md:/[ '"-]col-md-offset-([0-9]?[0-9])[ '"]/gi,sm:/[ '"-]col-sm-offset-([0-9]?[0-9])[ '"]/gi,xs:/[ '"-]col-xs-offset-([0-9]?[0-9])[ '"]/gi},azh.column_width_patterns={lg:/[\w\d-_]+-col-lg-([0-9]?[0-9])/gi,md:/[\w\d-_]+-col-md-([0-9]?[0-9])/gi,sm:/[\w\d-_]+-col-sm-([0-9]?[0-9])/gi,xs:/[\w\d-_]+-col-xs-([0-9]?[0-9])/gi};var d="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAB8lBMVEUAAABcXFxmZmZnZ2eZmZmampqrq6uwsLC9vb2+vr7AwMDBwcHCwsLExMTFxcXGxsbJycnS0tLT09PZ2dna2trb29vd3d3f39/g4ODl5eXp6enq6urr6+vw8PDy8vLz8/P19fX4+Pj6+vr9/f3////V1dX////////S0tLT09PT09PU1NTAwMDCwsLCwsLOzs7h4eHi4uLk5OTl5eXm5ubPz8/a2trb29ve3t6+vr7R0dHQ0NDU1NTS0tLT09PU1NTDw8PAwMDBwcHR0dHR0dHU1NSoqKjS0tLR0dHS0tLT09POzs7Pz8/Q0NDOzs7Pz8/Ozs7Pz8/Q0NDOzs7Pz8+oqKioqKjPz8+mpqanp6fOzs7Pz8/Q0NDOzs7Pz8+jo6Ojo6OioqLR0dHS0tKjo6PNzc3Ozs6hoaHOzs7Ozs6ioqLNzc3Nzc3Nzc3Nzc3Nzc3Nzc3MzMzNzc2goKDNzc2goKDNzc3Ozs7Nzc3Nzc3Nzc2enp6fn5/Nzc3MzMzNzc3Nzc2enp6enp6enp7Nzc3Nzc3Nzc2dnZ2enp6cnJycnJzMzMzMzMzMzMzNzc3MzMzNzc3Nzc2dnZ2bm5ucnJzNzc3Nzc2bm5ucnJycnJzMzMzMzMzMzMzMzMzMzMzMzMyamprMzMyYmJiZmZmamprMzMyJ6HxFAAAAonRSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgIDBgYLCwwMDQ4ODg4ODg8PDw8RFBUVFhYWGhsbGxwcJiYnJyc2NjY3Nzg4OTo6P0BAQkJGRkxOTlVWV1dXWFpaXmJjcHd4eXt9foODhYWGhoaeoKGoqKiqqquwsbKyubq7u8HCxs3Oz9DQ0dTh4u3v8PDy9Pb4+fr7/f5KuRpkAAAEXUlEQVR4Ae2Z6VcUVxDFr1kUYaKORjQuiQpxXDRmiUlQY3DBRaMCmowLjLssw4IiKigusqhxj9EkgCwN9X/mve4+3V1Mk65uOPOpf2c+zXnn3HNfvXqvqhp5JSYmJiYm5nMoKqprLl6sqa6w/5hZPgWOtPW/I4d3/W1H9N8zyZl75MO9M5ghvsDa1gGagoHWtWrBDHCTXN6+6uvt7Xv1llxuYrosxJVhsnjf3XAIDvvru9+TxfAVtWw6bHhKFl1VwGx4mA8c7SSLpxswDdJjpBlpKkUxcigGspbPsTQi8hmyZHID/8M1Msmq5RFYjFukebETqzAly7HjGWluYXEUH3dJ0xIU1YVoJs3dKF5MH0MnIKDK9hIaOx61kLB30IpLSNKkkaoUbDdV0ghDcuOY3ivSZEQqe8yTvDGJEJg5eLxW7gWVZlYiBJetc4WM3It1xi5DymroPH4JRRgvz/U9htUQcoMUvyShyIhVktvc20FAihTXYVEr37GrpEhBRqu+E7GGqdSi9O9xzm8fg2Pucitk6HewCTZu9FNvuMifvgk8AAmLTpMCGu5lsorx+0fggBSnF0HAff1GwUvGo2Lo31RW9Ct2HxJIUbkENhPjf6Wc6Kdun98FlJ99wCxNwGbpYVIgmJJj+j0HXJHxNyk3XwqLgWVzUfbYtmMYrohCv/vHShBIm1rXzUSUipv7J9s76rYggUZT48k33z7xinSrRW0Ipl+ta5jjFWFe1uvo92yehUYdne8SRV8brsiCBrWmH8HoWvQgc+J6cc7Y6L4P8EiJfF/4yU8eERzQFaww7mAizEvGVtlUVKa364cf//BuF2SRr9B1IhcxuQOeLz3Aw9zAQ9eWFQiiWq167SNyKQGe+1vnneNH2OS1WlCNIGrUqr5cEWP3ilPrmJe6leVGrkgfEdUgiAtqVa+PE6CdR78D8HHSS0QXpiHSwaPfLhcRb1f5yjqWL+tOrdgt3y5h4M/N28pzH4lLwsDLj/BDoIfnPu5wEX6Ewyejpqxo02hu7mvEycivlQM+Io/w4b7R3NznIgf1tSK8IOsX5IoYjZi12dyx9Z584SJz2AUZ7qq3aUQCW+o62k/y3A+46mWPloPxuAxzlwHFhWBeJj1av5YIr+HDS5mIw4Oz5cCu87dZ9B2RJZWkgLSQ6IS/iF1I8Oi7TrpYISEviSb8+ecrd8f+jVASYUDSNX3pU/M3mcWdvEwdhgBe86/BiKBMZQX3VQjgNf91ScHNW4dtSQTBav7kz7x1EDVBzxFyx17yJkjWzjVDgBv9Ft7OSRvTyjBejvPGVNxi054CuZch3mLLhwWD2wvEXjTpSGOPwb0IoZKNOMChKgg4MRR+gMNGUc3Bo6iWSKMoNlR7tgPLMSWrsPNF1KEaGw9eC7gdBONBwaBzOAv/QWdp04hg0Cke2XYeBebDw2ygqks8spUPn+v3w+FQAx8+52uMnv8PAvn/tJH/jzT5/9wkJyYmJiYm5j/qBxqDoN+AlgAAAABJRU5ErkJggg==",z=function(t){if(""==t)return{};for(var a={},e=0;e<t.length;++e){var n=t[e].split("=");2==n.length&&(a[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}return a},p=function(t,a,e){var n={};2===(t=t.split("?")).length&&(n=z(t[1].split("&")));var i={};for(var o in n)i[o]=o===a?encodeURIComponent(e):encodeURIComponent(n[o]);return a in n||(i[a]=encodeURIComponent(e)),i=Object.entries(i).map(function(t,a,e){return t[0]+"="+t[1]}),1===t.length?t.push(i.join("&")):t[1]=i.join("&"),t=""!==t[1]?t.join("?"):t[0]},f=function(t,a){var e={};return 2===(t=t.split("?")).length&&(e=z(t[1].split("&"))),a in e&&e[a]},u='.az-empty-inner-html, iframe, [data-shortcode], [data-element*="shortcode"]',v=function(t){var a=azh.$(t),e=t.outerHTML;""!==t.innerHTML&&(e=t.outerHTML.replace(">"+t.innerHTML+"<","><")),e.indexOf("></")>=0?(e=e.split("></"),a.data("azh-open-tag",e[0]+">"),a.data("azh-close-tag","</"+e[1])):a.data("azh-open-tag",e),a.is(".az-fixed-inner-html, .az-gmap")&&a.data("azh-fixed-inner-html",t.innerHTML),a.is(u)||a.children().each(function(){v(this)})};var g=function(t){var a="";return void 0!==t.data("azh-fixed-inner-html")?a+=t.data("azh-fixed-inner-html"):t.is(u)||t.contents().each(function(){var t=azh.$(this);1===this.nodeType&&t.data("azh-open-tag")&&t.data("azh-close-tag")&&(a=a+t.data("azh-open-tag")+g(azh.$(this))+t.data("azh-close-tag")),1===this.nodeType&&t.data("azh-open-tag")&&!t.data("azh-close-tag")&&(a+=t.data("azh-open-tag")),1!==this.nodeType||t.data("azh-open-tag")||t.data("azh-close-tag")||(a+=g(azh.$(this))),3===this.nodeType&&(a+=this.textContent)}),a},m=function(t){t.find("ul, ol").each(function(){var t=azh.$(this);t.attr("data-cloneable",""),$(t,"data-cloneable","")}),function t(a,e){var n=1,i=!1,o=!0;return a.is(u)||(a.children().each(function(){var a=t(azh.$(this));if(n<a&&(n=a+1),n<10){var e=function(t){var a,e=0;if(0===t.length)return e;for(a=0;a<t.length;a++)e=(e<<5)-e+t.charCodeAt(a),e|=0;return e}(JSON.stringify(function t(a){var e=[];azh.$(a.get(0).attributes).each(function(){e.push(this.nodeName)});var n={tagName:a.prop("tagName"),attributes:e,css:a.css(["display","float","position"]),children:[]};return a.children().each(function(){n.children.push(t(azh.$(this)))}),n}(azh.$(this))));if(i){if(i!=e)return o=!1,!1}else i=e}}),a.children().length>1&&i&&o&&(a.attr("data-cloneable")||a.attr("data-cloneable-inline")||0===a.find('> [class*="-col-"]').length&&(a.attr("data-cloneable",""),$(a,"data-cloneable","")))),n}(t);for(var a=azh.document.get(0),e=0;e<a.styleSheets.length;e++)try{var n=a.styleSheets[e].rules||a.styleSheets[e].cssRules;if(n)for(var i=0;i<n.length;i++)if("selectorText"in n[i]&&0===n[i].selectorText.indexOf("#")&&n[i].selectorText.indexOf(" ")<0&&n[i].selectorText.indexOf(",")<0){var o=azh.$(n[i].selectorText);if(1===o.length&&azh.$.contains(t,o)){var s=/[\S\s]*{([^{}]*)}[\S\s]*/.exec(n[i].cssText);if(s.length>1)for(var r=s[1].split(";"),h=0;h<r.length;h++){var l=r[h].split(":");o.css(l[0],l[1]),S(o,l[0],l[1])}}}}catch(t){}},b=function(a){a.find("[data-shortcode]").andSelf().filter("[data-shortcode]").each(function(){var a=azh.$(this),e=a.data("shortcode"),n=azh.shortcode_instances[e];t.post(azh.ajaxurl,{action:"azh_update_shortcode",post_id:azh.post_id,instance:e,shortcode:n},function(t){if(t){var n=a.closest("[data-section]");a.replaceWith(t),a.find("a[href]").on("click",function(t){t.preventDefault()}),a=n.find('[data-shortcode="'+e+'"]'),v(a.get(0)),azh.section_customization_init(n)}})}),a.find('[data-element*="shortcode"]').andSelf().filter('[data-element*="shortcode"]').each(function(){var a=azh.$(this),e=a.data("element"),n=azh.shortcode_instances[e];t.post(azh.ajaxurl,{action:"azh_update_shortcode",post_id:azh.post_id,instance:e,shortcode:n},function(t){t&&(a.html(t),a.find("a[href]").on("click",function(t){t.preventDefault()}))})})};function k(t){t.find('[data-element*="shortcode"]').andSelf().filter('[data-element*="shortcode"]').each(function(){var t=azh.$(this),a=t.attr("data-element"),n=azh.shortcode_instances[a];n&&(a="shortcode: "+e(),azh.shortcode_instances[a]=n,t.attr("data-element",a),$(t,"data-element",a),t.data("element",a))})}var y=function(a,e){t(".wp-picker-open").trigger("click");var n=azh.window.scrollTop();void 0===e&&(e=g(a.wrap("<div></div>").parent()));var i=azh.$(e);return b(i),i.find(".azh-over").removeClass("azh-over"),v(i.get(0)),j(a),i.data("azh-section-path",a.data("azh-section-path")),i.data("azh-section-path").data("azh-section",i),a.parent().replaceWith(i),azh.section_customization_init(i),azh.frontend_init&&azh.frontend_init(i),azh.window.trigger("resize"),azh.window.scrollTop(n),t(".azh-context-menu").hide(),i},x=function(t,a){t.data("azh-open-tag",t.data("azh-open-tag").replace(/<\w+ /,"<"+a+" ")),t.data("azh-close-tag",t.data("azh-close-tag").replace(/<\/\w+>/,"</"+a+">"))},w=function(t,a){var e="";return AZHParser(t.data("azh-open-tag"),{start:function(t,n,i){for(var o=0;o<n.length;o++)if(n[o].name===a){e=n[o].value;break}},end:function(t){},chars:function(t){}}),e},$=function(t,a,e,n,i){"string"==typeof e&&e.indexOf('"')>=0&&(e=e.replace(/"/g,"'").replace(/\s\s+/g," "));var o=e,s="";return AZHParser(t.data("azh-open-tag"),{start:function(t,r,h){s+="<"+t;for(var l=!1,c=0;c<r.length;c++){if(r[c].name==a)if(n)n.test(r[c].value)&&(o=r[c].value.replace(n,"$1"+e+"$3"),s+=" "+r[c].name+'="'+o+'"',l=!0);else s+=" "+r[c].name+'="'+e+'"',l=!0;else r[c].value.indexOf('"')>=0&&r[c].value.indexOf("'")<0?s+=" "+r[c].name+"='"+r[c].value+"'":s+=" "+r[c].name+'="'+r[c].escaped+'"'}l||(n&&i?(o=i.replace(n,"$1"+e+"$3"),s+=" "+a+'="'+o+'"'):s+=" "+a+'="'+e+'"'),s+=(h?"/":"")+">\n"},end:function(t){},chars:function(t){}}),t.data("azh-open-tag",s),azh.change(),o},C=function(t,a){var e="";AZHParser(t.data("azh-open-tag"),{start:function(t,n,i){e+="<"+t;for(var o=0;o<n.length;o++)n[o].name!==a&&(n[o].value.indexOf('"')>=0&&n[o].value.indexOf("'")<0?e+=" "+n[o].name+"='"+n[o].value+"'":e+=" "+n[o].name+'="'+n[o].escaped+'"');e+=(i?"/":"")+">\n"},end:function(t){},chars:function(t){}}),t.data("azh-open-tag",e),azh.change()},T=function(a,e){var n=w(a,"class");(n=n?n.split(" ").filter(function(t){return""!==t}):[]).push(t.trim(e)),n=n.filter(function(t,a,e){return e.indexOf(t)===a}).join(" "),$(a,"class",n)},A=function(a,e){var n=w(a,"class"),i=(n=n?n.split(" ").filter(function(t){return""!==t}):[]).indexOf(t.trim(e));i>-1&&n.splice(i,1),n=n.join(" "),$(a,"class",n)},M=function(a,e,n){var i=w(a,"style"),o=[];i&&(o=i.split(";")),i="";var s="";if(t(o).each(function(){var a=/\s*([\w-]+):\s*(.*)\s*/.exec(this);if(a&&t.trim(a[1])===e)return s=a[2],!1}),n){var r=s.match(n);return r&&4===r.length?r[2]:""}return s},S=function(a,e,n,i,o){var s=n,r=w(a,"style"),h=[];r&&(h=r.split(";")),r="";var l=!1;return t(h).each(function(){var a=/\s*([\w-]+):\s*(.*)\s*/.exec(this);a&&(t.trim(a[1])===e?""!==n&&(i?i.test(a[2])&&(s=a[2].replace(i,"$1"+n+"$3"),r+=a[1]+": "+s+"; ",l=!0):(r+=a[1]+": "+n+"; ",l=!0)):r+=a[1]+": "+a[2]+"; ")}),l||""===n||(i&&o?(s=o.replace(i,"$1"+n+"$3"),r+=e+": "+s):r+=e+": "+n),$(a,"style",r),s},I=function(a,e,n,i,o){var s=w(a,e),r=[];s&&(r=s.split(";")),s="";var h="";if(t(r).each(function(){var a=/\s*([\w-]+):\s*(.*)\s*/.exec(this);if(a&&t.trim(a[1])==n)return h=a[2],!1}),i){var l=h.match(i);return l&&4===l.length?l[2]:(l=o.match(i))[2]}return h},N=function(a,e,n,i,o,s){var r=w(a,e),h=[];r&&(h=r.split(";"));var l="",c=!1;t(h).each(function(){var a=/\s*([\w-]+):\s*(.*)\s*/.exec(this);a&&(t.trim(a[1])==n?""!==i&&(o?o.test(a[2])&&(l+=a[1]+": "+a[2].replace(o,"$1"+i+"$3")+"; ",c=!0):(l+=a[1]+": "+i+"; ",c=!0)):l+=a[1]+": "+a[2]+"; ")}),c||""===i||(l+=o&&s?n+": "+s.replace(o,"$1"+i+"$3"):n+": "+i),(l||r)&&$(a,e,l)},j=function(t){t.find(".azh-controls").andSelf().filter(".azh-controls").each(function(){azh.$(this).removeClass("azh-controls"),azh.$(this).data("azh-controls").remove(),azh.$(this).data("azh-controls",!1)}),t.find(".azh-cloneable-controls").andSelf().filter(".azh-cloneable-controls").each(function(){azh.$(this).removeClass("azh-cloneable-controls"),azh.$(this).data("azh-cloneable-controls").remove(),azh.$(this).data("azh-cloneable-controls",!1)}),t.find(".azh-item-controls").andSelf().filter(".azh-item-controls").each(function(){azh.$(this).removeClass("azh-item-controls"),azh.$(this).data("azh-item-controls").remove(),azh.$(this).data("azh-item-controls",!1)}),t.data("azh-height-top-resizer")&&t.data("azh-height-top-resizer").remove(),t.data("azh-height-bottom-resizer")&&t.data("azh-height-bottom-resizer").remove(),t.data("azh-width-right-resizer")&&t.data("azh-width-right-resizer").remove(),t.data("azh-width-left-resizer")&&t.data("azh-width-left-resizer").remove(),t.find(".azh-grid").andSelf().filter(".azh-grid").each(function(){azh.$(this).children().each(function(){azh.$(this).data("azh-resizer")&&(azh.$(this).data("azh-resizer").remove(),azh.$(this).data("azh-resizer",!1))})})},O=function(a){azh.controls_container=!1,t(".azh-controls-container").length?(azh.controls_container=t(".azh-controls-container"),azh.controls_container.detach()):azh.controls_container=t('<div class="azh-controls-container"></div>'),a.find(".azh-controls").andSelf().filter(".azh-controls").trigger("mousemove"),a.find(".azh-grid").andSelf().filter(".azh-grid").trigger("mousemove"),azh.controls_container.appendTo(l)},P=function(t,a){a.is(".az-top-right-controls")?(a.css("left","auto"),a.css("right",c()-t.offset().left-t.width()+"px"),a.css("top",t.offset().top+"px")):a.is(".az-bottom-right-controls")?(a.css("left","auto"),a.css("right",c()-t.offset().left-t.width()+"px"),a.css("top",t.offset().top+t.height()-a.height()+"px")):a.is(".az-bottom-left-controls")?(a.css("right","auto"),a.css("left",t.offset().left+"px"),a.css("top",t.offset().top+t.height()-a.height()+"px")):(a.css("right","auto"),a.css("left",t.offset().left+"px"),a.css("top",t.offset().top+"px"))},D={},Y={};function X(a,e){t.post(azh.ajaxurl,{action:"azh_get_scripts_urls",content:a},function(t){!function(t,a){function e(){var t=!0;for(var e in D)if(!1!==D[e]){t=!1;break}t&&a&&(clearInterval(o),a())}function n(t){Y[t]=D[t],D[t]=!1,e()}if("css"in t)for(var i in t.css)!function(a){t.css[a]in Y||t.css[a]in D||(D[t.css[a]]=azh.$("<link/>",{rel:"stylesheet",type:"text/css",href:t.css[a]}).appendTo("head").on("load",function(){n(t.css[a])}))}(i);if("js"in t)for(var i in t.js)!function(a){if(!(t.js[a]in Y||t.js[a]in D)){var e=azh.document.get(0).createElement("script");D[t.js[a]]=azh.$(e).appendTo("head"),e.onload=function(){n(t.js[a])},e.src=t.js[a]}}(i);var o=setInterval(e,100)}(t,e)},"json")}function R(a,e,n){var i=t('<div class="azh-modal"></div>');if(t('<div class="azh-modal-title">'+a.title+"</div>").appendTo(i),t('<div class="azh-modal-desc">'+a.desc+"</div>").appendTo(i),t('<div class="azh-modal-label">'+a.label+"</div>").appendTo(i),"options"in a){var o=t('<select class="azh-modal-control"></select>').appendTo(i).on("change",function(){e=t(this).find("option:selected").attr("value")});for(var e in a.options)e==e?t('<option value="'+e+'" selected>'+a.options[e]+"</option>").appendTo(o):t('<option value="'+e+'">'+a.options[e]+"</option>").appendTo(o)}else t('<textarea class="azh-modal-control">'+e+"</textarea>").appendTo(i).on("change",function(){e=t(this).val()});var s=t('<div class="azh-modal-actions"></div>').appendTo(i);t('<div class="azh-modal-ok">'+azh.i18n.ok+"</div>").appendTo(s).on("click",function(){return t.simplemodal.close(),n(e),!1}),t('<div class="azh-modal-cancel">'+azh.i18n.cancel+"</div>").appendTo(s).on("click",function(){return t.simplemodal.close(),!1}),i.simplemodal({autoResize:!0,overlayClose:!0,opacity:0,overlayCss:{"background-color":"black"},closeClass:"azh-close",onClose:function(){t.simplemodal.close()}})}function H(t,a){if(document.selection)t.focus(),document.selection.createRange().text=a;else if(t.selectionStart||"0"==t.selectionStart){var e=t.selectionStart,n=t.selectionEnd;t.value=t.value.substring(0,e)+a+t.value.substring(n,t.value.length)}else t.value+=a}function F(t){var e=Object.keys(azh.shortcodes).join("|"),n=a.regexp(e);t.match(n);return n.exec(t)}function W(t,a,e){a="["+t.base;var n=!1;return"content"in e&&(n=e.content),a+=Object.keys(e).map(function(t){return"content"==t?"":" "+t+'="'+e[t]+'"'}).join(""),a+="]",n&&(a+=n+"[/"+t.base+"]"),a}var E=function(i){function o(a){"true"===a.attr("contenteditable")||0!==a.find('[contenteditable="true"]').length||0!==a.parents('[contenteditable="true"]').length||a.is(".az-readonly")||0!==a.find(".az-readonly").length||0!==a.parents(".az-readonly").length||0!==a.find('[draggable="true"]').length||(a.attr("contenteditable","true"),T(a,"az-contenteditable"),a.on("focus click",function(a){function e(t){t.children().each(function(){v(this)}),t.find(".azh-context").each(function(){A(azh.$(this),"azh-context")}),i.hide(),azh.change()}var n=azh.$(this),i=t(".azh-editor-toolbar");azh.editor_toolbar.length&&(["block","table-cell"].indexOf(n.css("display"))>=0||n.is('[contenteditable="true"]'))&&(i.show(),i.css({left:n.offset().left,top:n.offset().top-i.outerHeight()}),i.data("azh-element",n),n.off("blur").one("blur",function(t){e(azh.$(this))}),i.find("input, select").off("mousedown").on("mousedown",function(){var a=t(this),n=i.data("azh-element");n.off("blur"),a.off("change").on("change",function(){n.off("blur").one("blur",function(t){e(n)}),n.trigger("focus")})}))}).on("click dragstart dragenter dragover dragleave drop dragend",function(t){0===azh.$(this).closest(".azh-drag").length&&t.preventDefault()}))}function c(t){var a="",e=t.closest("[data-element]");if(e.length)a=azh.i18n.element+": "+e.attr("data-element");else{var n=t.closest("[data-section]");n.length&&(a=azh.i18n.section+": "+n.data("section"))}return a}function z(a){if(0===(n=a.data("azh-controls").find(".azh-utility")).length){var e=t('<div class="azh-utility-wrapper"></div>').appendTo(a.data("azh-controls")).on("click",function(a){var e=t(this),n=e.closest(".azh-section-controls, .azh-column-controls, .azh-element-controls"),i=n.find(".azh-utility");return i.data("azh-filled")||(tt(i),i.data("azh-filled",!0)),i.children().not(".azh-utility-title").length&&(azh.utility_top&&azh.utility_left?(azh.controls_container.find(".azh-element-controls.azh-active, .azh-column-controls.azh-active, .azh-section-controls.azh-active").removeClass("azh-active"),n.addClass("azh-active"),i.css({top:azh.utility_top,left:azh.utility_left})):(n.addClass("azh-active"),n.is(".azh-section-controls")||n.is(".az-top-right-controls")||n.is(".az-bottom-right-controls")?i.css({top:e.offset().top-r.scrollTop()+e.outerHeight(),left:e.offset().left-i.outerWidth()+e.outerWidth()}):i.css({top:e.offset().top-r.scrollTop()+e.outerHeight(),left:e.offset().left}))),a.which&&e.data("azh-linked-element").trigger("click"),!1}).data("azh-linked-element",a),n=t('<div class="azh-utility"></div>').appendTo(e).on("click",function(t){t.stopPropagation()}).on("mouseenter",function(){t(this).closest(".azh-section-controls, .azh-column-controls, .azh-element-controls").addClass("azh-utility-hover")}).on("mouseleave",function(){t(this).closest(".azh-section-controls, .azh-column-controls, .azh-element-controls").removeClass("azh-utility-hover")}).data("azh-linked-element",a);t('<div class="azh-utility-title">'+c(a)+"</div>").prependTo(n),n.draggable({handle:".azh-utility-title",drag:function(t,a){azh.utility_top=a.position.top,azh.utility_left=a.position.left}})}return n}function u(a,i,o){function s(){if(i.units){var a=t('<div class="azh-units"></div>').appendTo(j);if(j.addClass("azh-with-units"),"string"==typeof i.units)j.data("azh-units",i.units),t('<span class="azh-active" data-units="'+i.units+'">'+i.units+"</span>").appendTo(a);else{for(var e in j.data("azh-units",Object.keys(i.units)[0]),i.units)t('<span data-units="'+e+'">'+e+"</span>").appendTo(a).on("click",function(){var a=t(this).closest(".azh-control"),e=a.data("azh-options"),n=t(this).data("units");a.data("azh-units",n),a.find("[data-units]").removeClass("azh-active"),a.find('[data-units="'+n+'"]').addClass("azh-active"),"min"in e.units[n]&&(a.find(".azh-slider").length&&a.find(".azh-slider").children().length&&a.find(".azh-slider").slider("option","min",parseFloat(e.units[n].min)),a.find("input").attr("min",e.units[n].min)),"max"in e.units[n]&&(a.find(".azh-slider").length&&a.find(".azh-slider").children().length&&a.find(".azh-slider").slider("option","max",parseFloat(e.units[n].max)),a.find("input").attr("max",e.units[n].max)),"step"in e.units[n]&&(a.find(".azh-slider").length&&a.find(".azh-slider").children().length&&a.find(".azh-slider").slider("option","step",parseFloat(e.units[n].step)),a.find("input").attr("step",e.units[n].step))});j.find('[data-units="'+Object.keys(i.units)[0]+'"]').addClass("azh-active"),j.data("azh-units",Object.keys(i.units)[0])}}}function r(a){function e(){var a=t(this).data("azh-linked-element");azh.window.get(0).azh.refresh_responsive_css_rules(a)}if(azh.responsive&&i.responsive){var n=t('<div class="azh-responsive"></div>').appendTo(j);for(var o in azh.device_prefixes)t('<span data-prefix="'+o+'" title="'+azh.device_prefixes[o].label+'"></span>').appendTo(n).on("click",function(){var n=t(this).closest(".azh-control"),o=t(this).data("prefix"),s="data-responsive-"+o;if(i.attribute)s=i.attribute+"-"+o;n.data("azh-responsive")!==s&&(n.find("[data-prefix]").removeClass("azh-active"),n.find('[data-prefix="'+o+'"]').addClass("azh-active"),"lg"===o?n.data("azh-responsive",!1):n.data("azh-responsive",s),n.trigger("azh-init"),n.off("azh-change.responsive",e),a(n),n.on("azh-change.responsive",e))});n.find('[data-prefix="'+azh.device_prefix+'"]').addClass("azh-active"),j.on("azh-change.responsive",e)}}function h(t,a,e,n){var i=e;a.multiplying_selector&&(i=i.find(a.multiplying_selector).first());var o=M(i,n);return t.data("azh-responsive")?o=I(i,t.data("azh-responsive"),n):a.attribute&&(o=I(i,a.attribute,n)),o}function l(t,a,e,n,i){function o(t,a,e,n,i){if(t.data("azh-responsive")){N(e,t.data("azh-responsive"),n,i,a.pattern,a.default);var o=w(e,t.data("azh-responsive"));o&&e.attr(t.data("azh-responsive"),o)}else if(a.attribute)N(e,a.attribute,n,i,a.pattern,a.default),e.attr(a.attribute,w(e,a.attribute));else{var s=S(e,n,i,a.pattern,a.default);e.css(n,s)}}a.multiplying_selector?e.find(a.multiplying_selector).each(function(){o(t,a,azh.$(this),n,i)}):o(t,a,e,n,i)}function c(t,a,e,n){var i="",o=e;return a.multiplying_selector&&(o=e.find(a.multiplying_selector).first()),i=m(a,i=t.data("azh-responsive")?w(o,t.data("azh-responsive")):w(o,n)),t.attr("data-value",i),i}function u(t,a,e,n,i){var o="";a.multiplying_selector?t.data("azh-responsive")?e.find(a.multiplying_selector).each(function(){o=$(azh.$(this),t.data("azh-responsive"),i,a.pattern,a.default),azh.$(this).attr(t.data("azh-responsive"),o)}):e.find(a.multiplying_selector).each(function(){o=$(azh.$(this),n,i,a.pattern,a.default),azh.$(this).attr(n,o)}):t.data("azh-responsive")?(o=$(e,t.data("azh-responsive"),i,a.pattern,a.default),e.attr(t.data("azh-responsive"),o)):(o=$(e,n,i,a.pattern,a.default),e.attr(n,o)),t.attr("data-value",o)}function m(t,a){if(t.pattern){var e=!1;if(a&&(e=a.match(t.pattern)))4===e.length&&(a=e[2]);else a=(e=(a=t.default).match(t.pattern))[2]}return a}var b=z(a.closest('[data-section].azh-controls, [class*="azh-col-"].azh-controls, [data-element].azh-controls'));if(o){if(!("menu"in i&&"utility"==i.menu))return;if(!o.is(b))return}if(!(a.parents('[data-element*="shortcode"]').length||i.not_selector&&a.is(i.not_selector))){var k=a.data("azh-linked-controls");k||(k=[]);var _=!1;if(t(k).each(function(){var t=this.data("azh-options");if(t){if(!("selector"in i)){if("attribute"in i&&"attribute"in t&&i.attribute===t.attribute&&!("property"in i)&&!("properties"in i)&&"background-image"!=i.type&&"font-family"!=i.type&&"menu"in i&&"menu"in t&&i.menu===t.menu)return _=!0,!1;if("property"in i&&"property"in t&&i.property===t.property&&"control_type"in i&&"control_type"in t&&i.control_type===t.control_type&&"menu"in i&&"menu"in t&&i.menu===t.menu&&i.attribute===t.attribute)return _=!0,!1}if(JSON.stringify(i)===JSON.stringify(t))return _=!0,!1}}),!_){var j=t('<div class="azh-control '+i.control_class+'" data-type="'+i.control_type+'" '+(i.group?'data-group="'+i.group+'"':"")+(i.subgroup?'data-subgroup="'+i.subgroup+'"':"")+(i.order?'data-order="'+i.order+'"':"")+"></div>").on("click",function(t){t.stopPropagation()}).on("mouseenter",function(){var a=t(this);a.data("azh-linked-element")&&a.data("azh-linked-element").addClass("azh-over")}).on("mouseleave",function(){var a=t(this);a.data("azh-linked-element")&&a.data("azh-linked-element").removeClass("azh-over")});switch(i.control_text_attribute?t("<label>"+a.attr(i.control_text_attribute)+"</label>").appendTo(j):t("<label>"+i.control_text+"</label>").appendTo(j),i.init&&"function"==typeof i.init&&i.init(j,a),i.type){case"input-innertext":t('<input type="'+("input_type"in i?i.input_type:"text")+'"/>').appendTo(j).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-element");i.text(a.val()),e.attr("data-value",a.val()),n.refresh&&("function"==typeof n.refresh?n.refresh(e,i):y(i.closest("[data-section]"))),i.trigger("azh-change"),e.trigger("azh-change")}),j.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-element"),n=t.trim(e.text());a.find("input").val(n);a.attr("data-value",n)});break;case"radio-attribute":var O=t('<div class="azh-radio"></div>').appendTo(j),P=e();if(j.data("azh-radio-name",P),"string"!=typeof i.options)for(var D in i.options){var R=t("<div></div>").appendTo(O),H=e();R.append('<input id="'+H+'" type="radio" name="'+P+'" value="'+D+'"><label for="'+H+'" title="'+i.options[D]+'">'+i.options[D]+"</label>")}O.find('input[type="radio"]').on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-element"),i=e.data("azh-options"),o=$(n,i.attribute,a.val(),i.pattern,i.default);n.attr(i.attribute,o),e.attr("data-value",o),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):y(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")}),j.on("azh-init",function(){var a=t(this),n=j.data("azh-radio-name"),i=a.data("azh-linked-element"),o=a.data("azh-options"),s=a.find("> div"),r=i.closest("[data-section]"),h=i.attr(o.attribute);h=m(o,h),"string"==typeof o.options&&r.find("["+o.options+"]").each(function(){var a=t("<div></div>").appendTo(s),i=e();a.append('<input id="'+i+'" type="radio" name="'+n+'" value="'+azh.$(this).attr(o.options)+'"><label for="'+i+'">'+azh.$(this).attr(o.options)+"</label>")}),s.find("[value]").prop("checked",!1),s.find('[value="'+h+'"]').prop("checked",!0),a.attr("data-value",h)});break;case"dropdown-attribute":var F=t("<select></select>").appendTo(j).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-element"),i=e.data("azh-options"),o=$(n,i.attribute,a.val(),i.pattern,i.default);n.attr(i.attribute,o),e.attr("data-value",o),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):y(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});if("string"!=typeof i.options)for(var D in i.options)F.append('<option value="'+D+'">'+i.options[D]+"</option>");j.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-element"),n=a.data("azh-options"),i=a.find("select"),o=e.closest("[data-section]"),s=e.attr(n.attribute);s=m(n,s),"string"==typeof n.options&&o.find("["+n.options+"]").each(function(){i.append('<option value="'+azh.$(this).attr(n.options)+'">'+azh.$(this).attr(n.options)+"</option>")}),i.val(s),a.attr("data-value",s)});break;case"radio-style":O=t('<div class="azh-radio"></div>').appendTo(j),P=e();for(var D in j.data("azh-radio-name",P),i.options){R=t("<div></div>").appendTo(O),H=e();R.append('<input id="'+H+'" type="radio" name="'+P+'" value="'+D+'"><label for="'+H+'" title="'+i.options[D]+'">'+i.options[D]+"</label>")}O.find('input[type="radio"]').on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-element"),i=e.data("azh-options");l(e,i,n,i.property,a.val()),e.attr("data-value",a.val()),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):y(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")}),r(function(t){t.find("input:checked").trigger("change")}),j.on("azh-init",function(){var a=t(this),e=(j.data("azh-radio-name"),a.data("azh-linked-element")),n=a.data("azh-options"),i=h(a,n,e,n.property);i=m(n,i);var o=a.find("> div");o.find("[value]").prop("checked",!1),o.find('[value="'+i+'"]').prop("checked",!0),a.attr("data-value",i)});break;case"dropdown-style":F=t("<select></select>").appendTo(j).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-element"),i=e.data("azh-options");l(e,i,n,i.property,a.val()),e.attr("data-value",a.val()),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):y(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});for(var D in i.options)F.append('<option value="'+D+'">'+i.options[D]+"</option>");r(function(t){t.find("select").trigger("change")}),j.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-element"),n=a.data("azh-options"),i=h(a,n,e,n.property);i=m(n,i),a.find("select").val(i),a.attr("data-value",i)});break;case"integer-attribute":t('<div class="azh-slider"></div>').appendTo(j),t('<input type="number" step="'+("step"in i?i.step:"1")+'" '+("min"in i?'min="'+i.min+'"':"")+" "+("max"in i?'max="'+i.max+'"':"")+"/>").appendTo(j).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-element"),o=e.data("azh-units")?e.data("azh-units"):"",s=a.val()?a.val()+o:"";u(e,n,i,n.attribute,s),n.refresh&&("function"==typeof n.refresh?n.refresh(e,i):y(i.closest("[data-section]"))),i.trigger("azh-change"),e.trigger("azh-change")}).on("mousewheel",function(a){var e=t(this),n=e.closest(".azh-control").data("azh-options"),i=n.step?n.step:1;if(e.data("focus")){var o=i*a.originalEvent.wheelDelta/120;return e.val(e.val()+o),e.trigger("change"),!1}}),s(),r(function(t){t.find("input").trigger("change"),t.find(".azh-slider.ui-slider").slider("value",t.find("input").val())}),j.on("azh-init",function(){var a=t(this),e=a.data("azh-options"),n=a.data("azh-linked-element"),i=c(a,e,n,e.attribute);if("min"in e&&"max"in e&&"step"in e||e.slider)if(a.find(".azh-slider.ui-slider").length){if(i)a.find(".azh-slider.ui-slider").slider("value")!==parseFloat(i)&&a.find(".azh-slider.ui-slider").slider("value",i)}else{var o=0,s=100,r=1,h=a.data("azh-units");e.min?o=parseFloat(e.min):h&&e.units&&e.units[h]&&e.units[h].min&&(o=parseFloat(e.units[h].min)),e.max?s=parseFloat(e.max):h&&e.units&&e.units[h]&&e.units[h].max&&(s=parseFloat(e.units[h].max)),e.step?r=parseFloat(e.step):h&&e.units&&e.units[h]&&e.units[h].step&&(r=parseFloat(e.units[h].step)),a.find(".azh-slider").slider({min:o,max:s,step:r,value:i?parseFloat(i):0,slide:function(t,n){t.which&&(e.refresh||a.find("input").val(parseFloat(n.value)).trigger("change"))},change:function(t,n){t.which&&(e.refresh&&a.find("input").val(parseFloat(n.value)).trigger("change"),a.trigger("azh-change"))}}).find(".ui-slider-handle").on("contextmenu",function(){return t(this).closest(".azh-slider").slider("option","value",0),a.find("input").val("").trigger("change"),!1})}if(a.find("input").val(parseFloat(i)),i){h=i.split(/[0-9]+/g).pop();a.data("azh-units",h),a.find('[data-units="'+h+'"]').trigger("click")}});break;case"input-attribute":t('<input type="'+("input_type"in i?i.input_type:"text")+'"/>').appendTo(j).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-element");u(e,n,i,n.attribute,a.val()),n.refresh&&("function"==typeof n.refresh?n.refresh(e,i):y(i.closest("[data-section]"))),i.trigger("azh-change"),e.trigger("azh-change")}),j.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-element"),n=a.data("azh-options"),i=c(a,n,e,n.attribute),o=a.find("input").val(i);if(n.unique){if(n.unique_exception&&e.is(n.unique_exception))return;var s=e.closest("[data-section]");n.unique_wrapper&&(s=e.closest(n.unique_wrapper));var r=n.unique,h=new RegExp("{"+n.attribute+"}","g");r=r.replace(h,o.val()),s.find(r).length>1?(a.find("label").get(0).style.setProperty("color","red","important"),a.find("input").get(0).style.setProperty("color","red","important"),a.attr("title",azh.i18n.value_must_be_unique_in_this_scope)):(a.find("label").get(0).style.setProperty("color","",""),a.find("input").get(0).style.setProperty("color","",""),a.attr("title",""))}});break;case"textarea-attribute":t("<textarea></textarea>").appendTo(j).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-element"),o=$(i,n.attribute,a.val(),n.pattern,n.default);i.attr(n.attribute,o),e.attr("data-value",o),n.refresh&&("function"==typeof n.refresh?n.refresh(e,i):y(i.closest("[data-section]"))),i.trigger("azh-change"),e.trigger("azh-change")}),j.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-element").attr(a.data("azh-options").attribute);e=m(i,e);a.find("textarea").val(e);a.attr("data-value",e)});break;case"url-attribute":t('<input type="url"/>').appendTo(j).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-element"),o=$(i,n.attribute,a.val(),n.pattern,n.default);i.attr(n.attribute,o),e.attr("data-value",o),n.refresh&&("function"==typeof n.refresh?n.refresh(e,i):y(i.closest("[data-section]"))),i.trigger("azh-change"),e.trigger("azh-change")}),j.on("azh-init",function(){var a=t(this),e=j.data("azh-options"),n=a.data("azh-linked-element").attr(e.attribute);n=m(e,n);a.find("input").val(n);a.attr("data-value",n)}),t('<div class="azh-edit">'+azh.i18n.edit_link+"</div>").appendTo(j).on("click",function(a){var e=t(this).closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-element");azh.open_link_select_dialog(a,function(t,a,o){i.attr(n.attribute,t),$(i,n.attribute,t),"href"===n.attribute&&(i.attr("target",a||"_self"),i.attr("title",o),$(i,"target",a||"_self"),$(i,"title",o)),e.trigger("azh-init")},i.attr(n.attribute),i.attr("target"),i.attr("title"))});break;case"integer-list-style":var W=t('<div class="azh-properties"></div>').appendTo(j);for(var L in i.properties){var q=t('<div class="azh-property"></div>').appendTo(W);t('<input data-property="'+L+'" type="number" step="'+("step"in i?i.step:"1")+'" '+("min"in i?'min="'+i.min+'"':"")+" "+("max"in i?'max="'+i.max+'"':"")+"/>").appendTo(q).on("change",function(a){var e=t(this),n=e.data("property"),i=e.closest(".azh-control"),o=i.data("azh-linked-element"),s=i.data("azh-options"),r=i.data("azh-units")?i.data("azh-units"):"",h=e.val()?e.val()+r:"";if(l(i,s,o,n,h),!a.isTrigger&&i.find(".azh-linked.azh-active").length){for(var c in i.find(".azh-linked").removeClass("azh-active"),s.properties)c!==n&&i.find('input[data-property="'+c+'"]').val(parseFloat(h)).trigger("change");i.find(".azh-linked").addClass("azh-active")}s.refresh&&("function"==typeof s.refresh?s.refresh(i,o):y(o.closest("[data-section]"))),o.trigger("azh-change"),i.trigger("azh-change")}).on("mousewheel",function(a){var e=t(this),n=e.closest(".azh-control").data("azh-options"),i=n.step?n.step:1;if(e.data("focus")){var o=i*a.originalEvent.wheelDelta/120;return e.val(e.val()+o),e.trigger("change"),!1}}),t("<div>"+i.properties[L]+"</div>").appendTo(q)}s(),r(function(t){t.find("input").trigger("change")}),t('<div class="azh-linked azh-active"></div>').appendTo(j).on("click",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-options");if(a.is(".azh-active"))a.removeClass("azh-active");else{var i=Object.keys(n.properties)[0];for(var o in n.properties)i!==o&&e.find('input[data-property="'+o+'"]').val(parseFloat(e.find('input[data-property="'+i+'"]').val())).trigger("change");a.addClass("azh-active")}}),j.on("azh-init",function(){var a=t(this),e=a.data("azh-options"),n=a.data("azh-linked-element"),i=[];for(var o in e.properties){var s=h(a,e,n,o);s=m(e,s),a.find('input[data-property="'+o+'"]').val(parseFloat(s)),i.push(s)}if(i.length&&i[0]){var r=i[0].split(/[0-9]+/g).pop();a.data("azh-units",r),a.find('[data-units="'+r+'"]').trigger("click")}});break;case"integer-style":t('<div class="azh-slider"></div>').appendTo(j),t('<input type="number" step="'+("step"in i?i.step:"1")+'" '+("min"in i?'min="'+i.min+'"':"")+" "+("max"in i?'max="'+i.max+'"':"")+"/>").appendTo(j).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-element"),i=e.data("azh-options"),o=e.data("azh-units")?e.data("azh-units"):"",s=a.val()?a.val()+o:"";l(e,i,n,i.property,s),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):y(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")}).on("mousewheel",function(a){var e=t(this),n=e.closest(".azh-control").data("azh-options"),i=n.step?n.step:1;if(e.data("focus")){var o=i*a.originalEvent.wheelDelta/120;return e.val(e.val()+o),e.trigger("change"),!1}}),s(),r(function(t){t.find("input").trigger("change"),t.find(".azh-slider.ui-slider").slider("value",t.find("input").val())}),j.on("azh-init",function(){var a=t(this),e=a.data("azh-options"),n=a.data("azh-linked-element"),i=h(a,e,n,e.property);if(i=m(e,i),"min"in e&&"max"in e&&"step"in e||e.slider)if(a.find(".azh-slider.ui-slider").length){if(i)a.find(".azh-slider.ui-slider").slider("value")!==parseFloat(i)&&a.find(".azh-slider.ui-slider").slider("value",i)}else{var o=0,s=100,r=1,l=a.data("azh-units");e.min?o=parseFloat(e.min):l&&e.units&&e.units[l]&&e.units[l].min&&(o=parseFloat(e.units[l].min)),e.max?s=parseFloat(e.max):l&&e.units&&e.units[l]&&e.units[l].max&&(s=parseFloat(e.units[l].max)),e.step?r=parseFloat(e.step):l&&e.units&&e.units[l]&&e.units[l].step&&(r=parseFloat(e.units[l].step)),a.find(".azh-slider").slider({min:o,max:s,step:r,value:i?parseFloat(i):0,slide:function(t,n){t.which&&(e.refresh||a.find("input").val(parseFloat(n.value)).trigger("change"))},change:function(t,n){t.which&&(e.refresh&&a.find("input").val(parseFloat(n.value)).trigger("change"),a.trigger("azh-change"))}}).find(".ui-slider-handle").on("contextmenu",function(){return t(this).closest(".azh-slider").slider("option","value",0),a.find("input").val("").trigger("change"),!1})}a.find("input").val(parseFloat(i));l=i.split(/[0-9]+/g).pop();i&&(a.data("azh-units",l),a.find('[data-units="'+l+'"]').trigger("click"))});break;case"color-style":j.addClass("azh-color"),t('<input type="text" data-alpha="true"/>').appendTo(j).on("change",function(){var a=t(this).closest(".azh-control"),e=a.data("azh-linked-element"),i=a.data("azh-options"),o=n(a.find('input[type="text"]').val(),1);l(a,i,e,i.property,o),i.refresh&&(t(this).wpColorPicker("close"),"function"==typeof i.refresh?i.refresh(a,e):y(e.closest("[data-section]"))),e.trigger("azh-change"),a.trigger("azh-change")}),r(function(t){t.find("input").trigger("change").wpColorPicker("color",t.find("input").val())}),j.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-element"),i=a.data("azh-options"),o=h(a,i,e,i.property);o=m(i,o);var s=a.find('input[type="text"]').val(o);s.closest(".wp-picker-container").length?s.wpColorPicker("color",o):s.wpColorPicker({change:function(t,e){if(i.refresh)s.closest(".wp-picker-container").off("mouseleave").on("mouseleave",function(){var t=e.color.toString();s.val(t),s.trigger("change"),s.closest(".wp-picker-container").off("mouseleave")});else{var o=e.color.toString();n(s.val(),1)!==n(o,1)&&(s.val(o),s.trigger("change"))}a.trigger("azh-change")},clear:function(t){"click"===t.type&&(i.refresh?s.closest(".wp-picker-container").off("mouseleave").on("mouseleave",function(){s.val(""),s.trigger("change"),s.closest(".wp-picker-container").off("mouseleave")}):s.trigger("change"),a.trigger("azh-change"))}})});break;case"color-attribute":j.addClass("azh-color"),t('<input type="text" '+(i.alpha?'data-alpha="true"':"")+"/>").appendTo(j).on("change",function(){var a=t(this).closest(".azh-control"),e=a.data("azh-options"),i=a.data("azh-linked-element"),o=a.find('input[type="text"]').val();e.alpha&&(o=n(o,1));var s=$(i,e.attribute,o,e.pattern,e.default);i.attr(e.attribute,s),e.refresh&&(t(this).wpColorPicker("close"),"function"==typeof e.refresh?e.refresh(a,i):y(i.closest("[data-section]"))),i.trigger("azh-change"),a.trigger("azh-change")}),j.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-element"),i=a.data("azh-options"),o=e.attr(i.attribute);o=m(i,o);var s=a.find('input[type="text"]').val(o);s.closest(".wp-picker-container").length?s.wpColorPicker("color",o):s.wpColorPicker({change:function(t,e){if(i.refresh)s.closest(".wp-picker-container").off("mouseleave").on("mouseleave",function(){var t=e.color.toString();s.val(t),s.trigger("change"),s.closest(".wp-picker-container").off("mouseleave")});else{var o=e.color.toString();n(s.val(),1)!==n(o,1)&&(s.val(o),s.trigger("change"))}a.trigger("azh-change")},clear:function(t){"click"===t.type&&(i.refresh?s.closest(".wp-picker-container").off("mouseleave").on("mouseleave",function(){s.trigger("change"),s.closest(".wp-picker-container").off("mouseleave")}):s.trigger("change"),a.trigger("azh-change"))}})});break;case"toggle-attribute":t('<input id="'+i.control_type+'" type="checkbox"/>').prependTo(j).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-element"),i=e.data("azh-options");a.prop("checked")?(n.attr(i.attribute,"true_value"in i?i.true_value:"true"),$(n,i.attribute,"true_value"in i?i.true_value:"true"),e.attr("data-value","true")):(n.attr(i.attribute,"false_value"in i?i.false_value:"false"),$(n,i.attribute,"false_value"in i?i.false_value:"false"),e.attr("data-value","false")),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):y(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});j.on("azh-init",function(){var a=t(this),n=a.data("azh-linked-element"),i=a.data("azh-options"),o=!1;o="false_value"in i?n.attr(a.data("azh-options").attribute)!==i.false_value:"true_value"in i?n.attr(a.data("azh-options").attribute)===i.true_value:"true"===n.attr(a.data("azh-options").attribute),a.find("input").prop("checked",o);var s=e();t(this).find("input").attr("id",s),t(this).find("label").attr("for",s),a.attr("data-value",o)});break;case"toggle-url-argument":t('<input id="'+i.control_type+'" type="checkbox"/>').prependTo(j).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-element"),i=e.data("azh-options"),o=n.attr(i.attribute);o&&(o=a.prop("checked")?p(o,i.argument,i.true_value):p(o,i.argument,i.false_value),n.attr(i.attribute,o),$(n,i.attribute,o),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):y(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change"))});j.on("azh-init",function(){var a=t(this),n=a.data("azh-linked-element"),i=a.data("azh-options");if(n.attr(i.attribute)){var o=f(i.argument,o),s=!!i.default&&i.default;o&&(o===i.true_value&&(s=!0),o===i.false_value&&(s=!1)),a.find("input").prop("checked",s),a.attr("data-value",s)}var r=e();t(this).find("input").attr("id",r),t(this).find("label").attr("for",r)});break;case"font-family":F=t("<select></select>").appendTo(j).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-element"),i=e.data("azh-options"),o=t.trim(a.val().replace(/['"]/g,""));l(e,i,n,i.property,"'"+o+"'");var s="https://fonts.googleapis.com/css?family="+o+":100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic";Y[s]||(azh.google_fonts_locale_subsets[azh.locale]&&(s+="&subset="+azh.google_fonts_locale_subsets[azh.locale]),Y[s]=azh.$("<link/>",{rel:"stylesheet",type:"text/css",href:s}).appendTo("head")),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):y(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});j.on("azh-init",function(){var a=t(this),e=a.data("azh-options"),n=a.find("select"),i=h(a,e,a.data("azh-linked-element"),e.property);i=(i=i||"").replace(/['"]/g,"");var o;o=azh.google_fonts,n.append('<option value="">'+azh.i18n.default+"</option>"),t(o).each(function(){n.append('<option value="'+t.trim(this.replace(/['"]/g,""))+'">'+t.trim(this.replace(/['"]/g,""))+"</option>")}),n.val(i)});break;case"background-image":j.addClass("azh-image"),t('<img src="'+d+'" alt="'+azh.i18n.select_image+'"/>').appendTo(j).on("contextmenu",function(a){a.preventDefault();var e=t(this),n=e.closest(".azh-control"),i=n.data("azh-linked-element"),o=n.data("azh-options"),s=h(n,o,i,"background-image");l(n,o,i,"background-image",s=s.indexOf(e.attr("src"))>=0?s.replace(e.attr("src"),"/"):"url('/')"),e.attr("src",d),e.attr("alt",azh.i18n.select_image),n.attr("data-value","false"),o.refresh&&("function"==typeof o.refresh?o.refresh(n,i):y(i.closest("[data-section]"))),i.trigger("azh-change"),n.trigger("azh-change")}).on("click",function(a){var e=t(this),n=e.closest(".azh-control"),i=n.data("azh-linked-element"),o=n.data("azh-options");azh.open_image_select_dialog(a,function(t,a){var s=h(n,o,i,"background-image");s=s.indexOf(e.attr("src"))>=0?s.replace(e.attr("src"),t):"url('"+t+"')",l(n,o,i,"background-image",s),e.attr("src",t),n.attr("data-value","true"),o.refresh&&("function"==typeof o.refresh?o.refresh(n,i):y(i.closest("[data-section]"))),i.trigger("azh-change"),n.trigger("azh-change")})}).on("error",function(){t(this).attr("src",d)}),j.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-element"),n=a.data("azh-options"),i=a.find("img").first();i.detach(),a.find("img").remove();for(var o=h(a,n,e,"background-image"),s=/url\(['"]?([^'"\)]+)['"]?\)/gi,r=null;null!=(r=s.exec(o));)""===r[1]||"/"===r[1]?(i.clone(!0).appendTo(a).attr("src",d),a.attr("data-value","false")):(i.clone(!0).appendTo(a).attr("src",r[1]),a.attr("data-value","true"));0===a.find("img").length&&i.clone(!0).appendTo(a).attr("src",d)});break;case"image-attribute":j.addClass("azh-image");var B=a.attr(i.attribute);t('<img src="'+(B||d)+'" alt="'+azh.i18n.select_image+'"/>').appendTo(j).on("contextmenu",function(a){a.preventDefault();var e=t(this),n=e.closest(".azh-control"),i=n.data("azh-linked-element"),o=n.data("azh-options");e.attr("src",d),e.attr("alt",azh.i18n.select_image),n.attr("data-value","false"),i.attr(o.attribute,""),$(i,o.attribute,"")}).on("click",function(a){var e=t(this),n=e.closest(".azh-control"),i=n.data("azh-linked-element"),o=n.data("azh-options");azh.open_image_select_dialog(a,function(t,a){e.attr("src",t),n.attr("data-value","true"),i.attr(o.attribute,t),$(i,o.attribute,t),o.refresh&&("function"==typeof o.refresh?o.refresh(n,i):y(i.closest("[data-section]"))),i.trigger("azh-change"),n.trigger("azh-change")})}).on("error",function(){t(this).attr("src",d)}),j.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-element").attr(a.data("azh-options").attribute);e?(a.find("img").attr("src",e),a.attr("data-value","true")):(a.find("img").attr("src",d),a.attr("data-value","false"))});break;case"icon-class":t('<div class="azh-button">'+azh.i18n.edit_icon+"</div>").appendTo(j).on("click",function(a){var e=t(this).closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-element"),o="",s=(o=n.multiplying_selector?i.find(n.multiplying_selector).first().attr("class"):i.attr("class")).split(" ").filter(function(t){return t.indexOf("az-")>=0&&t}),r=o.split(" ").filter(function(t){return t.indexOf("azh-")>=0&&t});azh.open_icon_select_dialog(a,o,function(t){X(t);var a=s.concat(t.split(" ")).join(" ");u(e,n,i,"class",a),n.multiplying_selector?i.find(n.multiplying_selector).each(function(){azh.$(this).addClass(r.join(" "))}):i.addClass(r.join(" "))})});break;case"exists-class":t('<input id="'+i.control_type+'" type="checkbox"/>').prependTo(j).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-element"),i=e.data("azh-options");a.prop("checked")?(n.addClass(i.class),T(n,i.class),e.attr("data-value","true")):(n.removeClass(i.class),A(n,i.class),e.attr("data-value","false")),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):y(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});j.on("azh-init",function(){var a=t(this),n=a.data("azh-linked-element"),i=a.data("azh-options");a.find("input").prop("checked",n.hasClass(i.class)),a.attr("data-value",n.hasClass(i.class)?"true":"false");var o=e();t(this).find("input").attr("id",o),t(this).find("label").attr("for",o)});break;case"radio-classes":O=t('<div class="azh-radio"></div>').appendTo(j),P=e();for(var D in j.data("azh-radio-name",P),i.classes){R=t("<div></div>").appendTo(O),H=e();R.append('<input id="'+H+'" type="radio" name="'+P+'" value="'+D+'"><label for="'+H+'" title="'+i.classes[D]+'">'+i.classes[D]+"</label>")}O.find('input[type="radio"]').on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-element"),i=e.data("azh-options");for(var o in i.classes)n.removeClass(o),A(n,o);n.addClass(a.val()),T(n,a.val()),e.attr("data-value",a.val()),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):y(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")}),j.on("azh-init",function(){var a=t(this),e=(j.data("azh-radio-name"),a.data("azh-linked-element")),n=a.data("azh-options"),i="";for(var o in n.classes)if(e.is("."+o)){i=o;break}var s=a.find("> div");s.find("[value]").prop("checked",!1),s.find('[value="'+i+'"]').prop("checked",!0),a.attr("data-value",i)});break;case"exists-attribute":t('<input id="'+i.control_type+'" type="checkbox"/>').prependTo(j).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-element"),i=e.data("azh-options");if(a.prop("checked")){var o=i.value?i.value:"";n.attr(i.attribute,o),$(n,i.attribute,o),e.attr("data-value","true")}else n.removeAttr(i.attribute),C(n,i.attribute),e.attr("data-value","false");i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):y(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});j.on("azh-init",function(){var a=t(this),n=a.data("azh-linked-element");a.find("input").prop("checked",void 0!==n.attr(a.data("azh-options").attribute)&&!1!==n.attr(a.data("azh-options").attribute)),a.attr("data-value",a.find("input").prop("checked")?"true":"false");var i=e();t(this).find("input").attr("id",i),t(this).find("label").attr("for",i)});break;case"exists-style":t('<input id="'+i.control_type+'" type="checkbox"/>').prependTo(j).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-element"),i=e.data("azh-options"),o=i.value?i.value:"";a.prop("checked")?(n.css(i.property,o),e.attr("data-value","true")):(o="",n.css(i.property,""),e.attr("data-value","false")),l(e,i,n,i.property,o),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):y(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});r(function(t){t.find("input").trigger("change")}),j.on("azh-init",function(){var a=t(this),n=a.data("azh-linked-element"),i=a.data("azh-options"),o=h(a,i,n,i.property);o=!!o,a.find("input").prop("checked",o),a.attr("data-value",o?"true":"false");var s=e();t(this).find("input").attr("id",s),t(this).find("label").attr("for",s)});break;case"html-tag":F=t("<select></select>").appendTo(j).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-element"),i=e.data("azh-options"),o=g(n);n.empty(),x(n,a.val());var s=azh.$(n.data("azh-open-tag")+o+n.data("azh-close-tag"));n.replaceWith(s),v(s.get(0)),E(s),at(s),e.data("azh-linked-element",s),e.attr("data-value",a.val()),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):y(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});if("string"!=typeof i.options)for(var D in i.options)F.append('<option value="'+D+'">'+i.options[D]+"</option>");j.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-element"),n=(a.data("azh-options"),a.find("select")),i=e.prop("tagName").toLowerCase();n.val(i),a.attr("data-value",i)});break;case"post-autocomplete":t('<input type="text" value=""/>').appendTo(j).on("keydown",function(a){a.keyCode===t.ui.keyCode.TAB&&t(this).autocomplete("instance").menu.active&&a.preventDefault()}).on("keydown keyup blur",function(a){var e=t(this);if(""==e.val()){var n=e.closest(".azh-control"),i=n.data("azh-linked-element"),o=n.data("azh-options");i.attr(o.attribute,""),$(i,o.attribute,"")}});j.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-element").attr(a.data("azh-options").attribute),n=a.find("input");n.autocomplete({minLength:0,source:function(a,e){var n=this.element;if(""!=a.term){var i=n.closest(".azh-control"),o=i.data("azh-linked-element");t.post(azh.ajaxurl,{action:"azh_posts_autocomplete",exclude:o.attr(i.data("azh-options").attribute),search:a.term},function(t){e(t)},"json")}else e()},focus:function(t,a){return!1},select:function(e,n){var o=t(this);if(n.item){var s=o.closest(".azh-control"),r=s.data("azh-linked-element");r.attr(a.data("azh-options").attribute,n.item.value),$(r,a.data("azh-options").attribute,n.item.value),a.data("azh-options").refresh&&("function"==typeof i.refresh?i.refresh(s,r):y(r.closest("[data-section]")))}return!1}}),""!=t.trim(e)&&t.post(azh.ajaxurl,{action:"azh_posts_autocomplete_labels",values:e},function(t){n.val(Object.keys(t).map(function(a){return t[a]}).join(" "))},"json")})}if(i.description&&t('<div class="azh-description">'+i.description+"</div>").appendTo(j),j.data("azh-options",i),j.data("azh-linked-element",a),"menu"in i&&"utility"==i.menu)j.trigger("azh-init"),b.append(j),b.data("azh-filled",!0);else{var U=a.data("azh-context");U||(U=[]),U.push(j),a.data("azh-context",U),a.addClass("azh-context")}k.push(j),a.addClass("azh-linked-controls"),a.data("azh-linked-controls",k)}}}function m(a){a.is('[data-element*="shortcode"]')&&a.off("mouseenter.azh-shortcode").off("mouseleave.azh-shortcode");var e=t.trim(a.attr("data-element"));azh.files_settings[e]&&azh.files_settings[e].wrapper_classes&&t(azh.files_settings[e].wrapper_classes).each(function(){a.removeClass(this),A(a,this)}),a.attr("data-element",""),$(a,"data-element",""),a.data("element",""),a.data("azh-linked-controls",!1),a.attr("contenteditable")&&(a.attr("contenteditable","false"),a.removeClass("az-contenteditable"),A(a,"az-contenteditable")),a.empty()}function _(a,e){var n=t.trim(a.attr("data-element"));azh.files_settings[n]&&azh.files_settings[n].wrapper_classes&&t(azh.files_settings[n].wrapper_classes).each(function(){a.addClass(this),T(a,this)}),e.addClass(a.attr("class"))}function O(a){var e=t('<div class="azh-element-controls" title="'+azh.i18n.element_settings+'"></div>').appendTo(azh.controls_container).on("mouseenter",function(){t(this).data("azh-linked-element").addClass("azh-over")}).on("mouseleave",function(){t(this).data("azh-linked-element").removeClass("azh-over")});return _(a,e),e.hide(),a.data("azh-controls",e),e.data("azh-linked-element",a),a.addClass("azh-controls"),e.append('<div class="azh-name">'+t.trim(a.data("element"))+"</div>"),e}function D(a){return t('<div class="azh-copy-element" title="'+azh.i18n.copy+'"></div>').appendTo(a).on("click",function(){var e=t(this).data("azh-linked-element");a=e.data("azh-controls"),e.find(".az-free-positioning").each(function(){$(azh.$(this),"data-height",azh.$(this).height()),$(azh.$(this),"data-width",azh.$(this).width())});var n=s(g(e));return t.post(azh.ajaxurl,{action:"azh_copy",code:n,path:e.attr("data-element")},function(t){alert(azh.i18n.copied)}),!1})}function q(a){return t('<div class="azh-remove-element" title="'+azh.i18n.remove_element+'"></div>').appendTo(a).on("click",function(){var e=t(this).data("azh-linked-element"),n=e.closest("[data-section]"),i=e.closest("[data-cloneable], [data-cloneable-inline]");if(a=e.data("azh-controls"),1===e.parent("[data-cloneable], [data-cloneable-inline]").length)1===e.parent().children().length?(m(e),j(e),O(e)):(j(e),e.remove());else{var o=e.closest(".az-element-wrapper");1===i.find(".az-element-wrapper").length?(m(e),j(e),O(e)):(j(o),o.remove())}return i.length&&ot(i)&&(y(n),i.trigger("azh-refresh")),ft(),azh.change(),!1})}function B(a,e){return t('<div class="azh-add-element-'+(e?"after":"before")+'" title="'+(e?azh.i18n.add_element_after:azh.i18n.add_element_before)+'"></div>').appendTo(a).on("click",function(){var a=t(this).data("azh-linked-element").closest(".az-element-wrapper"),n=!1;a.is("[data-element]")?0===a.contents().length?n=a:(n=a.clone(!0),e?n.insertAfter(a):n.insertBefore(a)):0===a.find("[data-element]").children().length?n=a:(n=a.clone(!0),e?n.insertAfter(a):n.insertBefore(a));var i=n.is("[data-element]")?n:n.find("[data-element]");return m(i),O(i),setTimeout(function(){i.trigger("click")}),azh.change(),!1})}function J(a){function e(a){if(!a.data("azh-width-right-resizer")){var e=t('<div class="azh-resizer azh-col-resize"></div>').appendTo(azh.controls_container).on("mousedown",function(e){var n=t(this);return n.data("azh-drag",!0),n.data("azh-drag-x",e.pageX),n.data("azh-start-drag-x",e.pageX),n.css("left",a.offset().left+a.width()-5),""==a.get(0).style.width&&(a.css("width",a.width()+"px"),S(a,"width",a.width()+"px")),azh.document_off("mouseup.resizer").document_on("mouseup.resizer",function(t){n.data("azh-start-drag-x")===t.pageX&&(a.css("width",""),S(a,"width","")),n.data("azh-drag",!1),n.is(":hover")||azh.document_off("mouseup.resizer")}),azh.document_off("mousemove.resizer").document_on("mousemove.resizer",function(t){if(n.data("azh-drag")){var e=t.pageX-n.data("azh-drag-x"),i=parseInt(M(a,"width"),10)+e;(i=isNaN(i)?0:i)<0&&(i=0),S(a,"width",i+="px"),a.css("width",i),n.data("azh-drag-x",t.pageX),n.css("left",a.offset().left+a.width()-5)}}),e.stopPropagation(),e.preventDefault(),!1}).on("mouseleave",function(e){var n=t(this);n.data("azh-drag")||a.is(":hover")||(a.data("azh-width-right-resizer",!1),n.remove(),a.trigger("mouseleave"))}).css({top:a.offset().top,left:a.offset().left+a.width()-5,height:a.innerHeight(),width:10});a.data("azh-width-right-resizer",e)}}function n(a){if(!a.data("azh-height-bottom-resizer")){var e=t('<div class="azh-resizer azh-row-resize"></div>').appendTo(azh.controls_container).on("mousedown",function(e){var n=t(this);return n.data("azh-drag",!0),n.data("azh-drag-y",e.pageY),n.data("azh-start-drag-y",e.pageY),n.css("top",a.offset().top+a.height()-5),""==a.get(0).style.height&&(a.css("height",a.height()+"px"),S(a,"height",a.height()+"px")),azh.document_off("mouseup.resizer").document_on("mouseup.resizer",function(t){n.data("azh-start-drag-y")===t.pageY&&(a.css("height",""),S(a,"height","")),n.data("azh-drag",!1),n.is(":hover")||azh.document_off("mouseup.resizer")}),azh.document_off("mousemove.resizer").document_on("mousemove.resizer",function(t){if(n.data("azh-drag")){var e=t.pageY-n.data("azh-drag-y"),i=parseInt(M(a,"height"),10)+e;(i=isNaN(i)?0:i)<0&&(i=0),S(a,"height",i+="px"),a.css("height",i),n.data("azh-drag-y",t.pageY),n.css("top",a.offset().top+a.height()-5)}}),e.stopPropagation(),e.preventDefault(),!1}).on("mouseleave",function(e){var n=t(this);n.data("azh-drag")||a.is(":hover")||(a.data("azh-height-bottom-resizer",!1),n.remove(),a.trigger("mouseleave"))}).css({top:a.offset().top+a.height()-5,left:a.offset().left,height:10,width:a.innerWidth()});a.data("azh-height-bottom-resizer",e)}}a.on("mouseenter",function(a){var i=azh.$(this);setTimeout(function(){"relative"===i.css("position")&&i.contents().length&&e(i),"absolute"===i.css("position")&&(i.is(".az-left, .az-center")&&e(i),i.is(".az-right")&&function(a){if(!a.data("azh-width-left-resizer")){var e=t('<div class="azh-resizer azh-col-resize"></div>').appendTo(azh.controls_container).on("mousedown",function(e){var n=t(this);return n.data("azh-drag",!0),n.data("azh-drag-x",e.pageX),n.data("azh-start-drag-x",e.pageX),n.css("left",a.offset().left-5),""==a.get(0).style.width&&(a.css("width",a.width()+"px"),S(a,"width",a.width()+"px")),azh.document_off("mouseup.resizer").document_on("mouseup.resizer",function(t){n.data("azh-start-drag-x")===t.pageX&&(a.css("width",""),S(a,"width","")),n.data("azh-drag",!1),n.is(":hover")||azh.document_off("mouseup.resizer")}),azh.document_off("mousemove.resizer").document_on("mousemove.resizer",function(t){if(n.data("azh-drag")){var e=n.data("azh-drag-x")-t.pageX,i=parseInt(M(a,"width"),10)+e;(i=isNaN(i)?0:i)<0&&(i=0),S(a,"width",i+="px"),a.css("width",i),n.data("azh-drag-x",t.pageX),n.css("left",a.offset().left-5)}}),e.stopPropagation(),e.preventDefault(),!1}).on("mouseleave",function(e){var n=t(this);n.data("azh-drag")||a.is(":hover")||(a.data("azh-width-left-resizer",!1),n.remove(),a.trigger("mouseleave"))}).css({top:a.offset().top,left:a.offset().left-5,height:a.innerHeight(),width:10});a.data("azh-width-left-resizer",e)}}(i),i.is(".az-top, .az-middle")&&n(i),i.is(".az-bottom")&&function(a){if(!a.data("azh-height-top-resizer")){var e=t('<div class="azh-resizer azh-row-resize"></div>').appendTo(azh.controls_container).on("mousedown",function(e){var n=t(this);return n.data("azh-drag",!0),n.data("azh-drag-y",e.pageY),n.data("azh-start-drag-y",e.pageY),n.css("top",a.offset().top-5),""==a.get(0).style.height&&(a.css("height",a.height()+"px"),S(a,"height",a.height()+"px")),azh.document_off("mouseup.resizer").document_on("mouseup.resizer",function(t){n.data("azh-start-drag-y")===t.pageY&&(a.css("height",""),S(a,"height","")),n.data("azh-drag",!1),n.is(":hover")||azh.document_off("mouseup.resizer")}),azh.document_off("mousemove.resizer").document_on("mousemove.resizer",function(t){if(n.data("azh-drag")){var e=n.data("azh-drag-y")-t.pageY,i=parseInt(M(a,"height"),10)+e;(i=isNaN(i)?0:i)<0&&(i=0),S(a,"height",i+="px"),a.css("height",i),n.data("azh-drag-y",t.pageY),n.css("top",a.offset().top-5)}}),e.stopPropagation(),e.preventDefault(),!1}).on("mouseleave",function(e){var n=t(this);n.data("azh-drag")||a.is(":hover")||(a.data("azh-height-top-resizer",!1),n.remove(),a.trigger("mouseleave"))}).css({top:a.offset().top-5,left:a.offset().left,height:10,width:a.innerWidth()});a.data("azh-height-top-resizer",e)}}(i)),i.find("> .az-free-positioning").each(function(){e(azh.$(this)),n(azh.$(this))})})}).on("mouseleave",function(){var a=azh.$(this);setTimeout(function(){t(["azh-width-right-resizer","azh-width-left-resizer","azh-height-top-resizer","azh-height-bottom-resizer"]).each(function(){var t=this;a.data(t)&&(a.data(t).is(":hover")||a.data(t).data("azh-drag")||(a.data(t).remove(),a.data(t,!1))),a.find("> .az-free-positioning").each(function(){var a=azh.$(this);a.data(t)&&(a.data(t).is(":hover")||a.data(t).data("azh-drag")||(a.data(t).remove(),a.data(t,!1)))})})})})}function Q(a){return azh.document_off("mousemove.move").document_on("mousemove.move",function(a){azh.controls_container.find(".azh-move-element.azh-move").each(function(){var e=t(this),n=e.data("azh-linked-element").closest(".az-element-wrapper"),i=e.closest(".azh-element-controls");if(i.css({top:i.data("top")+a.pageY-e.data("pageY")+"px",left:i.data("left")+a.pageX-e.data("pageX")+"px"}),n.parent(".az-free-positioning").length||"absolute"===n.css("position")){if(n.is(".az-left")&&(n.css("left",n.data("left")+a.pageX-e.data("pageX")+"px"),S(n,"left",n.data("left")+a.pageX-e.data("pageX")+"px")),n.is(".az-center")){var o=n.data("center")+a.pageX-e.data("pageX");o>=0?(n.css("left","calc(50% + "+o+"px)"),S(n,"left","calc(50% + "+o+"px)")):(n.css("left","calc(50% - "+Math.abs(o)+"px)"),S(n,"left","calc(50% - "+Math.abs(o)+"px)"))}if(n.is(".az-right")&&(n.css("right",n.data("right")+e.data("pageX")-a.pageX+"px"),S(n,"right",n.data("right")+e.data("pageX")-a.pageX+"px")),n.is(".az-top")&&(n.css("top",n.data("top")+a.pageY-e.data("pageY")+"px"),S(n,"top",n.data("top")+a.pageY-e.data("pageY")+"px")),n.is(".az-middle")){var s=n.data("middle")+a.pageY-e.data("pageY");s>=0?(n.css("top","calc(50% + "+s+"px)"),S(n,"top","calc(50% + "+s+"px)")):(n.css("top","calc(50% - "+Math.abs(s)+"px)"),S(n,"top","calc(50% - "+Math.abs(s)+"px)"))}n.is(".az-bottom")&&(n.css("bottom",n.data("bottom")+e.data("pageY")-a.pageY+"px"),S(n,"bottom",n.data("bottom")+e.data("pageY")-a.pageY+"px"))}else"static"===n.css("position")&&(n.css("position","relative"),S(n,"position","relative"),n.css("z-index","1"),S(n,"z-index","1"),n.css({width:n.width()+"px"}),S(n,"width",n.width()+"px")),n.css({top:n.data("top")+a.pageY-e.data("pageY")+"px",left:n.data("left")+a.pageX-e.data("pageX")+"px"}),S(n,"top",n.data("top")+a.pageY-e.data("pageY")+"px"),S(n,"left",n.data("left")+a.pageX-e.data("pageX")+"px")})}),azh.document_off("mouseup.move").document_on("mouseup.move",function(a){azh.controls_container.find(".azh-move-element.azh-move").each(function(){var a=t(this);a.removeClass("azh-move");var e=a.data("azh-linked-element").closest(".az-element-wrapper"),n=a.closest(".azh-element-controls");e.parent(".az-free-positioning").length||"absolute"===e.css("position")?n.data("top")===parseInt(n.css("top"),10)&&n.data("left")===parseInt(n.css("left"),10)&&(n.css({top:"",left:""}),e.css("transform",""),S(e,"transform",""),e.is(".az-left")&&(e.css("left",""),S(e,"left","")),e.is(".az-center")&&(e.css("left","calc(50% + 0px)"),S(e,"left","calc(50% + 0px)")),e.is(".az-right")&&(e.css("right",""),S(e,"right","")),e.is(".az-top")&&(e.css("top",""),S(e,"top","")),e.is(".az-middle")&&(e.css("top","calc(50% + 0px)"),S(e,"top","calc(50% + 0px)")),e.is(".az-bottom")&&(e.css("bottom",""),S(e,"bottom",""))):n.data("top")===parseInt(n.css("top"),10)&&n.data("left")===parseInt(n.css("left"),10)&&(n.css({top:"",left:""}),e.css({top:"",left:""}),S(e,"top",""),S(e,"left",""),"relative"===e.css("position")?(e.css("position","static"),S(e,"position","static"),e.css("z-index",""),S(e,"z-index",""),e.css({width:""}),S(e,"width","")):(e.css("position","relative"),S(e,"position","relative"),e.css("z-index","1"),S(e,"z-index","1"),e.css({width:e.width()+"px"}),S(e,"width",e.width()+"px")))})}),t('<div class="azh-move-element" title="'+azh.i18n.move_element+'"></div>').appendTo(a).on("mousedown",function(a){var e=t(this),n=e.data("azh-linked-element").closest(".az-element-wrapper"),i=e.closest(".azh-element-controls");if(e.addClass("azh-move"),e.data("pageX",a.pageX),e.data("pageY",a.pageY),i.data("top",isNaN(parseInt(i.css("top"),10))?0:parseInt(i.css("top"),10)),i.data("left",isNaN(parseInt(i.css("left"),10))?0:parseInt(i.css("left"),10)),n.parent(".az-free-positioning").length||"absolute"===n.css("position")){if(n.is(".az-left")&&n.data("left",isNaN(parseInt(n.css("left"),10))?0:parseInt(n.css("left"),10)),n.is(".az-center")){var o=/calc\(50% ([-+]) (\d+)px\)/gi.exec(n.get(0).style.left?n.get(0).style.left:"");o?n.data("center",parseInt(o[1]+o[2],10)):n.data("center",0)}if(n.is(".az-right")&&n.data("right",isNaN(parseInt(n.css("right"),10))?0:parseInt(n.css("right"),10)),n.is(".az-top")&&n.data("top",isNaN(parseInt(n.css("top"),10))?0:parseInt(n.css("top"),10)),n.is(".az-middle")){var s=/calc\(50% ([-+]) (\d+)px\)/gi.exec(n.get(0).style.top?n.get(0).style.top:"");s?n.data("middle",parseInt(s[1]+s[2],10)):n.data("middle",0)}n.is(".az-bottom")&&n.data("bottom",isNaN(parseInt(n.css("bottom"),10))?0:parseInt(n.css("bottom"),10))}else n.data("top",isNaN(parseInt(n.css("top"),10))?0:parseInt(n.css("top"),10)),n.data("left",isNaN(parseInt(n.css("left"),10))?0:parseInt(n.css("left"),10));return!1})}function V(t,a){var e=new RegExp("(^"+a+"|[ \\\"\\'\\;]"+a+")\\s*:","i");if(t.attr("style").match(e)){var n=w(t,"style");if(!1!==n&&n.match(e))return!0}return!1}function G(n,i){function o(a){R({title:"Edit shortcode",desc:"",label:"Shortcode"},azh.shortcode_instances[a],function(e){azh.shortcode_instances[a]=e,t.post(azh.ajaxurl,{action:"azh_update_shortcode",post_id:azh.post_id,instance:a,shortcode:e},function(t){t&&(n.html(t),n.find("a[href]").on("click",function(t){t.preventDefault()}),i&&i())}),azh.change()})}if("shortcode_instances"in azh&&azh.shortcode_instances&&n.attr("data-shortcode")in azh.shortcode_instances){if(c=F(azh.shortcode_instances[n.attr("data-shortcode")])){var s=c[2],r=a.attrs(c[3]).named,h=c[5],l=azh.shortcodes[s];r.content=h,azh.open_element_settings_dialog(l,r,function(a,e){a=W(l,a,e);azh.shortcode_instances[n.attr("data-shortcode")]=a;var o=n.attr("data-shortcode");t.post(azh.ajaxurl,{action:"azh_update_shortcode",post_id:azh.post_id,instance:o,shortcode:a},function(t){if(t){var a=n.closest("[data-section]");n.replaceWith(t),n.find("a[href]").on("click",function(t){t.preventDefault()}),n=a.find('[data-shortcode="'+o+'"]'),v(n.get(0)),azh.section_customization_init(a),i&&i()}}),azh.change()})}}else if(n.is('[data-element*="shortcode"]')){var c,d=n.attr("data-element"),z="";if(n.children().length||(z=n.text()),"shortcode_instances"in azh&&azh.shortcode_instances&&d in azh.shortcode_instances?z=azh.shortcode_instances[d]:(d="shortcode: "+e(),n.attr("data-element",d),$(n,"data-element",d),azh.shortcode_instances[d]=z),c=F(z)){s=c[2],r=a.attrs(c[3]).named,h=c[5];if(r.content=h,azh.shortcodes[s]){l=azh.shortcodes[s];azh.open_element_settings_dialog(l,r,function(a,e){a=W(l,a,e);azh.shortcode_instances[d]=a,t.post(azh.ajaxurl,{action:"azh_update_shortcode",post_id:azh.post_id,instance:d,shortcode:a},function(t){t&&(n.html(t),n.find("a[href]").on("click",function(t){t.preventDefault()}),i&&i())}),azh.change()})}else o(d)}else o(d)}}function K(a,e){if("modal_options"in azh){var n=1;t(azh.modal_options).each(function(){var i=this;if(e){if(i.menu&&"utility"!==i.menu)return}else if(i.menu&&"context"!==i.menu)return;i.order||(i.order=n),n++,"selector"in i&&a.find(i.selector).andSelf().filter(i.selector).each(function(){var a=azh.$(this),n=z(a.closest('[data-section].azh-controls, [class*="azh-col-"].azh-controls, [data-element].azh-controls'));if(!a.parents('[data-element*="shortcode"]').length){if(e){if(!("menu"in i&&"utility"==i.menu))return;if(!e.is(n))return}var o=t('<div class="azh-modal-button '+i.button_class+'" data-type="'+i.button_type+'" title="'+i.title+'" '+(i.group?'data-group="'+i.group+'"':"")+(i.subgroup?'data-subgroup="'+i.subgroup+'"':"")+(i.order?'data-order="'+i.order+'"':"")+">"+i.button_text+"</div>").on("click",function(a){var e=t(this);!function(a,e,n){var i=t('<div class="azh-modal"></div>');if(t('<div class="azh-modal-title">'+a.title+"</div>").appendTo(i),a.desc&&t('<div class="azh-modal-desc">'+a.desc+"</div>").appendTo(i),"attribute"in a)if(a.label&&t('<div class="azh-modal-label">'+a.label+"</div>").appendTo(i),"options"in a){var o=t('<select class="azh-modal-control" name="'+a.attribute+'"></select>').appendTo(i);for(var s in a.options)s===e.attr(a.attribute)?t('<option value="'+s+'" selected>'+a.options[s]+"</option>").appendTo(o):t('<option value="'+s+'">'+a.options[s]+"</option>").appendTo(o)}else a.type&&"textarea"===a.type?t('<textarea name="'+a.attribute+'" class="azh-modal-control">'+(e.attr(a.attribute)?e.attr(a.attribute):"")+"</textarea>").appendTo(i):t('<input type="'+(a.type?a.type:"text")+'" name="'+a.attribute+'" value="'+(e.attr(a.attribute)?e.attr(a.attribute):"")+'" class="azh-modal-control">').appendTo(i);if("attributes"in a)for(var r in a.attributes){var h=a.attributes[r];if(h.label&&t('<div class="azh-modal-label">'+h.label+"</div>").appendTo(i),"options"in h)for(var s in o=t('<select class="azh-modal-control" name="'+r+'"></select>').appendTo(i),h.options)s===e.attr(r)?t('<option value="'+s+'" selected>'+h.options[s]+"</option>").appendTo(o):t('<option value="'+s+'">'+h.options[s]+"</option>").appendTo(o);else h.type&&"textarea"===h.type?t('<textarea name="'+r+'" class="azh-modal-control">'+e.attr(r)+"</textarea>").appendTo(i):t('<input type="'+(h.type?h.type:"text")+'" name="'+r+'" value="'+e.attr(r)+'" class="azh-modal-control">').appendTo(i)}a.callback&&a.callback(e,i);var l=t('<div class="azh-modal-actions"></div>').appendTo(i);t('<div class="azh-modal-ok">'+azh.i18n.ok+"</div>").appendTo(l).on("click",function(){if("attribute"in a&&(e.attr(a.attribute,i.find('[name="'+a.attribute+'"]').val()),$(e,a.attribute,i.find('[name="'+a.attribute+'"]').val())),"attributes"in a)for(var o in a.attributes)e.attr(o,i.find('[name="'+o+'"]').val()),$(e,o,i.find('[name="'+o+'"]').val());return t.simplemodal.close(),n(),!1}),t('<div class="azh-modal-cancel">'+azh.i18n.cancel+"</div>").appendTo(l).on("click",function(){return t.simplemodal.close(),!1}),i.simplemodal({autoResize:!0,overlayClose:!0,opacity:0,overlayCss:{"background-color":"black"},closeClass:"azh-close",onClose:function(){t.simplemodal.close()}})}(i,e.data("azh-linked-element"),function(){e.data("azh-options").refresh&&y(e.data("azh-linked-element").closest("[data-section]"))})}).on("mouseenter",function(){var a=t(this);a.data("azh-linked-element")&&a.data("azh-linked-element").addClass("azh-over")}).on("mouseleave",function(){var a=t(this);a.data("azh-linked-element")&&a.data("azh-linked-element").removeClass("azh-over")});if(o.data("azh-options",i),o.data("azh-linked-element",a),"menu"in i){if("context"===i.menu){var s=a.data("azh-context");s||(s=[]),s.push(o),a.data("azh-context",s),a.addClass("azh-context")}"utility"===i.menu&&(n.append(o),n.data("azh-filled",!0))}else{if("section_control"in i&&i.section_control)a.closest("[data-section]").data("azh-controls").append(o);else a.closest("[data-section].azh-controls, [data-element].azh-controls").data("azh-controls").append(o)}}})})}}function Z(a,e){function n(t,a,e){var i=t.children[e[a]];return i||(i={options_list:[],children:{}},t.children[e[a]]=i),a+1<e.length?n(i,a+1,e):i}function i(a,n){for(var o in n.children){var s=a.find(o);if(n!==azh.selectors_cache_tree&&n!==azh.context_selectors_cache_tree&&n!==azh.utility_selectors_cache_tree||(s=s.andSelf().filter(o)),s.length){var r=n.children[o].options_list;r&&t(r).each(function(){var t=this;s.each(function(){u(azh.$(this),t,e)})}),s.each(function(){i(azh.$(this),n.children[o])})}}}if("controls_options"in azh){if(!azh.selectors_cache_tree){azh.selectors_cache_tree={children:{}},azh.context_selectors_cache_tree={children:{}},azh.utility_selectors_cache_tree={children:{}};var o=1;t(azh.controls_options).each(function(){var a=this;if(a.selector){var e=a.selector.split(",");a.order||(a.order=o),t(e).each(function(){var e=t.trim(this).replace(/([\~\+\>])/g," $1 ").replace(/\s\s+/g," ").replace(/ ([\~\+\>]) /g," $1");e=(e=(e=e.replace(/" "/g,'"***"')).split(" ")).map(function(t){return t.replace(/"\*\*\*"/g,'" "')}),n(azh.selectors_cache_tree,0,e).options_list.push(a),"context"===a.menu&&n(azh.context_selectors_cache_tree,0,e).options_list.push(a),"utility"===a.menu&&n(azh.utility_selectors_cache_tree,0,e).options_list.push(a)})}o++})}i(a,e?azh.utility_selectors_cache_tree:azh.context_selectors_cache_tree),t(azh.controls_options).each(function(){var t=this;if(e){if(t.menu&&"utility"!==t.menu)return}else if(t.menu&&"context"!==t.menu)return;if(!("selector"in t))switch(t.type){case"input-attribute":case"textarea-attribute":case"dropdown-attribute":case"radio-attribute":case"integer-attribute":case"toggle-attribute":case"url-attribute":case"toggle-url-argument":case"image-attribute":case"color-attribute":a.find("["+t.attribute+"]").each(function(){var n=w(azh.$(this),t.attribute);if(!1!==n){if("restriction"in t&&t.restriction){var i=t.restriction,o=new RegExp("{"+t.attribute+"}","g");if(i=i.replace(o,n),a.find(i).length)return}u(azh.$(this),t,e)}});break;case"dropdown-style":case"radio-style":case"integer-style":case"integer-list-style":case"background-image":case"color-style":case"font-family":t.attribute?a.find("["+t.attribute+"]").each(function(){var a=azh.$(this);(function(t,a){var e=new RegExp("(^"+a+"|[ \\\"\\'\\;]"+a+")\\s*:","i");if(t.attr("data-hover").match(e)){var n=w(t,"data-hover");if(!1!==n&&n.match(e))return!0}return!1})(a,t.property)&&u(a,t,e)}):a.find("[style]").each(function(){var a=azh.$(this);t.is_selector&&!a.is(t.is_selector)||V(a,t.property)&&u(a,t,e)})}})}}function tt(t){var a;(a=t.data("azh-linked-element").closest("[data-section]"))&&(t.children().filter(":not(.azh-utility-title)").remove(),function(t,a){azh.controls_container.detach(),K(t,a),Z(t,a),it(a,":not(.azh-group):not(.azh-subgroup):not(.azh-cloneable-group):not(.azh-utility-title):not(.azh-context-menu-title)"),ut(a),azh.controls_container.appendTo(l)}(a,t))}function at(t){tt(z(t.closest('[data-section].azh-controls, [class*="azh-col-"].azh-controls, [data-element].azh-controls')))}function et(t){var a=z(t.closest('[data-section].azh-controls, [class*="azh-col-"].azh-controls, [data-element].azh-controls'));return{group:a.find("[data-group].azh-group.azh-active").data("group"),subgroup:a.find("[data-subgroup].azh-subgroup.azh-active").data("subgroup")}}function nt(t,a){var e=z(t.closest('[data-section].azh-controls, [class*="azh-col-"].azh-controls, [data-element].azh-controls'));e.find('[data-group="'+a.group+'"].azh-title').trigger("click"),e.find('[data-subgroup="'+a.subgroup+'"].azh-title').trigger("click")}function it(a,e){var n=a.children();e&&(n=a.children(e)),n.detach(),n.sort(function(a,e){var n=parseInt(t(a).attr("data-order"),10),i=parseInt(t(e).attr("data-order"),10);return n<i?-1:n>i?1:0}),a.append(n)}function ot(t){return t.data("azh-cloneable")&&!0===t.data("azh-cloneable").refresh||t.is(azh.cloneable_refresh.join(","))||t.find(azh.cloneable_refresh_children.join(",")).length}function st(a){if(!a.closest(".azh-context-menu").length){var n=azh.$(),i=azh.$(),o=a.children(":not(.azh-group):not(.azh-subgroup)");o.length&&(o.each(function(){var a=t(this).data("azh-linked-element");if(a){i=i.add(a);var e=a.closest("[data-element]"),o=a.closest("[data-cloneable], [data-cloneable-inline]");o.length&&(e.length&&o.has(e).length||(n=n.add(o)))}}),n.each(function(){var n=azh.$(this),s=[];if(n.children().each(function(){var t=azh.$(this),a=i.filter(function(){return azh.$(this).parents().andSelf().filter(t).length});a.length&&s.push(a)}),s.length){var r=t('<div class="azh-cloneable-groups azh-right-tabs"/>').appendTo(a),h=t('<div class="azh-operations"></div>').appendTo(r),l=t('<div class="azh-cloneable-list"></div>').appendTo(r);t(s).each(function(){var a=t();azh.$(this).each(function(){t(azh.$(this).data("azh-linked-controls")).each(function(){a=a.add(this)})}),(a=a.filter(o)).detach();var n=e(),i=t('<div class="azh-cloneable-group" data-id="'+n+'"/>').appendTo(l).append(a);rt(i),it(i);var s=a.first().data("azh-linked-element");if(s){var r=s.closest(".azh-cloneable-child-controls"),c=t('<div data-trigger="'+n+'"></div>').appendTo(h).data("azh-linked-child",r).on("mouseenter",function(){t(this).data("azh-linked-child").addClass("azh-over")}).on("mouseleave",function(){t(this).data("azh-linked-child").removeClass("azh-over")}).data("azh-linked-child",r);t('<span class="azh-move" title="'+azh.i18n.move+'"></span>').appendTo(c).on("click",function(a){var e=t(this).data("azh-linked-child"),n=t(this).closest("[data-trigger]"),i=a.which?400:0;return n.addClass("azh-active").siblings().removeClass("azh-active"),l.children().filter('[data-id="'+n.data("trigger")+'"]').fadeIn(i).siblings().css("display","none"),e.trigger("azh-active"),!1}).data("azh-linked-child",r),t('<span class="azh-clone" title="'+azh.i18n.clone+'"></span>').appendTo(c).on("click",function(){var a=t(this).data("azh-linked-child");if(ot(a.closest("[data-cloneable], [data-cloneable-inline]")))a.data("azh-cloneable-child-controls").find(".azh-clone").trigger("click");else{var e=et(a);a.data("azh-cloneable-child-controls").find(".azh-clone").trigger("click"),nt(a,e)}return!1}).data("azh-linked-child",r),t('<span class="azh-remove" title="'+azh.i18n.remove+'"></span>').appendTo(c).on("click",function(){if(l.children().length>1){var a=t(this).data("azh-linked-child"),e=a.closest("[data-cloneable], [data-cloneable-inline]");if(ot(e))a.data("azh-cloneable-child-controls").find(".azh-remove").trigger("click");else{var n=et(a);a.data("azh-cloneable-child-controls").find(".azh-remove").trigger("click"),nt(e,n)}}return!1}).data("azh-linked-child",r)}}),h.sortable({handle:".azh-move",placeholder:"azh-placeholder",forcePlaceholderSize:!0,update:function(a,e){var n=t(e.item).data("azh-linked-child"),i=n.closest("[data-cloneable], [data-cloneable-inline]");(n.detach(),t(e.item).next().length)?t(e.item).next().data("azh-linked-child").before(n):t(e.item).prev().length&&t(e.item).prev().data("azh-linked-child").after(n);ot(i)&&y(i.closest("[data-section]"))},over:function(t,a){a.placeholder.attr("class",a.helper.attr("class")),a.placeholder.removeClass("ui-sortable-helper"),a.placeholder.attr("style",a.helper.attr("style")),a.placeholder.css("position","relative"),a.placeholder.css("z-index","auto"),a.placeholder.css("left","auto"),a.placeholder.css("top","auto"),a.placeholder.addClass("azh-placeholder")}}),h.children().first().find(".azh-move").trigger("click")}}))}}function rt(a){var e={};if(a.find("> [data-subgroup]").each(function(){e[t(this).data("subgroup")]=!0}),(e=Object.keys(e)).length){var n=t('<div class="azh-subgroups azh-tabs"/>').appendTo(a),i=t('<div class="azh-titles"></div>').appendTo(n),o=t('<div class="azh-subgroup-list"></div>').appendTo(n);t(e).each(function(){var e=a.find('> [data-subgroup="'+this+'"]').detach();t('<div class="azh-subgroup" data-subgroup="'+this+'"/>').appendTo(o).append(e);t('<span class="azh-title" data-subgroup="'+this+'">'+this+"</span>").appendTo(i).on("click",function(e){var n=t(this);n.addClass("azh-active").siblings().removeClass("azh-active");var i=e.which?400:0;return a.find('.azh-subgroup[data-subgroup="'+n.data("subgroup")+'"]').fadeIn(i).siblings().css("display","none"),!1})}),i.children().first().trigger("click")}}function ut(a){var e={};a.find("> [data-group]").each(function(){e[t(this).data("group")]=!0}),e=Object.keys(e),t(e).each(function(){var e=a.find('> [data-group="'+this+'"]:not(.azh-group)').wrapAll('<div class="azh-group" data-group="'+this+'"/>').parent(),n=e.children(),i=t('<div class="azh-group-list"/>').insertBefore(n.first());n.detach().appendTo(i);t('<div class="azh-title" data-group="'+this+'">'+this+"</div>").prependTo(e).on("click",function(e){var n=t(this),i=e.which?400:0;return n.closest(".azh-group").is(".azh-active")?n.closest(".azh-group").removeClass("azh-active").find(".azh-group-list").slideUp(i):(a.find(".azh-group").removeClass("azh-active").find(".azh-group-list").slideUp(i),n.closest(".azh-group").addClass("azh-active").find(".azh-group-list").slideDown(i,function(){t(this).css("overflow","visible")})),!1})}),a.find(".azh-group > .azh-group-list").each(function(){st(t(this)),rt(t(this))}).hide(),st(a)}azh.window.trigger("azh-customization-before-init",{wrapper:i}),azh.controls_container=!1,t(".azh-controls-container").length?(azh.controls_container=t(".azh-controls-container"),azh.controls_container.detach()):azh.controls_container=t('<div class="azh-controls-container"></div>'),i.on("contextmenu",function(a){function e(a,e){function n(a,e){e.is(".azh-context")&&t(e.data("azh-context")).each(function(){var n=t(this);0===a.children().filter('[data-type="'+n.data("type")+'"]').length&&a.append(n.clone(!0).data("azh-linked-element",e))}),e.parents(".azh-context").each(function(){var e=azh.$(this);t(e.data("azh-context")).each(function(){var n=t(this);0===a.children().filter('[data-type="'+n.data("type")+'"]').length&&a.append(n.clone(!0).data("azh-linked-element",e))})})}n(a,e);var i=e.closest("[data-section]").data("azh-linked-ids");e.parents(".azh-id-attr").andSelf().filter(".azh-id-attr").each(function(){var e=azh.$(this);if(e.is(".azh-id-attr")){var o=e.attr(e.data("azh-id-attr"));o in i&&t(i[o]).each(function(){azh.$(this).is(e)||n(a,azh.$(this))})}}),e.parents(".azh-hash-attr").andSelf().filter(".azh-hash-attr").each(function(){var e=azh.$(this);if(e.is(".azh-hash-attr")){var o=e.attr(e.data("azh-hash-attr")).replace("#","");o in i&&t(i[o]).each(function(){azh.$(this).is(e)||n(a,azh.$(this))})}});var o=a.find(".azh-modal-button");o.detach(),a.prepend(o),setTimeout(function(){ut(a)})}a.preventDefault();var n=azh.$(a.target),i=t(".azh-context-menu").length?t(".azh-context-menu"):t('<div class="azh-context-menu"></div>').appendTo(l);i.hide(),i.empty(),i.css("left",a.clientX+(azh.device_left?azh.device_left:0)+"px"),i.css("top",a.clientY+"px"),h.off("click.azh-context-menu").on("click.azh-context-menu",function(a){t(a.target).closest(".azh-devices, #wp-link-wrap, .media-modal, .azh-icon-select-dialog").length||t(a.target).closest(".azh-context-menu").length||(i.hide(),h.off("click.azh-context-menu"))}),n.is(".azh-auxiliary")&&(n.css("pointer-events","none"),e(i,azh.$(azh.document.get(0).elementFromPoint(a.clientX,a.clientY))),n.css("pointer-events","")),e(i,n),"absolute"===n.css("position")&&(n.css("pointer-events","none"),e(i,azh.$(azh.document.get(0).elementFromPoint(a.clientX,a.clientY))),n.css("pointer-events","")),n.children().each(function(){var t=azh.$(this);"none"===t.css("pointer-events")&&(t.css("pointer-events","all"),e(i,azh.$(azh.document.get(0).elementFromPoint(a.clientX,a.clientY))),t.css("pointer-events",""))}),i.children().off("mouseenter").on("mouseenter",function(){var a=t(this);a.data("azh-linked-element")&&a.data("azh-linked-element").addClass("azh-over")}),i.children().off("mouseleave").on("mouseleave",function(){var a=t(this);a.data("azh-linked-element")&&a.data("azh-linked-element").removeClass("azh-over")}),i.children().each(function(){t(this).trigger("azh-init")}),i.children().length&&(t('<div class="azh-context-menu-title">'+c(n)+"</div>").prependTo(i),i.show().trigger("azh-showed"),i.find(".azh-modal-button, .azh-button").on("click",function(){i.hide()}),i.draggable({handle:".azh-context-menu-title"}))}),i.find(".az-contenteditable").andSelf().filter(".az-contenteditable").each(function(){o(azh.$(this))}),i.find("span.az-inline").each(function(){var t=azh.$(this);t.parent().children().length===t.parent().children().filter("span.az-inline").length&&o(t.parent())}),i.contents().filter(function(){return 3===this.nodeType}).each(function(){t.trim(this.textContent)&&o(azh.$(this).parent())}),i.find("*:not(iframe)").contents().filter(function(){return 3===this.nodeType}).each(function(){t.trim(this.textContent)&&o(azh.$(this).parent())}),i.find("a:not(.azh-id-attr):not(.azh-hash-attr)").each(function(){var a=azh.$(this),e=t('<div class="azh-button azh-edit-link" data-type="azh-edit-link">'+azh.i18n.edit_link+"</div>").on("click",function(a){var e=t(this).data("azh-linked-element");azh.open_link_select_dialog(a,function(t,a,n){e.attr("href",t),e.attr("target",a||"_self"),$(e,"href",t),$(e,"target",a||"_self"),$(e,"title",n)},e.attr("href"),e.attr("target"),e.attr("title"))}),n=a.data("azh-context");n||(n=[]),n.push(e),a.data("azh-context",n),a.addClass("azh-context")}),i.find("a[href]").on("click",function(t){t.preventDefault()}),i.find('img, [style*="background-image"]').each(function(){var a=azh.$(this);if("IMG"!==a.prop("tagName")){var e=/background-image\:[^;]*url\(['"]?([^'"\)]+)['"]?\)/gi.exec(a.attr("style"));if(e&&e[1].indexOf("http")<0)return}var n=t('<div class="azh-button azh-edit-image" data-type="azh-edit-image">'+azh.i18n.edit_image+"</div>").on("click",function(a){var e=t(this).data("azh-linked-element");azh.open_image_select_dialog(a,function(t,a){"IMG"===e.prop("tagName")?(e.attr("src",t),$(e,"src",t)):(e.css("background-image","url('"+t+"')"),S(e,"background-image","url('"+t+"')"))})}),i=a.data("azh-context");i||(i=[]),i.push(n),a.data("azh-context",i),a.addClass("azh-context")}),i.find("select").each(function(){var a=azh.$(this),e=t('<div class="azh-modal-button" data-type="azh-select" title="'+azh.i18n.select_options_edit+'">'+azh.i18n.select_options_edit+"</div>").on("click",function(a){!function(a){var e=t('<div class="azh-modal"></div>');t('<div class="azh-modal-title">'+azh.i18n.select_options_edit+"</div>").appendTo(e),t('<div class="azh-modal-label">'+azh.i18n.options+"</div>").appendTo(e);var n=t('<div class="azh-table azh-select-options"></div>').appendTo(e);t('<div class="azh-row azh-head"><div class="azh-cell">'+azh.i18n.label+'</div><div class="azh-cell">'+azh.i18n.value+'</div><div class="azh-cell">'+azh.i18n.clone+'</div><div class="azh-cell">'+azh.i18n.remove+"</div></div>").appendTo(n),a.children().each(function(){var a=t(this),e=t('<div class="azh-row"></div>').appendTo(n);e.data("option",a),t('<div class="azh-cell azh-label" contenteditable="true">'+a.text()+"</div>").appendTo(e).on("blur keyup paste input",function(){t(this).closest(".azh-row").data("option").text(t(this).text())}),t('<div class="azh-cell azh-value" contenteditable="true">'+a.val()+"</div>").appendTo(e).on("blur keyup paste input",function(){var a=t(this).closest(".azh-row").data("option");a.val(t(this).text()),$(a,"value",a.val())}),t('<div class="azh-cell azh-clone"></div>').appendTo(e).on("click",function(){var a=t(this).closest(".azh-row"),e=a.clone(!0);e.insertAfter(a);var n=a.data("option").clone(!0);n.insertAfter(a.data("option")),e.data("option",n)}),t('<div class="azh-cell azh-remove"></div>').appendTo(e).on("click",function(){var a=t(this).closest(".azh-row");a.data("option").remove(),a.remove()})});var i=t('<div class="azh-modal-actions"></div>').appendTo(e);t('<div class="azh-modal-ok">'+azh.i18n.ok+"</div>").appendTo(i).on("click",function(){return t.simplemodal.close(),!1}),e.simplemodal({autoResize:!0,overlayClose:!0,opacity:0,overlayCss:{"background-color":"black"},closeClass:"azh-close",onClose:function(){t.simplemodal.close()}})}(t(this).data("azh-linked-element"))}),n=a.data("azh-context");n||(n=[]),n.push(e),a.data("azh-context",n),a.addClass("azh-context")}),i.find(".az-icon").each(function(){var a=azh.$(this),e=t('<div class="azh-button azh-edit-icon" data-type="azh-edit-icon">'+azh.i18n.edit_icon+"</div>").on("click",function(a){var e=t(this).data("azh-linked-element"),n=e.attr("class").split(" ").filter(function(t){return t.indexOf("az-")>=0&&t}).join(" "),i=e.attr("class").split(" ").filter(function(t){return t.indexOf("azh-")>=0&&t}).join(" ");azh.open_icon_select_dialog(a,e.attr("class"),function(t){X(t),e.attr("class",t),e.addClass(n),$(e,"class",e.attr("class")),e.addClass(i)})}),n=a.data("azh-context");n||(n=[]),n.push(e),a.data("azh-context",n),a.addClass("azh-context")}),i.find("[data-element]").each(function(){var a=azh.$(this);if(!a.parents('[data-element*="shortcode"]').length){a.contents().filter(function(){return 3===this.nodeType}).each(function(){t.trim(this.textContent)||azh.$(this).remove()}),!a.contents().length||""!==a.attr("data-element")&&" "!==a.attr("data-element")||a.attr("data-element","not-empty");var n=O(a);if(J(a),a.on("mouseenter",function(t){var a=azh.$(this),e=a.data("azh-controls");setTimeout(function(){0==azh.controls_container.find(".azh-element-controls.azh-active").length&&(e.css("display",""),P(a,e),a.parent().is(".az-free-positioning")?e.find(".azh-move-element").show():e.find(".azh-move-element").hide())})}).on("mousemove",function(){var t=azh.$(this),a=t.data("azh-controls");P(t,a)}).on("mouseleave",function(){var t=azh.$(this).data("azh-controls");setTimeout(function(){t.is(":hover")||0!==azh.controls_container.find(".azh-resizer:hover").length||0!==azh.controls_container.find(".azh-shortcode:hover").length?t.one("mouseleave",function(){t.hide()}):t.hide()})}).on("click",function(a){var n=azh.$(this);if(0===n.contents().length)return azh.child_suggestions=[],t(n.parents("[data-element]")).each(function(){var a=t('.azh-library .azh-elements .azh-element[data-path="'+azh.$(this).attr("data-element")+'"]');a.length&&a.data("child-suggestions")&&t(a.data("child-suggestions")).each(function(){azh.child_suggestions.push(t(this).data("path"))})}),azh.open_elements_dialog(function(a,i,o){var s=q(n.data("azh-controls"));if(s.data("azh-linked-element",n),(s=B(n.data("azh-controls"),!0)).data("azh-linked-element",n),(s=B(n.data("azh-controls"),!1)).data("azh-linked-element",n),(s=D(n.data("azh-controls"))).data("azh-linked-element",n),(s=Q(n.data("azh-controls"))).data("azh-linked-element",n),"shortcode"===a){var r="shortcode: "+e(),h=i;n.attr("data-element",r),$(n,"data-element",r),n.data("azh-controls").find("> .azh-name").text(t.trim(r)),n.addClass("azh-loading"),azh.shortcode_instances[r]=h,t.post(azh.ajaxurl,{action:"azh_update_shortcode",post_id:azh.post_id,instance:r,shortcode:h},function(t){n.html(t),n.find("a[href]").on("click",function(t){t.preventDefault()}),n.removeClass("azh-loading"),E(n),n.trigger("click"),G(n,function(){azh.frontend_init&&azh.frontend_init(n)})})}else n.attr("data-element",a),$(n,"data-element",a),n.data("azh-controls").find("> .azh-name").text(t.trim(a)),_(n,n.data("azh-controls")),n.html(i),n.children().each(function(){v(this)}),k(n),b(n),L(n.closest("[data-section]")),E(n),at(n),azh.frontend_init&&azh.frontend_init(n),azh.window.trigger("resize"),n.trigger("click"),o&&(n.addClass("azh-loading"),X('<div data-element="'+a+'">'+i+"</div>",function(){n.removeClass("azh-loading")}));azh.change()}),!1}),0!==a.contents().length||a.is('[data-element*="shortcode"]')){var i=q(n);i.data("azh-linked-element",a),(i=B(a.data("azh-controls"),!0)).data("azh-linked-element",a),(i=B(a.data("azh-controls"),!1)).data("azh-linked-element",a),(i=D(a.data("azh-controls"))).data("azh-linked-element",a),(i=Q(a.data("azh-controls"))).data("azh-linked-element",a)}}}),i.find("[data-element]").andSelf().filter("[data-element]").each(function(){var a=azh.$(this);if(a.parent(".az-free-positioning").length||"absolute"===a.css("position")){if(a.contents().length>0){var e=M(a,"transform"),n=/rotate\(([-\.\d]+)rad\)/g.exec(e),i=0;n&&(i=parseFloat(n[1])),a.rotatable({start:function(t,a){var e="";a.element.is(".az-center")&&(e="translateX(-50%)"),a.element.is(".az-middle")&&(e="translateY(-50%)"),a.element.is(".az-center.az-middle")&&(e="translate(-50%, -50%)"),e+=" rotate("+a.angle.start+"rad)",a.element.get(0).style.transform=e,S(a.element,"transform",e)},rotate:function(t,a){},stop:function(t,a){if(a.api.hasRotated){var e="";a.element.is(".az-center")&&(e="translateX(-50%)"),a.element.is(".az-middle")&&(e="translateY(-50%)"),a.element.is(".az-center.az-middle")&&(e="translate(-50%, -50%)"),e+=" rotate("+a.angle.stop+"rad)",S(a.element,"transform",e)}else a.api.angle(0),S(a.element,"transform","")},radians:i})}var o=a.data("azh-context");o||(o=[]),a.is(".az-left, .az-center, .az-right")||(T(a,"az-left"),a.addClass("az-left")),a.is(".az-top, .az-middle, .az-bottom")||(T(a,"az-top"),a.addClass("az-top"));var s=t('<div class="azh-control" data-type="azh-alignment"></div>').on("azh-init",function(){var a=t(this),e=a.data("azh-linked-element");e.is(".az-top")&&a.find(".azh-top-alignment").addClass("azh-active"),e.is(".az-middle")&&a.find(".azh-middle-alignment").addClass("azh-active"),e.is(".az-bottom")&&a.find(".azh-bottom-alignment").addClass("azh-active"),e.is(".az-left")&&a.find(".azh-left-alignment").addClass("azh-active"),e.is(".az-center")&&a.find(".azh-center-alignment").addClass("azh-active"),e.is(".az-right")&&a.find(".azh-right-alignment").addClass("azh-active")}),r=t('<div class="azh-v-alignment"></div>').appendTo(s),h=t('<div class="azh-h-alignment"></div>').appendTo(s);t('<div class="azh-top-alignment"></div>').appendTo(r).on("click",function(a){var e=t(this).closest(".azh-control").data("azh-linked-element");U(e),ht(e)}),t('<div class="azh-middle-alignment"></div>').appendTo(r).on("click",function(a){var e=t(this).closest(".azh-control").data("azh-linked-element");U(e),lt(e)}),t('<div class="azh-bottom-alignment"></div>').appendTo(r).on("click",function(a){var e=t(this).closest(".azh-control").data("azh-linked-element");U(e),ct(e)}),t('<div class="azh-left-alignment"></div>').appendTo(h).on("click",function(a){var e=t(this).closest(".azh-control").data("azh-linked-element");U(e),dt(e)}),t('<div class="azh-center-alignment"></div>').appendTo(h).on("click",function(a){var e=t(this).closest(".azh-control").data("azh-linked-element");U(e),zt(e)}),t('<div class="azh-right-alignment"></div>').appendTo(h).on("click",function(a){var e=t(this).closest(".azh-control").data("azh-linked-element");U(e),pt(e)}),o.push(s),a.data("azh-context",o),a.addClass("azh-context")}}),i.find('[data-shortcode], [data-element*="shortcode"]').andSelf().filter('[data-shortcode], [data-element*="shortcode"]').each(function(){var a=azh.$(this);a.find(".azh-context").removeClass("azh-context"),a.find("[draggable]").attr("draggable","false"),a.find("[contenteditable]").attr("contenteditable","false"),a.attr("contenteditable","false");var e=a.data("azh-controls");e&&t('<div class="azh-edit-shortcode" title="'+azh.i18n.click_to_edit_shortcode+'"></div>').prependTo(e).on("click",function(){var a=t(this).data("azh-linked-element");return e=a.data("azh-controls"),G(a),!1}).data("azh-linked-element",a);a.on("mouseenter.azh-shortcode",function(a){var e=azh.$(this),n=t('<div class="azh-shortcode"></div>').appendTo(azh.controls_container).on("mouseleave",function(a){t(this).remove(),e.trigger("mouseleave")}).css({top:e.offset().top,left:e.offset().left,width:e.outerWidth(),height:e.outerHeight()});e.is("[data-shortcode]")&&n.on("click",function(){return G(e),!1}).css("pointer-events","all")}).on("mouseleave.azh-shortcode",function(t){azh.controls_container.find(".azh-shortcode:not(:hover)").remove()})});t(["data-azh-form"]).each(function(){var e=this;i.find("["+e+"]").andSelf().filter("["+e+"]").each(function(n){var i=azh.$(this).closest("[data-element], [data-section]"),o=i.data("azh-controls");if(o){var s=t('<div class="azh-edit-shortcode" title="'+azh.i18n.click_to_edit_shortcode+'"></div>').prependTo(o).on("click",function(){var e=t(this),n=e.data("azh-attribute"),i=e.data("azh-index"),o=e.data("azh-linked-element"),s=azh.$(o.find("["+n+"]").get(i)),r=F(s.attr(n).replace(/\\"/g,'"').replace(/\\'/g,"'"));if(r){var h=r[2],l=a.attrs(r[3]).named,c=r[5];if(l.content=c,azh.shortcodes[h]){var d=azh.shortcodes[h],z=azh.open_element_settings_dialog(d,l,function(t,a){t=W(d,t,a).replace(/"/g,'\\"').replace(/'/g,"\\'");s.attr(n,t),$(s,n,t)});if("data-azh-form"===n){var p={};o.find("[name]").each(function(){p[azh.$(this).attr("name")]=!0}),z.find("em").each(function(){var a=t(this);if(a.text().indexOf("{form-fields}")>=0){a.text(a.text().replace("{form-fields}",""));var e=a.closest("[data-param-name]").find("textarea, input");for(var n in p)!function(n){t('<a href="#">{'+n+"}</a>").appendTo(a).on("click",function(){H(e.get(0),"{"+n+"}")}).after("<span>&nbsp;</span>")}(n)}})}}}return!1});s.data("azh-linked-element",i),s.data("azh-attribute",e),s.data("azh-index",n)}})}),azh.table_editor&&i.find("table").each(function(){azh.$(this).find("thead th, tbody td").each(function(){!function a(e){var n=e.data("azh-context");if(n||(n=[]),e.is("td")){var i=t('<div class="azh-button" data-type="azh-delete-row">'+azh.i18n.delete_row+"</div>").on("click",function(a){t(this).data("azh-linked-element").closest("tr").remove()});n.push(i)}if(e.is("th")){var o=t('<div class="azh-button" data-type="azh-delete-column">'+azh.i18n.delete_column+"</div>").on("click",function(a){var e=t(this).data("azh-linked-element"),n=e.get(0).cellIndex;e.closest("table").find("tr").each(function(){this.removeChild(this.cells[n])})});n.push(o)}if(e.is("td")){var s=t('<div class="azh-button" data-type="azh-insert-row-before">'+azh.i18n.insert_row_before+"</div>").on("click",function(e){for(var n=t(this).data("azh-linked-element"),i=azh.$("<tr></tr>"),o=0;o<n.closest("tr").children().length;o++)i.append('<td data-cloneable=""><div data-element=""></div></td>');v(i.get(0)),E(i),i.children().each(function(){a(azh.$(this))}),n.closest("tr").before(i)});n.push(s);var r=t('<div class="azh-button" data-type="azh-insert-row-after">'+azh.i18n.insert_row_after+"</div>").on("click",function(e){for(var n=t(this).data("azh-linked-element"),i=azh.$("<tr></tr>"),o=0;o<n.closest("tr").children().length;o++)i.append('<td data-cloneable=""><div data-element=""></div></td>');v(i.get(0)),E(i),i.children().each(function(){a(azh.$(this))}),n.closest("tr").after(i)});n.push(r)}if(e.is("th")){var h=t('<div class="azh-button" data-type="azh-insert-column-before">'+azh.i18n.insert_column_before+"</div>").on("click",function(e){var n=t(this).data("azh-linked-element"),i=n.get(0).cellIndex;n.closest("table").find("tr").each(function(){if(azh.$(this).parent("thead").length){var t=azh.$('<th data-cloneable=""><div data-element=""></div></th>');v(t.get(0)),E(t),a(t),azh.$(this).find("th").eq(i).before(t)}else{var e=azh.$('<td data-cloneable=""><div data-element=""></div></td>');v(e.get(0)),E(e),a(e),azh.$(this).find("td").eq(i).before(e)}})});n.push(h);var l=t('<div class="azh-button" data-type="azh-insert-column-after">'+azh.i18n.insert_column_after+"</div>").on("click",function(e){var n=t(this).data("azh-linked-element"),i=n.get(0).cellIndex;n.closest("table").find("tr").each(function(){if(azh.$(this).parent("thead").length){var t=azh.$('<th data-cloneable=""><div data-element=""></div></th>');v(t.get(0)),E(t),a(t),azh.$(this).find("th").eq(i).after(t)}else{var e=azh.$('<td data-cloneable=""><div data-element=""></div></td>');v(e.get(0)),E(e),a(e),azh.$(this).find("td").eq(i).after(e)}})});n.push(l)}e.data("azh-context",n),e.addClass("azh-context")}(azh.$(this))})}),i.find("[data-cloneable], [data-cloneable-inline]").andSelf().filter("[data-cloneable], [data-cloneable-inline]").each(function(){var a=azh.$(this),n=t('<div class="azh-cloneable-controls"></div>').appendTo(azh.controls_container);n.hide(),a.data("azh-cloneable-controls",n),n.data("azh-linked-element",a),a.addClass("azh-cloneable-controls"),a.data("azh-cloneable",{}),a.is("[data-cloneable]")&&a.data("cloneable")&&a.data("azh-cloneable",JSON.parse(a.data("cloneable").replace(/'/g,'"'))),a.is("[data-cloneable-inline]")&&a.data("cloneable-inline")&&a.data("azh-cloneable",JSON.parse(a.data("cloneable-inline").replace(/'/g,'"'))),a.on("mouseenter",function(t){var a=azh.$(this).data("azh-cloneable-controls");a.css("left",azh.$(this).offset().left+azh.$(this).outerWidth()/2-10+"px"),a.css("top",azh.$(this).offset().top+azh.$(this).outerHeight()-10+"px"),a.show()}).on("mousemove",function(){var t=azh.$(this),a=t.data("azh-cloneable-controls");a.css("left",t.offset().left+t.outerWidth()/2-10+"px"),a.css("top",t.offset().top+t.outerHeight()-10+"px")}).on("mouseleave",function(){var t=azh.$(this).data("azh-cloneable-controls");setTimeout(function(){t.is(":hover")?t.one("mouseleave",function(){t.hide()}):t.hide()})}),a.children().attr("draggable","true"),azh.body_off("mouseup.cloneable").body_on("mouseup.cloneable",function(t){azh.content_wrapper.find("[data-cloneable], [data-cloneable-inline]").each(function(){azh.$(this).data("azh-drag",!1),azh.$(this).find(".azh-over").removeClass("azh-over")})});var i=!0;(a.children().each(function(){var n=azh.$(this);n.on("dragstart",function(t){var a=azh.$(this);if("true"===a.attr("draggable")){var e=a.parent();e.data("azh-drag",this),e.addClass("azh-drag"),t.stopPropagation()}}),n.on("dragenter",function(t){var a=azh.$(this);if(a.parent().data("azh-drag"))a.addClass("azh-over");else if(a.is("[data-element]")&&a.parent().is("[data-cloneable], [data-cloneable-inline]")){var e=azh.$("[data-cloneable].azh-drag, [data-cloneable-inline].azh-drag");e.length&&azh.$(e.data("azh-drag")).is("[data-element]")&&!a.parent().has(e.data("azh-drag")).length&&a.addClass("azh-over")}t.stopPropagation()}),n.on("dragover",function(t){t.preventDefault&&t.preventDefault();var a=azh.$(this);if(azh.$(this).parent().data("azh-drag"))azh.$(this).addClass("azh-over");else if(a.is("[data-element]")&&a.parent().is("[data-cloneable], [data-cloneable-inline]")){var e=azh.$("[data-cloneable].azh-drag, [data-cloneable-inline].azh-drag");e.length&&azh.$(e.data("azh-drag")).is("[data-element]")&&!a.parent().has(e.data("azh-drag")).length&&a.addClass("azh-over")}t.stopPropagation()}),n.on("dragleave",function(t){azh.$(this).removeClass("azh-over")}),n.on("drop",function(t){t.stopPropagation&&t.stopPropagation();var a=azh.$(this),e=a.parent(),n=e.data("azh-drag"),i=azh.$(n);if(n){if(e.has(this).length&&n!=this){var o=e.children().index(n),s=e.children().index(this);o>=0&&s>=0&&(i.detach(),o>s?i.insertBefore(this):i.insertAfter(this),ot(e)?y(i.closest("[data-section]")):e.trigger("azh-refresh"),ft())}}else if(a.is("[data-element]")&&a.parent().is("[data-cloneable], [data-cloneable-inline]")){var r=azh.$("[data-cloneable].azh-drag, [data-cloneable-inline].azh-drag");if(r.length&&azh.$(r.data("azh-drag")).is("[data-element]")&&!a.parent().has(r.data("azh-drag")).length)if((i=azh.$(r.data("azh-drag"))).contents().length){if(1===r.children().length){var h=i.clone(!0);h.insertAfter(i),m(h),O(h)}i.detach(),a.children().length?i.insertAfter(this):a.replaceWith(i),ot(r)?y(i.closest("[data-section]")):(e.trigger("azh-refresh"),r.trigger("azh-refresh")),ft()}}return azh.change(),!1}),n.on("dragend",function(t){azh.$("[data-cloneable], [data-cloneable-inline]").children().each(function(){azh.$(this).removeClass("azh-over")}),azh.$("[data-cloneable].azh-drag, [data-cloneable-inline].azh-drag").each(function(){azh.$(this).removeClass("azh-drag"),azh.$(this).data("azh-drag",!1)})});var o=n.data("azh-context");o||(o=[]);var s=t('<div class="azh-cloneable-child-controls"></div>');n.data("azh-cloneable-child-controls",s),n.addClass("azh-cloneable-child-controls");var r=t('<div class="azh-button azh-clone" data-type="azh-clone">'+azh.i18n.clone+"</div>").appendTo(s).on("click",function(a){var n,i=t(this).data("azh-linked-element"),o=i.parents("[data-cloneable], [data-cloneable-inline]").first(),s=i.closest("[data-section]"),r=i.clone(!0);r.find("[data-shortcode]").removeAttr("data-shortcode"),r.insertAfter(i),n=r,t(".wp-picker-open").trigger("click"),n.find(".azh-linked-controls").andSelf().filter(".azh-linked-controls").each(function(){azh.$(this).data("azh-linked-controls",!1)}),n.find(".azh-controls").andSelf().filter(".azh-controls").each(function(){var t=azh.$(this),a=t.data("azh-controls"),e=a.clone(!0);e.removeClass("azh-hidden-control"),e.insertAfter(a),t.data("azh-controls",e),e.data("azh-linked-element",t).find("*").data("azh-linked-element",t),e.find(".azh-utility-wrapper").remove()}),n.find(".azh-cloneable-controls").andSelf().filter(".azh-cloneable-controls").each(function(){var t=azh.$(this),a=t.data("azh-cloneable-controls"),e=a.clone(!0);e.removeClass("azh-hidden-control"),e.insertAfter(a),t.data("azh-cloneable-controls",e),e.data("azh-linked-element",t).find("*").data("azh-linked-element",t)}),n.find(".azh-cloneable-child-controls").andSelf().filter(".azh-cloneable-child-controls").each(function(){var t=azh.$(this),a=t.data("azh-cloneable-child-controls"),e=a.clone(!0);e.removeClass("azh-hidden-control"),e.insertAfter(a),t.data("azh-cloneable-child-controls",e),e.data("azh-linked-element",t).find("*").data("azh-linked-element",t)}),n.find(".azh-item-controls").andSelf().filter(".azh-item-controls").each(function(){var t=azh.$(this),a=t.data("azh-item-controls"),e=a.clone(!0);e.removeClass("azh-hidden-control"),e.insertAfter(a),t.data("azh-item-controls",e),e.data("azh-linked-element",t),e.data("azh-linked-element",t).find("*").data("azh-linked-element",t)}),n.find(".azh-grid").andSelf().filter(".azh-grid").each(function(){azh.$(this).children().each(function(){var t=azh.$(this),a=t.data("azh-resizer");if(a){var e=a.clone(!0);e.removeClass("azh-hidden-control"),e.insertAfter(a),t.data("azh-resizer",e),a.data("azh-column",t.prev()),a.data("azh-next-column",t)}var n=t.data("azh-controls");n&&(n.removeClass("azh-hidden-control"),n.children().data("azh-column",t),n.children().data("azh-prev-column",t.prev()),n.children().data("azh-next-column",t.next()))})}),k(r);var h=!1,l=i.find(".azh-id-attr, .azh-hash-attr").andSelf().filter(".azh-id-attr, .azh-hash-attr"),c=e(),d=r.find(".azh-id-attr, .azh-hash-attr").andSelf().filter(".azh-id-attr, .azh-hash-attr");if(d.length&&(d.each(function(){var t=azh.$(this);t.data("azh-id-attr")&&(h=t.attr(t.data("azh-id-attr")),t.attr(t.data("azh-id-attr"),c),$(t,t.data("azh-id-attr"),c)),t.data("azh-hash-attr")&&(h=t.attr(t.data("azh-hash-attr")).replace("#",""),t.attr(t.data("azh-hash-attr"),"#"+c),$(t,t.data("azh-hash-attr"),"#"+c))}),1==d.length)){var z=!1,p=i.closest("[data-section]").data("azh-linked-ids");h&&h in p&&p[h]&&(t(p[h]).each(function(){var t=azh.$(this);if(!t.is(l)){var a=t.parentsUntil("[data-cloneable], [data-cloneable-inline]").last();0===a.length&&(a=t),(z=a.clone(!0)).find("[data-shortcode]").removeAttr("data-shortcode"),z.insertAfter(a);var e=z.find(".azh-id-attr, .azh-hash-attr").andSelf().filter(".azh-id-attr, .azh-hash-attr");return e.data("azh-id-attr")&&(e.attr(e.data("azh-id-attr"),c),$(e,e.data("azh-id-attr"),c)),e.data("azh-hash-attr")&&(e.attr(e.data("azh-hash-attr"),"#"+c),$(e,e.data("azh-hash-attr"),"#"+c)),!1}}),z&&(p[c]=[r.find(".azh-id-attr, .azh-hash-attr").andSelf().filter(".azh-id-attr, .azh-hash-attr"),z.find(".azh-id-attr, .azh-hash-attr").andSelf().filter(".azh-id-attr, .azh-hash-attr")],p[h]=!1))}ot(o)?y(s):(at(r),r.find("[data-element]").each(function(){at(azh.$(this))}),at(r.closest("[data-section], [data-element]")),L(r.closest("[data-section]")),ft()),r.trigger("azh-refresh"),azh.change()});if(r.data("azh-linked-element",n),o.push(r),(r=t('<div class="azh-button azh-remove" data-type="azh-remove">'+azh.i18n.remove+"</div>").appendTo(s).on("click",function(a){var e=t(this).data("azh-linked-element"),n=e.parents("[data-cloneable], [data-cloneable-inline]").first();if(n.is(".az-elements-list")&&e.is("[data-element]")){var i=e.data("azh-controls");if(i.find(".azh-remove-element").length)i.find(".azh-remove-element").click();else{var o=e.closest(".az-element-wrapper");n.find(".az-element-wrapper").length>1&&0===e.contents().length&&(j(o),o.remove())}}else{var s=e.closest("[data-section]"),r=function(a){var e=!1,n=a.closest("[data-section]").data("azh-linked-ids");return a.find(".azh-id-attr, .azh-hash-attr").andSelf().filter(".azh-id-attr, .azh-hash-attr").each(function(){var a=azh.$(this),i=!1;if(a.data("azh-id-attr")&&(i=a.attr(a.data("azh-id-attr"))),a.data("azh-hash-attr")&&(i=a.attr(a.data("azh-hash-attr")).replace("#","")),i&&i in n&&(t(n[i]).each(function(){if(!azh.$(this).is(a))return 0===(e=azh.$(this).parentsUntil("[data-cloneable], [data-cloneable-inline]").last()).length&&(e=azh.$(this)),!1}),e))return!1}),e}(e);r&&(j(r),r.remove()),j(e),e.remove(),ot(n)?y(s):(at(n.closest("[data-section], [data-element]")),L(n.closest("[data-section]")),ft()),n.trigger("azh-refresh")}azh.change()})).data("azh-linked-element",n),o.push(r),n.data("azh-context",o),n.addClass("azh-context"),!n.is("[data-element]")){var h=n.find("[data-element]");1!==h.length&&(i=!1);var l=h.closest("[data-cloneable], [data-cloneable-inline]");a.is(l)||(i=!1)}}),a.data("azh-cloneable")&&!1===a.data("azh-cloneable")["elements-list"]&&(i=!1),i||a.is(".az-elements-list"))&&(a.addClass("az-elements-list"),T(a,"az-elements-list"),a.children().each(function(){azh.$(this).addClass("az-element-wrapper")}),t('<div class="azh-add-element azh-button" title="'+azh.i18n.add_element+'"></div>').appendTo(n).on("click",function(){var a=t(this).data("azh-linked-element").children().last(),e=!1;a.is("[data-element]")?0===a.contents().length?e=a:(e=a.clone(!0)).insertAfter(a):0===a.find("[data-element]").children().length?e=a:(e=a.clone(!0)).insertAfter(a);var n=e.is("[data-element]")?e:e.find("[data-element]");return m(n),O(n),n.trigger("click"),azh.change(),!1}).data("azh-linked-element",a))}),i.find('[class*="-col-xs-"],[class*="-col-sm-"],[class*="-col-md-"],[class*="-col-lg-"]').each(function(){azh.$(this).parent().addClass("azh-grid")}),i.find(".azh-grid").each(function(){!function(a){function e(a,e){var n;return e.lastIndex=0,!(null==(n=e.exec(a.attr("class")))||2!=n.length||!t.isNumeric(n[1]))&&parseInt(n[1],10)}function n(a,e,n){var i=null;if(e.lastIndex=0,null!=(i=e.exec(a.attr("class")))&&2==i.length&&t.isNumeric(i[1])){var o=i[1],s=i[0].replace(o,n);s=a.attr("class").replace(i[0],s),a.attr("class",s),$(a,"class",s)}}function i(a){if(azh.device_prefix){(i=azh.column_width_patterns[azh.device_prefix]).lastIndex=0;for(var e=null;null!=(e=i.exec(a.attr("class")))&&2==e.length&&t.isNumeric(e[1]);)return e}else for(var n in azh.column_width_patterns){var i;for((i=azh.column_width_patterns[n]).lastIndex=0,e=null;null!=(e=i.exec(a.attr("class")))&&2==e.length&&t.isNumeric(e[1]);)return e}return!1}var o=!1;a.children().each(function(){var a=azh.$(this),i=a.data("azh-controls");if(!i&&a.is("[data-cloneable]")&&(i=t('<div class="azh-column-controls" title="'+azh.i18n.column_settings+'"></div>').appendTo(azh.controls_container).hide().on("mouseenter",function(a){t(this).data("azh-linked-element").addClass("azh-over")}).on("mouseleave",function(a){t(this).data("azh-linked-element").removeClass("azh-over")}),t('<div class="azh-responsive" title="'+azh.i18n.column_responsive+'"></div>').appendTo(i).on("click",function(){var a=t(this).data("azh-column"),i=t('<div class="azh-modal"></div>');t('<div class="azh-modal-title">'+azh.i18n.column_responsive+"</div>").appendTo(i);var o=t("<table><thead><tr><th>"+azh.i18n.device+"</th><th>"+azh.i18n.column_width+"</th><th>"+azh.i18n.column_offset+"</th></tr></thead><tbody></tbody></table>").appendTo(i);for(var s in azh.device_prefixes)!function(i){var s=t("<tr></tr>").appendTo(o.find("tbody"));t("<td>"+azh.device_prefixes[i].label+"</td>").appendTo(s);var r=t("<td></td>").appendTo(s);t('<input type="number" step="1" min="1" max="12" value="'+e(a,azh.column_width_patterns[i])+'">').appendTo(r).on("change",function(){n(a,azh.column_width_patterns[i],t(this).val())}),r=t("<td></td>").appendTo(s),t('<input type="number" step="1" min="1" max="12" value="'+e(a,azh.column_offset_patterns[i])+'">').appendTo(r).on("change",function(){n(a,azh.column_offset_patterns[i],t(this).val())})}(s);var r=t('<div class="azh-modal-actions"></div>').appendTo(i);return t('<div class="azh-modal-ok">'+azh.i18n.ok+"</div>").appendTo(r).on("click",function(){return t.simplemodal.close(),!1}),i.simplemodal({autoResize:!0,overlayClose:!0,opacity:0,overlayCss:{"background-color":"black"},closeClass:"azh-close",onClose:function(){t.simplemodal.close()}}),!1}).data("azh-column",a),t('<div class="azh-add-column" title="'+azh.i18n.insert_column_after+'"></div>').appendTo(i).on("click",function(){var a=t(this).data("azh-column"),i=a.clone(!0),o=!0,s=azh.section_controlled_device_prefixes;return a.closest("[data-element]").length&&(s=azh.element_controlled_device_prefixes),t(s).each(function(){var t=e(a,azh.column_width_patterns[this]),s=Math.round(t/2),r=t-s;s&&r?(n(a,azh.column_width_patterns[this],s),n(i,azh.column_width_patterns[this],r)):o=!1}),o&&(i.find("> [data-element]").each(function(){m(azh.$(this)),j(azh.$(this))}),i.find("> [data-element]:not(:first-child)").remove(),i.insertAfter(a),y(i.closest("[data-section]"))),!1}).data("azh-column",a),t('<div class="azh-remove-column" title="'+azh.i18n.delete_column+'"></div>').appendTo(i).on("click",function(){var a=t(this),i=a.data("azh-column"),o=a.data("azh-prev-column");if(o||(o=a.data("azh-next-column")),o){var s=azh.section_controlled_device_prefixes;i.closest("[data-element]").length&&(s=azh.element_controlled_device_prefixes),t(s).each(function(){var t=e(o,azh.column_width_patterns[this]),a=e(i,azh.column_width_patterns[this]);n(o,azh.column_width_patterns[this],t+a)}),a.data("azh-prev-column")?(i.data("azh-resizer").remove(),a.data("azh-next-column")?(a.data("azh-next-column").data("azh-resizer").data("azh-column",a.data("azh-prev-column")),a.data("azh-next-column").data("azh-controls").find(".azh-remove-column").data("azh-prev-column",a.data("azh-prev-column")),a.data("azh-prev-column").data("azh-controls").find(".azh-remove-column").data("azh-next-column",a.data("azh-next-column"))):a.data("azh-prev-column").data("azh-controls").find(".azh-remove-column").data("azh-next-column",!1)):a.data("azh-next-column")&&(a.data("azh-next-column").data("azh-resizer")&&(a.data("azh-next-column").data("azh-resizer").remove(),a.data("azh-next-column").data("azh-resizer",!1)),a.data("azh-next-column").data("azh-controls").find(".azh-remove-column").data("azh-prev-column",!1)),i.data("azh-controls").remove(),j(i),i.remove(),ft()}return!1}).data("azh-column",a).data("azh-prev-column",o),a.data("azh-controls",i),i.data("azh-linked-element",a),a.addClass("azh-controls"),a.on("mouseenter",function(t){var a=azh.$(this),e=a.data("azh-controls");setTimeout(function(){e.css("left",a.offset().left+a.outerWidth()/2-e.outerWidth()/2+"px"),e.css("top",a.offset().top-10+"px"),e.css("display","")})}).on("mousemove",function(){var t=azh.$(this),a=t.data("azh-controls");a.css("left",t.offset().left+t.outerWidth()/2-a.outerWidth()/2+"px"),a.css("top",t.offset().top-10+"px")}).on("mouseleave",function(){var t=azh.$(this).data("azh-controls");setTimeout(function(){t.is(":hover")?t.one("mouseleave",function(){t.hide()}):t.hide()})})),o){o.data("azh-controls")&&o.data("azh-controls").find(".azh-remove-column").data("azh-next-column",a);var s=t('<div class="azh-width-resizer"></div>').appendTo(azh.controls_container).hide();a.data("azh-resizer",s),s.data("azh-column",o),s.data("azh-next-column",a),s.css("left",a.offset().left-20+"px"),s.css("top",a.offset().top+"px"),s.on("mousedown",function(a){var e=t(this);return e.addClass("azh-drag"),azh.controls_container.addClass("azh-drag"),e.data("pageX",a.pageX),e.data("azh-column").closest(".azh-grid").addClass("azh-drag"),a.preventDefault(),a.stopPropagation(),!1})}o=a}),a.on("mouseenter",function(){a.children().each(function(){var t=azh.$(this),a=t.data("azh-resizer");if(a){var e=i(t);e&&parseInt(e[1],10)<12&&a.show()}})}).on("mousemove",function(t){a.children().each(function(){var t=azh.$(this),a=t.data("azh-resizer");a&&(a.css("left",t.offset().left-20+"px"),a.css("top",t.offset().top+"px"))})}).on("mouseleave",function(){a.children().each(function(){var t=azh.$(this).data("azh-resizer");t&&!t.is(":hover")&&t.hide()})}),a.on("click",function(t){if(azh.$(this).is(".azh-drag"))return t.preventDefault(),t.stopPropagation(),!1}),azh.body_off("mouseup.grid").body_on("mouseup.grid",function(t){azh.$(".azh-grid.azh-drag").removeClass("azh-drag"),azh.controls_container.find(".azh-width-resizer.azh-drag").removeClass("azh-drag"),azh.controls_container.removeClass("azh-drag")}),azh.body_off("mousemove.grid").body_on("mousemove.grid",function(t){0===t.buttons&&azh.$(".azh-grid.azh-drag").removeClass("azh-drag");var a=l.find(".azh-width-resizer.azh-drag");if(azh.$(".azh-grid.azh-drag").length&&a.length){var e=a.data("azh-column"),n=i(e),o=a.data("azh-next-column"),s=i(o);if(t.pageX+(azh.device_left?azh.device_left:0)<a.offset().left&&t.pageX<a.data("pageX")){if(n[1]>1){e.removeClass(n[0]),A(e,n[0]);var r=n[0].replace(parseInt(n[0].replace(/[^\d]/g,""),10),parseInt(n[0].replace(/[^\d]/g,""),10)-1);e.addClass(r),T(e,r),o.removeClass(s[0]),A(o,s[0]);var h=s[0].replace(parseInt(s[0].replace(/[^\d]/g,""),10),parseInt(s[0].replace(/[^\d]/g,""),10)+1);o.addClass(h),T(o,h),a.css("left",o.offset().left-parseInt(o.css("padding-left"),10)-5+"px")}}else t.pageX+(azh.device_left?azh.device_left:0)>a.offset().left+a.width()&&t.pageX>a.data("pageX")&&s[1]>1&&(e.removeClass(n[0]),A(e,n[0]),h=n[0].replace(parseInt(n[0].replace(/[^\d]/g,""),10),parseInt(n[0].replace(/[^\d]/g,""),10)+1),e.addClass(h),T(e,h),o.removeClass(s[0]),A(o,s[0]),r=s[0].replace(parseInt(s[0].replace(/[^\d]/g,""),10),parseInt(s[0].replace(/[^\d]/g,""),10)-1),o.addClass(r),T(o,r),a.css("left",o.offset().left-parseInt(o.css("padding-left"),10)-5+"px"))}a.data("pageX",t.pageX)})}(azh.$(this))}),i.find("[data-isotope-items], .az-isotope-items").each(function(){azh.$(this).children().each(function(){var a=azh.$(this),e=t('<div class="azh-item-controls"></div>').appendTo(azh.controls_container);e.hide(),a.data("azh-item-controls",e),e.data("azh-linked-element",a),a.addClass("azh-item-controls"),a.on("mouseenter",function(t){var a=azh.$(this).data("azh-item-controls");a.css("left",azh.$(this).offset().left+"px"),a.css("top",azh.$(this).offset().top+"px"),a.show()}).on("mousemove",function(){var t=azh.$(this),a=t.data("azh-item-controls");a.css("left",t.offset().left+"px"),a.css("top",t.offset().top+"px")}).on("mouseleave",function(){var t=azh.$(this).data("azh-item-controls");setTimeout(function(){t.is(":hover")?t.on("mouseleave",function(){t.hide()}):t.hide()})}),t('<div class="azh-edit-tags" title="'+azh.i18n.edit_tags+'"></div>').appendTo(e).on("click",function(){var a=t(this).closest(".azh-item-controls");a.hide();var e=a.data("azh-linked-element"),n=function(t){var a=t.parents(),e=!1,n=!1;return t.closest("[data-section]").find("[data-isotope-filters], .az-isotope-filters").each(function(){var t=a.has(azh.$(this)).first(),i=a.index(t);n?e>i&&(e=i,n=azh.$(this)):(e=i,n=azh.$(this))}),n}(e.closest("[data-isotope-items], .az-isotope-items")),i={};n.find("*").contents().filter(function(){return 3===this.nodeType&&t.trim(this.textContent)}).each(function(){i[t.trim(this.textContent)]=t.trim(azh.$(this).closest("[data-filter]").attr("data-filter"))});var o=[];for(var s in i){var r=i[s];"*"!=r&&e.is(r)&&o.push(s)}return R({title:"Edit item tags",desc:"Change the tags of this item (separated by comma)",label:"Tags"},o.join(", "),function(a){a=a.split(",");var s=[],r=[];t(a).each(function(){var a=t.trim(this);if(a){var e=!1;for(var n in i)if(n===a){s.push(a),e=!0;break}e||r.push(a)}}),t(o).each(function(){e.removeClass(i[this].replace(".","")),A(e,i[this].replace(".",""))}),t(s).each(function(){e.addClass(i[this].replace(".","")),T(e,i[this].replace(".",""))}),t(r).each(function(){var a=this.replace(/\s/,"-").toLowerCase();e.addClass(a),T(e,a);var i=n.find('[data-filter="*"]').clone(!0);i.appendTo(n),i.removeClass("az-active"),A(i,"az-active"),i.attr("data-filter","."+a),$(i,"data-filter","."+a),i.find("*").andSelf().contents().filter(function(){return 3===this.nodeType&&t.trim(this.textContent)}).get(0).textContent=this})}),!1})})}),i.find('.az-resize[style*="height"], .az-resize[style*="padding-top"], .az-resize[style*="padding-bottom"]').each(function(){azh.$(this).on("mouseenter",function(a){var e=azh.$(this);if(V(e,"padding-top")&&!e.data("azh-padding-top-resizer")){var n=t('<div class="azh-resizer azh-row-resize">'+M(e,"padding-top")+"</div>").appendTo(azh.controls_container).on("mousedown",function(a){var n=t(this);return n.data("azh-drag",!0),n.data("azh-drag-y",a.pageY),n.css({top:e.offset().top,height:parseInt(M(e,"padding-top"),10)}),azh.document_off("mouseup.resizer").document_on("mouseup.resizer",function(t){n.data("azh-drag",!1),n.is(":hover")||azh.document_off("mouseup.resizer")}),azh.document_off("mousemove.resizer").document_on("mousemove.resizer",function(t){if(n.data("azh-drag")){var a=t.pageY-n.data("azh-drag-y"),i=parseInt(M(e,"padding-top"),10)+a;isNaN(i)||(i<0&&(i=0),S(e,"padding-top",i+="px"),e.css("padding-top",i),n.text(i),n.data("azh-drag-y",t.pageY),n.height(i))}}),a.stopPropagation(),a.preventDefault(),!1}).on("mouseleave",function(a){var n=t(this);n.data("azh-drag")||(e.data("azh-padding-top-resizer",!1),n.remove(),e.trigger("mouseleave"))}).css({top:e.offset().top,left:e.offset().left,width:e.innerWidth(),height:parseInt(M(e,"padding-top"),10)>10?parseInt(M(e,"padding-top"),10):10});e.data("azh-padding-top-resizer",n)}if(V(e,"padding-bottom")&&!e.data("azh-padding-bottom-resizer")){n=t('<div class="azh-resizer azh-row-resize">'+M(e,"padding-bottom")+"</div>").appendTo(azh.controls_container).on("mousedown",function(a){var n=t(this);return n.data("azh-drag",!0),n.data("azh-drag-y",a.pageY),n.css({top:e.offset().top+e.innerHeight()-parseInt(M(e,"padding-bottom"),10),height:parseInt(M(e,"padding-bottom"),10)}),azh.document_off("mouseup.resizer").document_on("mouseup.resizer",function(t){n.data("azh-drag",!1),n.is(":hover")||azh.document_off("mouseup.resizer")}),azh.document_off("mousemove.resizer").document_on("mousemove.resizer",function(t){if(n.data("azh-drag")){var a=t.pageY-n.data("azh-drag-y"),i=parseInt(M(e,"padding-bottom"),10)+a;isNaN(i)||(i<0&&(i=0),S(e,"padding-bottom",i+="px"),e.css("padding-bottom",i),n.text(i),n.data("azh-drag-y",t.pageY),n.height(i))}}),a.stopPropagation(),a.preventDefault(),!1}).on("mouseleave",function(a){var n=t(this);n.data("azh-drag")||(e.data("azh-padding-bottom-resizer",!1),n.remove(),e.trigger("mouseleave"))}).css({top:e.offset().top+e.innerHeight()-(parseInt(M(e,"padding-bottom"),10)>0?parseInt(M(e,"padding-bottom"),10):10),left:e.offset().left,width:e.innerWidth(),height:parseInt(M(e,"padding-bottom"),10)>10?parseInt(M(e,"padding-bottom"),10):10});e.data("azh-padding-bottom-resizer",n)}if(V(e,"height")&&!e.data("azh-height-resizer")){n=t('<div class="azh-resizer azh-row-resize">'+M(e,"height")+"</div>").appendTo(azh.controls_container).on("mousedown",function(a){var n=t(this);return n.data("azh-drag",!0),n.data("azh-drag-y",a.pageY),n.css({height:parseInt(M(e,"height"),10)}),azh.document_off("mouseup.resizer").document_on("mouseup.resizer",function(t){n.data("azh-drag",!1),n.is(":hover")||azh.document_off("mouseup.resizer")}),azh.document_off("mousemove.resizer").document_on("mousemove.resizer",function(t){if(n.data("azh-drag")){var a=t.pageY-n.data("azh-drag-y"),i=parseInt(M(e,"height"),10)+a;isNaN(i)||(i<0&&(i=0),S(e,"height",i+="px"),e.css("height",i),n.text(i),n.data("azh-drag-y",t.pageY),n.height(i))}}),a.stopPropagation(),a.preventDefault(),!1}).on("mouseleave",function(a){var n=t(this);n.data("azh-drag")||(e.data("azh-height-resizer",!1),n.remove(),e.trigger("mouseleave"))}).css({top:e.offset().top,left:e.offset().left,width:e.innerWidth(),height:parseInt(M(e,"height"),10)>10?parseInt(M(e,"height"),10):10});e.data("azh-height-resizer",n)}}).on("mouseleave",function(){var t=azh.$(this);setTimeout(function(){t.data("azh-padding-top-resizer")&&(t.data("azh-padding-top-resizer").is(":hover")||t.data("azh-padding-top-resizer").data("azh-drag")||(t.data("azh-padding-top-resizer").remove(),t.data("azh-padding-top-resizer",!1))),t.data("azh-padding-bottom-resizer")&&(t.data("azh-padding-bottom-resizer").is(":hover")||t.data("azh-padding-bottom-resizer").data("azh-drag")||(t.data("azh-padding-bottom-resizer").remove(),t.data("azh-padding-bottom-resizer",!1))),t.data("azh-height-resizer")&&(t.data("azh-height-resizer").is(":hover")||t.data("azh-height-resizer").data("azh-drag")||(t.data("azh-height-resizer").remove(),t.data("azh-height-resizer",!1)))})})}),i.find(".az-polygone").each(function(){var t=azh.$(this);0===t.find("polygon").get(0).getAttribute("points").split(" ").filter(function(t){return""!==t}).length&&t.addClass("azh-adding"),t.on("mouseenter",function(){function t(){var t=[];e.find(".azh-handlers").length&&(e.find(".azh-handlers").find(".azh-handler").each(function(){t.push(azh.$(this).data("azh-x")+","+azh.$(this).data("azh-y"))}),e.find("polygon").get(0).setAttribute("points",t.join(" ")),$(e.find("polygon"),"points",t.join(" ")))}function a(a){a.on("contextmenu",function(e){return a.remove(),t(),!1}).draggable({start:function(t,a){azh.body.css("cursor","none")},stop:function(t,a){azh.body.css("cursor","auto")},drag:function(a,n){n.helper.css("opacity","0"),setTimeout(function(){n.helper.css("opacity","1"),n.helper.css("left",n.position.left-(azh.device_left?azh.device_left:0)+"px"),n.helper.css("top",n.position.top+(azh.scroll_top?azh.scroll_top:0)+"px")});var i=(n.position.left-(azh.device_left?azh.device_left:0)+5)/e.find("svg").width()*s,o=(n.position.top+(azh.scroll_top?azh.scroll_top:0)+5)/e.find("svg").height()*r;i<0&&(i=0),i>s&&(i=s),o<0&&(o=0),o>r&&(o=r),azh.$(n.helper).data("azh-x",i),azh.$(n.helper).data("azh-y",o),t()}})}var e=azh.$(this),n=e.find("svg").width(),i=e.find("svg").height(),o=e.find("svg").get(0).getAttribute("viewBox").split(" "),s=o[2],r=o[3],h=e.find("polygon").get(0).getAttribute("points").split(" ").filter(function(t){return""!==t});if(0==e.find(".azh-handlers").length)for(var l=azh.$('<div class="azh-handlers azh-auxiliary"></div>').appendTo(e).css({left:e.find("svg").offset().left-e.offset().left,top:e.find("svg").offset().top-e.offset().top,right:e.find("svg").offset().left-e.offset().left,bottom:e.find("svg").offset().top-e.offset().top}),c=0;c<h.length;c++){a(azh.$('<div class="azh-handler"></div>').appendTo(l).css({left:parseFloat(h[c].split(",")[0])/s*n-5+"px",top:parseFloat(h[c].split(",")[1])/r*i-5+"px",position:"absolute"}).data("azh-x",parseFloat(h[c].split(",")[0])).data("azh-y",parseFloat(h[c].split(",")[1])))}l=e.find(".azh-handlers");h.length?(l=e.find(".azh-handlers")).off("click").on("click",function(e){function o(t,a){var n=e.offsetX,i=e.offsetY,o=parseInt(t.css("left"),10),s=parseInt(a.css("left"),10),r=parseInt(t.css("top"),10),h=parseInt(a.css("top"),10),l=Math.pow(n-o,2)+Math.pow(i-r,2),c=Math.pow(n-s,2)+Math.pow(i-h,2),d=Math.pow(s-o,2)+Math.pow(h-r,2),z=2*(Math.abs((n-s)*(r-h)-(o-s)*(i-h))/2)/Math.sqrt(d);return l+d<c||c+d<l?l<c?Math.sqrt(l):Math.sqrt(c):z}var h=l.children().first(),c=o(h,h.next());return l.children().each(function(){var t=azh.$(this),a=t.next();0===a.length&&(a=l.children().first());var e=o(t,a);c>e&&(h=t,c=e)}),a(azh.$('<div class="azh-handler"></div>').insertAfter(h).css({left:e.offsetX-5+"px",top:e.offsetY-5+"px",position:"absolute"}).data("azh-x",e.offsetX/n*s).data("azh-y",e.offsetY/i*r)),t(),!1}):(e.addClass("azh-adding"),l.off("click").on("click",function(e){return a(azh.$('<div class="azh-handler"></div>').appendTo(l).css({left:e.offsetX-5+"px",top:e.offsetY-5+"px",position:"absolute"}).data("azh-x",e.offsetX/n*s).data("azh-y",e.offsetY/i*r)),t(),!1}),azh.document.on("click.azh-polygon",function(t){azh.$(".azh-adding").removeClass("azh-adding").find(".azh-handlers").off("click"),azh.document.off("click.azh-polygon")}))}).on("mouseleave",function(){azh.$(this).find(".azh-handlers").remove()})}),i.find("form button").on("keypress keydown",function(t){32==t.keyCode&&azh.document.get(0).execCommand("insertHTML",!1,"&nbsp;")}).on("keypress keydown keyup",function(t){13!=t.keyCode&&32!=t.keyCode||t.preventDefault()}).on("click",function(t){t.preventDefault()}),K(i),Z(i),i.is("[data-element], [data-section]")&&(K(i,z(i)),Z(i,z(i)),i.find("[data-cloneable], [data-cloneable-inline]").each(function(){var t=azh.$(this);if(ot(t)){var a=t.closest("[data-element]");a.length&&(K(a,z(a)),Z(a,z(a)))}})),azh.controls_container.find(".azh-utility").each(function(){it(t(this),":not(.azh-group):not(.azh-subgroup):not(.azh-cloneable-group):not(.azh-utility-title):not(.azh-context-menu-title)"),ut(t(this))}),azh.controls_container.appendTo(l),ft(),azh.window.trigger("azh-customization-after-init",{wrapper:i})},L=function(a){var e={};t(["id","for"]).each(function(){var t=this;a.find("["+t+"]").each(function(){var a=azh.$(this).attr(t);a in e||(e[a]=[]),azh.$(this).addClass("azh-id-attr"),azh.$(this).data("azh-id-attr",t),e[a].push(azh.$(this))})}),t(["href","data-target","data-id"]).each(function(){var n=this;a.find("["+n+'^="#"]').each(function(){var a=azh.$(this).attr(n).replace("#","");t.trim(a)&&(a in e||(e[a]=[]),azh.$(this).addClass("azh-hash-attr"),azh.$(this).data("azh-hash-attr",n),e[a].push(azh.$(this)))})});var n={};for(var i in e)e[i].length>1&&(n[i]=e[i]);a.data("azh-linked-ids",n)};azh.section_customization_init=function(a){azh.recognition&&m(a),azh.controls_container=!1,t(".azh-controls-container").length?azh.controls_container=t(".azh-controls-container"):azh.controls_container=t('<div class="azh-controls-container"></div>').appendTo(l);var n=a.data("azh-controls");n||(n=t('<div class="azh-section-controls" title="'+azh.i18n.section_settings+'"></div>').appendTo(azh.controls_container).on("mouseenter",function(){t(this).data("azh-linked-element").addClass("azh-over")}).on("mouseleave",function(){t(this).data("azh-linked-element").removeClass("azh-over")}).data("azh-linked-element",a),a.data("azh-controls",n)),n.hide(),a.addClass("azh-controls"),a.off("mouseenter.azh-section").on("mouseenter.azh-section",function(t){if(0==azh.controls_container.find(".azh-section-controls.azh-active").length){var a=azh.$(this);n.css("display",""),n.css("right",c()-a.offset().left-a.outerWidth()+"px"),n.css("top",a.offset().top+"px")}}).off("mousemove.azh-section").on("mousemove.azh-section",function(){var t=azh.$(this);n.css("right",c()-t.offset().left-t.outerWidth()+"px"),n.css("top",t.offset().top+"px")}).off("mouseleave.azh-section").on("mouseleave.azh-section",function(){azh.$(this);setTimeout(function(){n.is(":hover")||0!=azh.controls_container.find(".azh-resizer:hover").length?n.on("mouseleave",function(){n.hide()}):n.hide()})}),L(a),E(a),n.find(".azh-html-edit").length||t('<div class="azh-modal-button azh-html-edit" title="Edit section HTML"></div>').on("click",function(n){t(this);!function(a,n,i){var o=t('<div class="azh-modal"></div>');t('<div class="azh-modal-title">'+a.title+"</div>").appendTo(o),t('<div class="azh-modal-desc">'+a.desc+"</div>").appendTo(o),t('<div class="azh-modal-label">'+a.label+"</div>").appendTo(o);var s=e();t('<div id = "'+s+'" class="azh-ace"></div>').appendTo(o);var r=t('<div class="azh-modal-actions"></div>').appendTo(o);t('<div class="azh-modal-ok">'+azh.i18n.ok+"</div>").appendTo(r).on("click",function(){return t.simplemodal.close(),i(h.getSession().getValue()),!1}),t('<div class="azh-modal-cancel">'+azh.i18n.cancel+"</div>").appendTo(r).on("click",function(){return t.simplemodal.close(),!1}),o.simplemodal({autoResize:!0,overlayClose:!0,opacity:0,overlayCss:{"background-color":"black"},closeClass:"azh-close",onClose:function(){t.simplemodal.close()}});var h=ace.edit(s);h.setTheme("ace/theme/chrome"),h.getSession().setMode("ace/mode/html"),h.getSession().setValue(n),h.resize()}({title:"Edit section HTML",desc:"",label:"Source code"},function(a){var e="",n=0;return AZHParser(a,{start:function(t,a,i){e+=Array(1*n+1).join("\t")+"<"+t;for(var o=0;o<a.length;o++)a[o].value.indexOf('"')>=0&&a[o].value.indexOf("'")<0?e+=" "+a[o].name+"='"+a[o].value+"'":e+=" "+a[o].name+'="'+a[o].escaped+'"';e+=(i?"/":"")+">\n",i||n++},end:function(t){n--,e+=Array(1*n+1).join("\t")+"</"+t+">\n"},chars:function(a){t.trim(a)&&(e+=Array(1*n+1).join("\t")+a.replace(/[\t\r\n]*/g,"")+"\n")}}),e}(g(a.wrap("<div></div>").parent())),function(t){y(a,t)})}).prependTo(n)};var q=function(a,e){0==t(".azh-focus").length&&(t('<div class="azh-focus"><div class="top"></div><div class="right"></div><div class="bottom"></div><div class="left"></div></div>').appendTo(l).on("click",function(){return t(".azh-focus").remove(),!1}),t(".azh-focus .top, .azh-focus .right, .azh-focus .bottom, .azh-focus .left").css({"z-index":"999999",position:"fixed","background-color":"black",opacity:"0.4"}));var n=t(".azh-focus .top"),i=t(".azh-focus .right"),o=t(".azh-focus .bottom"),s=t(".azh-focus .left"),h=a.offset().top-0,c=a.offset().left-0;azh.body.has(a).length&&(r.get(0)!=azh.window.get(0)?h-=azh.window.scrollTop():h-=azh.body.scrollTop(),azh.device_left&&(c+=azh.device_left));var d=a.outerWidth()+0,z=a.outerHeight()+0;n.stop().animate({top:0,left:0,right:0,height:h},e,"linear"),i.stop().animate({top:h,left:c+d,right:0,height:z},e,"linear"),o.stop().animate({top:h+z,left:0,right:0,bottom:0},e,"linear"),s.stop().animate({top:h,left:0,height:z,width:c},e,"linear",function(){}),e>0&&setTimeout(function(){r.on("scroll.focus",function(){t(".azh-focus").remove(),r.off("scroll.focus")}),t(".azh-focus .top, .azh-focus .right, .azh-focus .bottom, .azh-focus .left").stop().animate({opacity:"0"},10*e),setTimeout(function(){r.trigger("scroll")},10*e)},e)};function B(a){r.get(0)!=azh.window.get(0)?azh.window.scrollTop(a.offset().top-r.height()/2+a.height()/2):azh.body.stop().animate({scrollTop:a.offset().top-azh.window.height()/2+a.height()/2},300),setTimeout(function(){t('<div class="azh-overlay"></div>').appendTo(l),q(t(".azh-overlay"),0),setTimeout(function(){t(".azh-overlay").remove(),q(a,300)},0)},300)}function U(t){t.css({left:"",right:"",top:"",bottom:"",transform:""}),S(t,"left",""),S(t,"right",""),S(t,"top",""),S(t,"bottom",""),S(t,"transform",""),S(t,"height",t.height()+"px"),S(t,"width",t.width()+"px")}function J(t){return t.is(".az-top")?"top":t.is(".az-middle")?"middle":t.is(".az-bottom")?"bottom":void 0}function Q(t){return t.is(".az-left")?"left":t.is(".az-center")?"center":t.is(".az-right")?"right":void 0}function V(t){var a=0;return t.get(0).style.top&&(a=t.get(0).style.top,a=parseInt(a)),a}function G(t){var a=0;return t.get(0).style.top&&(a=t.get(0).style.top,a=(a=/calc\(50% ([-+]) (\d+)px\)/gi.exec(a))?parseInt(a[1]+a[2]):0),a}function K(t){var a=0;return t.get(0).style.bottom&&(a=t.get(0).style.bottom,a=parseInt(a)),a}function Z(t){var a=0;return t.get(0).style.left&&(a=t.get(0).style.left,a=parseInt(a)),a}function tt(t){var a=0;return t.get(0).style.left&&(a=t.get(0).style.left,a=(a=/calc\(50% ([-+]) (\d+)px\)/gi.exec(a))?parseInt(a[1]+a[2]):0),a}function at(t){var a=0;return t.get(0).style.right&&(a=t.get(0).style.right,a=parseInt(a)),a}function et(t,a){t.css("top",a+"px"),S(t,"top",a+"px")}function nt(t,a){a>=0?(t.css("top","calc(50% + "+a+"px)"),S(t,"top","calc(50% + "+a+"px)")):(t.css("top","calc(50% - "+Math.abs(a)+"px)"),S(t,"top","calc(50% - "+Math.abs(a)+"px)"))}function it(t,a){t.css("bottom",a+"px"),S(t,"bottom",a+"px")}function ot(t,a){t.css("left",a+"px"),S(t,"left",a+"px")}function st(t,a){a>=0?(t.css("left","calc(50% + "+a+"px)"),S(t,"left","calc(50% + "+a+"px)")):(t.css("left","calc(50% - "+Math.abs(a)+"px)"),S(t,"left","calc(50% - "+Math.abs(a)+"px)"))}function rt(t,a){t.css("right",a+"px"),S(t,"right",a+"px")}function ht(t){t.css("bottom",""),S(t,"bottom",""),t.removeClass("az-middle"),A(t,"az-middle"),t.removeClass("az-bottom"),A(t,"az-bottom"),T(t,"az-top"),t.addClass("az-top")}function lt(t){t.css("bottom",""),S(t,"bottom",""),t.removeClass("az-top"),A(t,"az-top"),t.removeClass("az-bottom"),A(t,"az-bottom"),T(t,"az-middle"),t.addClass("az-middle")}function ct(t){t.css("top",""),S(t,"top",""),t.removeClass("az-top"),A(t,"az-top"),t.removeClass("az-middle"),A(t,"az-middle"),T(t,"az-bottom"),t.addClass("az-bottom")}function dt(t){t.css("right",""),S(t,"right",""),t.removeClass("az-right"),A(t,"az-right"),t.removeClass("az-center"),A(t,"az-center"),T(t,"az-left"),t.addClass("az-left")}function zt(t){t.css("right",""),S(t,"right",""),t.removeClass("az-right"),A(t,"az-right"),t.removeClass("az-left"),A(t,"az-left"),T(t,"az-center"),t.addClass("az-center")}function pt(t){t.css("left",""),S(t,"left",""),t.removeClass("az-center"),A(t,"az-center"),t.removeClass("az-left"),A(t,"az-left"),T(t,"az-right"),t.addClass("az-right")}var ft=function(){function a(e,n){var i="data-section";e.attr(i)||(i="data-element");var o=e.attr(i);t('<span class="azh-name" '+(0===o.indexOf("shortcode:")?"":"contenteditable")+">"+e.attr(i)+"</span>").prependTo(n).on("blur",function(){e.attr(i,t(this).text()),$(e,i,t(this).text());var a=e.data("azh-controls");a&&a.find("> .azh-name").text(t(this).text())}).on("mousedown",function(t){t.stopPropagation()}),n.data("azh-linked-element",e),e.is(".azh-expand")&&n.addClass("azh-expand"),e.data("azh-linked-hierarchy-child",n);o=e.attr(i);var s=!1,r=t();(r=t("data-section"==i?'.azh-library .azh-sections .azh-section[data-path="'+o+'"]':'.azh-library .azh-elements .azh-element[data-path="'+o+'"]')).length>0&&(s=t(r).get(0).style["background-image"].replace("url(","").replace(")","").replace(/\'/gi,"").replace(/\"/gi,"")),s&&"none"!=s||(s=azh.plugin_url+"/images/box.png"),n.prepend('<img src="'+s+'">');var h=t('<span class="azh-visibility"></span>').prependTo(n).on("click",function(){var a=t(this);return t(this).is(".azh-hidden")?(a.removeClass("azh-hidden"),e.show(),S(e,"display","block")):(a.addClass("azh-hidden"),e.hide(),S(e,"display","none")),!1});e.is(":visible")||h.addClass("azh-hidden");var l=function(t){for(var a=azh.$(),e=t;e.length;)a=a.add(e.children().filter("[data-element]")),e=e.children().not("[data-element]");return a}(e);if(l.length){var c=t('<div class="azh-children"></div>').appendTo(n);l.each(function(){var e=azh.$(this);e.attr("data-element")&&" "!=e.attr("data-element")&&a(e,t('<div class="azh-child"></div>').appendTo(c))}),1===l.parent().length&&c.sortable({placeholder:"azh-placeholder",forcePlaceholderSize:!0,update:function(a,e){var n=t(e.item).data("azh-linked-element");(n.detach(),t(e.item).next().length)?t(e.item).next().data("azh-linked-element").before(n):t(e.item).prev().length&&t(e.item).prev().data("azh-linked-element").after(n)},over:function(t,a){a.placeholder.attr("class",a.helper.attr("class")),a.placeholder.removeClass("ui-sortable-helper"),a.placeholder.attr("style",a.helper.attr("style")),a.placeholder.css("position","relative"),a.placeholder.css("z-index","auto"),a.placeholder.css("left","auto"),a.placeholder.css("top","auto"),a.placeholder.addClass("azh-placeholder")}})}return n}function e(a){function e(){c.find(".azh-active").removeClass("azh-active"),a.is(".az-top")&&c.find(".azh-top-alignment").addClass("azh-active"),a.is(".az-middle")&&c.find(".azh-middle-alignment").addClass("azh-active"),a.is(".az-bottom")&&c.find(".azh-bottom-alignment").addClass("azh-active"),a.is(".az-left")&&c.find(".azh-left-alignment").addClass("azh-active"),a.is(".az-center")&&c.find(".azh-center-alignment").addClass("azh-active"),a.is(".az-right")&&c.find(".azh-right-alignment").addClass("azh-active")}function o(t){for(var a=[],e=0;e<t.length;e++)a.push([t[e],e]);a.sort(function(t,a){return t[0]<a[0]?-1:1});var n=[];for(e=0;e<a.length;e++)n.push(a[e][1]);var i=0;do{var o=[];for(e=1;e<t.length;e++)o.push(t[n[e-1]]+(t[n[e]]-t[n[e-1]])/2);var s=[];s.push(o[0]-t[n[0]]);for(e=1;e<t.length;e++)s.push(t[n[e]]-o[e-1]);s.sort();var r=s[Math.floor(s.length/2)];t[n[0]]=o[0]-r;for(e=1;e<t.length;e++)t[n[e]]=o[e-1]+r}while((i=Math.abs(i-r))>.1);return t}function s(t,a){switch(a){case"top":var e=[];t.each(function(){var t=azh.$(this);switch(J(t)){case"top":e.push(V(t));break;case"middle":e.push(G(t)-t.height()/2);break;case"bottom":e.push(K(t)-t.height())}}),e=o(e),t.each(function(t){var a=azh.$(this);switch(J(a)){case"top":et(a,Math.round(e[t]));break;case"middle":nt(a,Math.round(e[t]+a.height()/2));break;case"bottom":it(a,Math.round(e[t]+a.height()))}});break;case"middle":e=[];t.each(function(){var t=azh.$(this);switch(J(t)){case"top":e.push(V(t)+t.height()/2);break;case"middle":e.push(G(t));break;case"bottom":e.push(K(t)-t.height()/2)}}),e=o(e),t.each(function(t){var a=azh.$(this);switch(J(a)){case"top":et(a,Math.round(e[t]-a.height()/2));break;case"middle":nt(a,Math.round(e[t]));break;case"bottom":it(a,Math.round(e[t]+a.height()/2))}});break;case"bottom":e=[];t.each(function(){var t=azh.$(this);switch(J(t)){case"top":e.push(V(t)+t.height());break;case"middle":e.push(G(t)+t.height()/2);break;case"bottom":e.push(K(t))}}),e=o(e),t.each(function(t){var a=azh.$(this);switch(J(a)){case"top":et(a,Math.round(e[t]-a.height()));break;case"middle":nt(a,Math.round(e[t]-a.height()/2));break;case"bottom":it(a,Math.round(e[t]))}})}}function r(t,a){switch(a){case"left":var e=[];t.each(function(){var t=azh.$(this);switch(Q(t)){case"left":e.push(Z(t));break;case"center":e.push(tt(t)-t.width()/2);break;case"right":e.push(at(t)-t.width())}}),e=o(e),t.each(function(t){var a=azh.$(this);switch(Q(a)){case"left":ot(a,Math.round(e[t]));break;case"center":st(a,Math.round(e[t]+a.width()/2));break;case"right":rt(a,Math.round(e[t]+a.width()))}});break;case"center":e=[];t.each(function(){var t=azh.$(this);switch(Q(t)){case"left":e.push(Z(t)+t.width()/2);break;case"center":e.push(tt(t));break;case"right":e.push(at(t)-t.width()/2)}}),e=o(e),t.each(function(t){var a=azh.$(this);switch(Q(a)){case"left":ot(a,Math.round(e[t]-a.width()/2));break;case"center":st(a,Math.round(e[t]));break;case"right":rt(a,Math.round(e[t]+a.width()/2))}});break;case"right":e=[];t.each(function(){var t=azh.$(this);switch(Q(t)){case"left":e.push(Z(t)+t.width());break;case"center":e.push(tt(t)+t.width()/2);break;case"right":e.push(at(t))}}),e=o(e),t.each(function(t){var a=azh.$(this);switch(Q(a)){case"left":ot(a,Math.round(e[t]-a.width()));break;case"center":st(a,Math.round(e[t]-a.width()/2));break;case"right":rt(a,Math.round(e[t]))}})}}function h(t,a){switch(t.each(function(){!function(t,a){switch(J(t)){case"top":var e=V(t);switch(a){case"middle":e=e-t.parent().height()/2+t.height()/2,lt(t),nt(t,Math.round(e));break;case"bottom":e=-e+t.parent().height()-t.height(),ct(t),it(t,Math.round(e))}break;case"middle":switch(e=G(t),a){case"top":e=e+t.parent().height()/2-t.height()/2,ht(t),et(t,Math.round(e));break;case"bottom":e=-e+t.parent().height()/2-t.height()/2,ct(t),it(t,Math.round(e))}break;case"bottom":switch(e=K(t),a){case"top":e=-e+t.parent().height()-t.height(),ht(t),et(t,Math.round(e));break;case"middle":e=-e+t.parent().height()/2-t.height()/2,lt(t),nt(t,Math.round(e))}}}(azh.$(this),a)}),a){case"top":var e=V(t.first());t.each(function(){e>V(azh.$(this))&&(e=V(azh.$(this)))}),t.each(function(){et(azh.$(this),Math.round(e))});break;case"middle":var n=0;t.each(function(){n+=G(azh.$(this))}),n/=t.length,t.each(function(){nt(azh.$(this),Math.round(n))});break;case"bottom":e=K(t.first());t.each(function(){e>K(azh.$(this))&&(e=K(azh.$(this)))}),t.each(function(){it(azh.$(this),Math.round(e))})}}function l(t,a){switch(t.each(function(){!function(t,a){switch(Q(t)){case"left":var e=Z(t);switch(a){case"center":e=e-t.parent().width()/2+t.width()/2,zt(t),st(t,Math.round(e));break;case"right":e=-e+t.parent().width()-t.width(),pt(t),rt(t,Math.round(e))}break;case"center":switch(e=tt(t),a){case"left":e=e+t.parent().width()/2-t.width()/2,dt(t),ot(t,Math.round(e));break;case"right":e=-e+t.parent().width()/2-t.width()/2,pt(t),rt(t,Math.round(e))}break;case"right":switch(e=at(t),a){case"left":e=-e+t.parent().width()-t.width(),dt(t),ot(t,Math.round(e));break;case"center":e=-e+t.parent().width()/2-t.width()/2,zt(t),st(t,Math.round(e))}}}(azh.$(this),a)}),a){case"left":var e=Z(t.first());t.each(function(){e>Z(azh.$(this))&&(e=Z(azh.$(this)))}),t.each(function(){ot(azh.$(this),Math.round(e))});break;case"center":var n=0;t.each(function(){n+=tt(azh.$(this))}),n/=t.length,t.each(function(){st(azh.$(this),Math.round(n))});break;case"right":e=at(t.first());t.each(function(){e>at(azh.$(this))&&(e=at(azh.$(this)))}),t.each(function(){rt(azh.$(this),Math.round(e))})}}if(n.find(".azh-alignment").remove(),a.parent().is(".az-free-positioning")||"absolute"===a.css("position")){var c=t('<div class="azh-alignment"></div>').insertAfter(i),d=t('<div class="azh-a-alignment"></div>').appendTo(c);if(t('<div class="azh-top-alignment"></div>').appendTo(d).on("click",function(t){a.length>1?h(a,"top"):(U(a),ht(a)),e()}),t('<div class="azh-middle-alignment"></div>').appendTo(d).on("click",function(t){a.length>1?h(a,"middle"):(U(a),lt(a)),e()}),t('<div class="azh-bottom-alignment"></div>').appendTo(d).on("click",function(t){a.length>1?h(a,"bottom"):(U(a),ct(a)),e()}),t('<div class="azh-left-alignment"></div>').appendTo(d).on("click",function(t){a.length>1?l(a,"left"):(U(a),dt(a)),e()}),t('<div class="azh-center-alignment"></div>').appendTo(d).on("click",function(t){a.length>1?l(a,"center"):(U(a),zt(a)),e()}),t('<div class="azh-right-alignment"></div>').appendTo(d).on("click",function(t){a.length>1?l(a,"right"):(U(a),pt(a)),e()}),e(),a.length>2){var z=t('<div class="azh-b-alignment"></div>').appendTo(c);t('<div class="azh-between-top-alignment"></div>').appendTo(z).on("click",function(t){2===d.find(".azh-active").length&&s(a,"top")}),t('<div class="azh-between-middle-alignment"></div>').appendTo(z).on("click",function(t){2===d.find(".azh-active").length&&s(a,"middle")}),t('<div class="azh-between-bottom-alignment"></div>').appendTo(z).on("click",function(t){2===d.find(".azh-active").length&&s(a,"bottom")}),t('<div class="azh-between-left-alignment"></div>').appendTo(z).on("click",function(t){2===d.find(".azh-active").length&&r(a,"left")}),t('<div class="azh-between-center-alignment"></div>').appendTo(z).on("click",function(t){2===d.find(".azh-active").length&&r(a,"center")}),t('<div class="azh-between-right-alignment"></div>').appendTo(z).on("click",function(t){2===d.find(".azh-active").length&&r(a,"right")})}azh.document_off("keydown.azh-hierarchy-move").document_on("keydown.azh-hierarchy-move",function(t){if(a.length)switch(t.keyCode?t.keyCode:t.which){case 37:switch(Q(a)){case"left":a.each(function(){ot(azh.$(this),Z(azh.$(this))-1)});break;case"center":a.each(function(){st(azh.$(this),tt(azh.$(this))-1)});break;case"right":a.each(function(){rt(azh.$(this),at(azh.$(this))+1)})}t.preventDefault();break;case 38:switch(J(a)){case"top":a.each(function(){et(azh.$(this),V(azh.$(this))-1)});break;case"middle":a.each(function(){nt(azh.$(this),G(azh.$(this))-1)});break;case"bottom":a.each(function(){it(azh.$(this),K(azh.$(this))+1)})}t.preventDefault();break;case 39:switch(Q(a)){case"left":a.each(function(){ot(azh.$(this),Z(azh.$(this))+1)});break;case"center":a.each(function(){st(azh.$(this),tt(azh.$(this))+1)});break;case"right":a.each(function(){rt(azh.$(this),at(azh.$(this))-1)})}t.preventDefault();break;case 40:switch(J(a)){case"top":a.each(function(){et(azh.$(this),V(azh.$(this))+1)});break;case"middle":a.each(function(){nt(azh.$(this),G(azh.$(this))+1)});break;case"bottom":a.each(function(){it(azh.$(this),K(azh.$(this))-1)})}t.preventDefault()}})}else azh.document_off("keydown.azh-hierarchy-move")}var n=t(".azh-elements-hierarchy");if(n.length){n.empty();var i=t('<div class="azh-hierarchy-title">'+azh.i18n.elements_hierarchy+"</div>").prependTo(n),o=t('<div class="azh-child azh-root"></div>').appendTo(n);azh.content_wrapper.find("[data-section]").andSelf().filter("[data-section]").each(function(){var e=t('<div class="azh-child"></div>').appendTo(o);a(azh.$(this),e)}),azh.document.off("click.azh-hierarchy contextmenu.azh-hierarchy").on("click.azh-hierarchy contextmenu.azh-hierarchy",function(a){var i=azh.$(a.target),o=i.is("[data-element]")?i:i.closest("[data-element]");if(o.length){if(e(o),(h=o.data("azh-linked-hierarchy-child"))&&h.length&&(n.find(".azh-child.azh-active").removeClass("azh-active"),h.addClass("azh-active"),h.parents(".azh-child").each(function(){var a=t(this);a.addClass("azh-expand"),a.data("azh-linked-element")&&a.data("azh-linked-element").addClass("azh-expand")})),1===a.which)if(o.data("azh-controls"))(r=o.data("azh-controls").find(".azh-utility-wrapper")).length&&(azh.controls_container.find(".azh-element-controls.azh-active, .azh-column-controls.azh-active, .azh-section-controls.azh-active").removeClass("azh-active"),r.trigger("click"))}else{var s=i.closest("[data-section]");if(s.length){var r,h=s.data("azh-linked-hierarchy-child");if(n.find(".azh-child.azh-active").removeClass("azh-active"),h.addClass("azh-active"),h&&h.length&&h.parents(".azh-child").each(function(){var a=t(this);a.addClass("azh-expand"),a.data("azh-linked-element")&&a.data("azh-linked-element").addClass("azh-expand")}),1===a.which)if(s.data("azh-controls"))(r=s.data("azh-controls").find(".azh-utility-wrapper")).length&&(azh.controls_container.find(".azh-element-controls.azh-active, .azh-column-controls.azh-active, .azh-section-controls.azh-active").removeClass("azh-active"),r.trigger("click"))}}}),n.find(".azh-child .azh-name").off("mouseenter").on("mouseenter",function(){var a=t(this).parent();a.data("azh-linked-element")&&a.data("azh-linked-element").addClass("azh-over")}).off("mouseleave").on("mouseleave",function(){var a=t(this).parent();a.data("azh-linked-element")&&a.data("azh-linked-element").removeClass("azh-over")}).off("click").on("click",function(a){var i=t(this).parent();if(i.is(".azh-active.azh-expand")?(i.removeClass("azh-expand"),i.data("azh-linked-element")&&i.data("azh-linked-element").removeClass("azh-expand")):(i.addClass("azh-expand"),i.data("azh-linked-element")&&i.data("azh-linked-element").addClass("azh-expand")),i.data("azh-linked-element")){var o=i.data("azh-linked-element");if(o.is("[data-element]")){if(a.ctrlKey){var s=n.data("azh-group");i.is(".azh-active")?(s=!!s&&(!!(s=s.not(o)).length&&s),i.removeClass("azh-active")):s?s.parent().get(0)==o.parent().get(0)&&(s=s.add(o),i.addClass("azh-active")):(n.find(".azh-child.azh-active").removeClass("azh-active"),s=o,i.addClass("azh-active")),n.data("azh-group",s),s&&e(s)}else n.data("azh-group",o),e(o),n.find(".azh-child.azh-active").removeClass("azh-active"),i.addClass("azh-active");var r=o.data("azh-controls");r&&o.is(":visible")&&(azh.controls_container.find(".azh-element-controls.azh-active, .azh-column-controls.azh-active, .azh-section-controls.azh-active").removeClass("azh-active"),P(o,r),r.find(".azh-utility-wrapper").trigger("click"))}if(o.is("[data-section]")){var h=o.data("azh-controls");h&&o.is(":visible")&&(h.css("right",c()-o.offset().left-o.outerWidth()+"px"),h.css("top",o.offset().top+"px"),azh.controls_container.find(".azh-section-controls.azh-active").removeClass("azh-active"),h.addClass("azh-active"),n.find(".azh-child.azh-active").removeClass("azh-active"),i.addClass("azh-active"))}}return!1}).off("contextmenu").on("contextmenu",function(a){a.preventDefault();var e=t(a.target).closest(".azh-child").data("azh-linked-element");e&&e.data("azh-controls")&&(azh.controls_container.find(".azh-element-controls.azh-active, .azh-column-controls.azh-active, .azh-section-controls.azh-active").removeClass("azh-active"),e.data("azh-controls").find(".azh-utility-wrapper").trigger("click"))}),h.off("click.azh-hierarchy-active").on("click.azh-hierarchy-active",function(a){a.which&&(t(a.target).closest(".azh-devices, #wp-link-wrap, .media-modal, .azh-icon-select-dialog").length||(t(a.target).closest(".azh-element-controls").length||azh.controls_container.find(".azh-element-controls.azh-active").removeClass("azh-active"),t(a.target).closest(".azh-column-controls").length||azh.controls_container.find(".azh-column-controls.azh-active").removeClass("azh-active"),t(a.target).closest(".azh-section-controls").length||azh.controls_container.find(".azh-section-controls.azh-active").removeClass("azh-active")))}),n.find(".azh-root").resizable({handles:"s"}),n.draggable({handle:".azh-hierarchy-title"})}};azh.get_wrapper_controls=function(a){var e=t();return a.find(".azh-controls").andSelf().filter(".azh-controls").each(function(){e=e.add(azh.$(this).data("azh-controls"))}),a.find(".azh-cloneable-controls").andSelf().filter(".azh-cloneable-controls").each(function(){e=e.add(azh.$(this).data("azh-cloneable-controls"))}),a.find(".azh-cloneable-child-controls").andSelf().filter(".azh-cloneable-child-controls").each(function(){e=e.add(azh.$(this).data("azh-cloneable-child-controls"))}),a.find(".azh-item-controls").andSelf().filter(".azh-item-controls").each(function(){e=e.add(azh.$(this).data("azh-item-controls"))}),a.find(".azh-grid").andSelf().filter(".azh-grid").each(function(){azh.$(this).children().each(function(){var t=azh.$(this),a=t.data("azh-resizer");a&&(e=e.add(a));var n=t.data("azh-controls");n&&(e=e.add(n))})}),e},azh.structure_refresh=function(a){t(".azh-structure").empty(),a.find("[data-section]").each(function(){var a=t('<div class="azh-section-path">'+azh.$(this).data("section")+"</div>").appendTo(t(".azh-structure"));t(a).data("azh-section",azh.$(this)),azh.$(this).data("azh-section-path",a),t('<div class="azh-remove"></div>').appendTo(a).on("click",function(){return j(t(a).data("azh-section")),t(a).data("azh-section").remove(),t(a).remove(),ft(),!1}),t(a).on("click",function(){return B(t(this).data("azh-section")),!1})}),t(".azh-structure").sortable({placeholder:"azh-placeholder",forcePlaceholderSize:!0,update:function(a,e){var n=t(e.item).data("azh-section");if(t(n).detach(),t(e.item).next().length){var i=t(e.item).next().data("azh-section");t(i).before(n)}else if(t(e.item).prev().length){var o=t(e.item).prev().data("azh-section");t(o).after(n)}ft()},over:function(t,a){a.placeholder.attr("class",a.helper.attr("class")),a.placeholder.removeClass("ui-sortable-helper"),a.placeholder.attr("style",a.helper.attr("style")),a.placeholder.css("position","relative"),a.placeholder.css("z-index","auto"),a.placeholder.css("left","auto"),a.placeholder.css("top","auto"),a.placeholder.addClass("azh-placeholder")}}),t(".azh-structure").length&&t(".azh-structure").scrollTop(t(".azh-structure")[0].scrollHeight),t(".azh-structure").children().length?t("#azexo-html-library .azh-panel.azh-builder").removeClass("azh-empty"):t("#azexo-html-library .azh-panel.azh-builder").addClass("azh-empty")},azh.library_init=function(a){function e(){var a=t(p).find("option:selected").val(),e=t(f).find("option:selected").val();""==a&&""==e?t(".azh-library .azh-sections .azh-section").show():(""!=a&&""==e&&(t(".azh-library .azh-sections .azh-section").hide(),t('.azh-library .azh-sections .azh-section[data-path^="'+a+'"]').show()),""==a&&""!=e&&(t(".azh-library .azh-sections .azh-section").hide(),t(".azh-library .azh-sections .azh-section."+e).show()),""!=a&&""!=e&&(t(".azh-library .azh-sections .azh-section").show(),t('.azh-library .azh-sections .azh-section:not([data-path^="'+a+'"])').hide(),t(".azh-library .azh-sections .azh-section:not(."+e+")").hide()))}azh.tags={};var n={};for(var i in azh.dirs_options)if("tags"in azh.dirs_options[i])for(var o in azh.dirs_options[i].tags){var h=azh.dirs_options[i].tags[o].split(",").map(function(a){return azh.tags[t.trim(a).toLowerCase()]=!0,t.trim(a).toLowerCase()});n[i+"/"+o]=h}t(".azh-library .azh-sections .azh-section").each(function(){var a=t(this).data("dir")+"/"+t(this).data("path");a in n&&t(this).addClass(n[a].join(" "))}),t(".azh-library .azh-elements .azh-element").each(function(){var a=t(this).data("dir")+"/"+t(this).data("path");a in n&&t(this).addClass(n[a].join(" "))});var c={};for(var i in azh.dirs_options)if("child-suggestions"in azh.dirs_options[i])for(var o in azh.dirs_options[i]["child-suggestions"]){(z=i+"/"+o)in c||(c[z]=[]),t(azh.dirs_options[i]["child-suggestions"][o]).each(function(){c[z].push(i+"/"+this)}),o in c||(c[o]=[]),t(azh.dirs_options[i]["child-suggestions"][o]).each(function(){c[o].push(this)})}var d={};for(var z in c)t(c[z]).each(function(){var a=this;t(".azh-library .azh-elements .azh-element").each(function(){t(this).data("dir")+"/"+t(this).data("path")==a&&(z in d||(d[z]=[]),d[z].push(this)),t(this).data("path")==a&&(z in d||(d[z]=[]),d[z].push(this))})});t(".azh-library .azh-elements .azh-element").each(function(){var a=t(this).data("dir")+"/"+t(this).data("path");a in d&&t(this).data("child-suggestions",d[a]),t(this).data("path")in d&&t(this).data("child-suggestions",d[t(this).data("path")])}),t(".azh-add-section").off("click").on("click",function(){return t(".azh-sections .azh-section.azh-fuzzy").removeClass("azh-fuzzy"),"none"==t(".azh-library").css("display")?(t(".azh-structure").animate({"max-height":"100px"},400,function(){t(".azh-structure").scrollTop(t(".azh-structure")[0].scrollHeight)}),t(".azh-sections").height(t("#azexo-html-library > .azh-builder").height()-(t(".azh-structure").outerHeight()>100?100:t(".azh-structure").outerHeight())-120),t(".azh-library").slideDown(),t(this).text(t(this).data("close"))):(t(".azh-structure").animate({"max-height":"600px"},400),t(".azh-library").slideUp(),t(this).text(t(this).data("open"))),!1}),t("#azexo-html-library .azh-panel.azh-builder").is(".azh-empty")&&t(".azh-add-section").trigger("click"),t(".azh-copy-sections-list").off("click").on("click",function(){var a=[];t(".azh-structure .azh-section-path").each(function(){a.push(t(this).text())});var e=t("<input>");return t("body").append(e),e.val(a.join("|")).select(),document.execCommand("copy"),e.remove(),alert(azh.i18n.copied),!1}),t(".azh-insert-sections-list").off("click").on("click",function(){var a=prompt(azh.i18n.paste_sections_list_here);return""!==t.trim(a)&&t(a.split("|")).each(function(){t('.azh-library .azh-sections .azh-section[data-path="'+this+'"]').click()}),!1});var p=t(".azh-library .azh-categories").off("change").on("change",e),f=t("<select></select>").appendTo(".azh-library-filters").on("change",e);t('<option selected value="">'+azh.i18n.filter_by_tag+"</option>").appendTo(f),Object.keys(azh.tags).sort().forEach(function(a,e){t('<option value="'+a+'">'+a+"</option>").appendTo(f)}),azh.default_category&&p.find('[value="'+azh.default_category+'"]').length&&(p.val(azh.default_category),e()),t(".azh-library .azh-sections .azh-section").off("click").on("click",function(){var e=t(this);return t.get(e.data("url"),function(t){t=s(t=(t=(t=(t=t.replace(/{{azh-uri}}/g,e.data("dir-uri"))).replace(/\[\[([^\]]+)\]\]/g,"")).replace(/\[azh_text\]/g,"")).replace(/\[\/azh_text\]/g,""));var n=azh.$('<div data-section="'+e.data("path")+'">'+t+"</div>");v(n.get(0)),a.append(n),azh.section_customization_init(n),azh.frontend_init&&azh.frontend_init(n),azh.window.trigger("resize"),azh.structure_refresh(a);e.is(".general")||(n.addClass("azh-loading"),X('<div data-section="'+e.data("path")+'">'+t+"</div>",function(){n.removeClass("azh-loading")}))}),!1}),t(".azh-library .azh-sections .azh-section.general").each(function(){var a=t(this).clone(!0);a.css("display",""),t("#azexo-html-library > .azh-general").append(a)}),0===t("#azexo-html-library > .azh-general .azh-section").length&&t("#azexo-html-library > .azh-library-actions > .azh-general").remove(),t(".azh-library-actions > div:not(.azh-save)").on("click",function(){t("#azexo-html-library > .azh-active, #azexo-html-library .azh-library-actions .azh-active").removeClass("azh-active");var a=t.trim(t(this).attr("class"));t(this).addClass("azh-active"),t("#azexo-html-library > ."+a).addClass("azh-active")}),t(".azh-library-actions > .azh-save").on("click",function(t){azh.save(),t.which&&r.one("azh-saved",function(){alert(azh.i18n.saved)})}),t("#azexo-html-library .azh-panel .azh-panel-content").each(function(){var a=t(this);t(this).height(a.closest(".azh-panel").height()-a.closest(".azh-panel").find(".azh-panel-title").outerHeight()-20)}),t("#azexo-html-library .azh-revisions.azh-panel").on("click",function(a){var e=t(a.target).closest(".azh-revision");e.length&&(azh.content_wrapper.addClass("azh-loading"),t.post(azh.ajaxurl,{action:"azh_load_post",post_id:e.data("id")},function(t){t&&t.content?(t.settings&&t.settings.shortcodes&&(azh.shortcode_instances=t.settings.shortcodes),azh.controls_container.empty(),azh.content_wrapper.html(t.content),v(azh.content_wrapper.get(0)),azh.content_wrapper=azh.$(azh.content_wrapper),azh.content_wrapper.find("[data-section]").each(function(){azh.section_customization_init(azh.$(this))}),azh.frontend_init&&azh.frontend_init(azh.content_wrapper),azh.structure_refresh(azh.content_wrapper),azh.changed=!1,e.closest(".azh-panel").find(".azh-restore-revision").show().data("id",e.data("id"))):alert(azh.i18n.revision_does_not_have_builder_content),azh.content_wrapper.removeClass("azh-loading")},"json"));var n=t(a.target).closest(".azh-restore-revision");n.length&&t.post(azh.ajaxurl,{action:"azh_restore_revision",post_id:n.data("id")},function(t){t&&alert(azh.i18n.revision_has_been_restored),n.hide()})});var u=t(".azh-library-actions > .azh-hierarchy").on("click",function(a){a.preventDefault();var e=t(".azh-elements-hierarchy").length?t(".azh-elements-hierarchy"):t('<div class="azh-elements-hierarchy"></div>').appendTo(l).hide();e.css({top:t(this).position().top+"px",left:t(this).position().left+45+"px"}),e.is(":visible")?(e.hide(),azh.controls_container.find(".azh-element-controls.azh-active").removeClass("azh-active"),t(".azh-elements-hierarchy .azh-child.azh-active").removeClass("azh-active")):e.show(),ft()});r.trigger("azh-library-init"),setTimeout(function(){u.trigger("click"),t(".azh-library-actions > .azh-builder").trigger("click")})},azh.customizer_init=function(){createEditor(azh.window.get(0),azh.document.get(0)),azh.$.widget("ui.rotatable",azh.$.ui.mouse,{options:{handle:!1,angle:!1,start:null,rotate:null,stop:null},handle:function(t){if(void 0===t)return this.options.handle;this.options.handle=t},angle:function(t){if(void 0===t)return this.options.angle;this.options.angle=t,this.elementCurrentAngle=t,this.performRotation(this.options.angle)},_create:function(){var t;this.options.handle?t=this.options.handle:(t=azh.$(azh.document.get(0).createElement("div"))).addClass("ui-rotatable-handle"),this.listeners={rotateElement:azh.$.proxy(this.rotateElement,this),startRotate:azh.$.proxy(this.startRotate,this),stopRotate:azh.$.proxy(this.stopRotate,this),wheelRotate:azh.$.proxy(this.wheelRotate,this)},this.element.bind("wheel",this.listeners.wheelRotate),t.draggable({helper:"clone",start:this.dragStart,handle:t}),t.bind("mousedown",this.listeners.startRotate),t.appendTo(this.element),0!=this.options.angle?(this.elementCurrentAngle=this.options.angle,this.performRotation(this.elementCurrentAngle)):this.elementCurrentAngle=0},_destroy:function(){this.element.removeClass("ui-rotatable"),this.element.find(".ui-rotatable-handle").remove()},performRotation:function(t){var a=this.element.get(0).style.transform,e=/rotate\(([-\.\d]+)rad\)/g.exec(a=a||"");a=e?a.replace(e[0],"rotate("+t+"rad)"):"rotate("+t+"rad)",this.element.get(0).style.transform=a},getElementOffset:function(){this.performRotation(0);var t=this.element[0].getBoundingClientRect();return this.performRotation(this.elementCurrentAngle),t},getElementCenter:function(){var t=this.getElementOffset(),a=t.left+this.element.width()/2,e=t.top+this.element.height()/2;return Array(a,e)},dragStart:function(t){if(this.element)return!1},startRotate:function(t){var a=this.getElementCenter(),e=t.pageX-a[0],n=t.pageY-a[1];return this.mouseStartAngle=Math.atan2(n,e),this.elementStartAngle=this.elementCurrentAngle,this.hasRotated=!1,this._propagate("start",t),azh.document.bind("mousemove",this.listeners.rotateElement),azh.document.bind("mouseup",this.listeners.stopRotate),!1},rotateElement:function(t){if(!this.element||this.element.disabled)return!1;var a=this.getElementCenter(),e=t.pageX-a[0],n=t.pageY-a[1],i=Math.atan2(n,e)-this.mouseStartAngle+this.elementStartAngle;if(t.shiftKey){var o=15/180*Math.PI;i<0&&(o*=-1),i-=(i+o/2)%o-o/2}i=Math.round(1e3*i)/1e3,this.performRotation(i);var s=this.elementCurrentAngle;return this.elementCurrentAngle=i,this._propagate("rotate",t),s!=i&&(this._trigger("rotate",t,this.ui()),this.hasRotated=!0),!1},stopRotate:function(t){if(this.element&&!this.element.disabled)return azh.document.unbind("mousemove",this.listeners.rotateElement),azh.document.unbind("mouseup",this.listeners.stopRotate),this.elementStopAngle=this.elementCurrentAngle,this._propagate("stop",t),setTimeout(function(){this.element=!1},10),!1},wheelRotate:function(t){var a=Math.round(t.originalEvent.deltaY/10)*Math.PI/180;a=Math.round(1e3*a)/1e3,a=this.elementCurrentAngle+a,this.elementStartAngle=this.elementCurrentAngle,this._trigger("start",t,this.ui()),this.angle(a),this._trigger("rotate",t,this.ui()),this.elementStopAngle=this.elementCurrentAngle,this.hasRotated=!0,this._trigger("stop",t,this.ui()),t.preventDefault()},_propagate:function(t,a){azh.$.ui.plugin.call(this,t,[a,this.ui()]),"rotate"!==t&&this._trigger(t,a,this.ui())},plugins:{},ui:function(){return{api:this,element:this.element,angle:{start:this.elementStartAngle,current:this.elementCurrentAngle,stop:this.elementStopAngle}}}}),azh.window.trigger("azh-customizer-before-init",{azh:azh}),r.trigger("azh-customizer-before-init",{azh:azh}),azh.window.one("az-frontend-before-init",function(t,a){var e=a.wrapper;azh.content_wrapper.has(e).length?e.find("[data-section]").andSelf().filter("[data-section]").each(function(){azh.section_customization_init(azh.$(this))}):e.is(azh.body)&&azh.content_wrapper.find("[data-section]").andSelf().filter("[data-section]").each(function(){azh.section_customization_init(azh.$(this))}),azh.changed=!1}),azh.window.one("az-frontend-after-init",function(t,a){O(azh.content_wrapper)}),azh.window.on("click",function(t,a){O(azh.content_wrapper)}),azh.window.on("az-full-width",function(t,a){var e=a.element.closest("[data-section]");0===e.length&&(e=a.element),e.find(".azh-controls").andSelf().filter(".azh-controls").each(function(){azh.$(this).data("azh-controls")&&azh.$(this).data("azh-controls").find(".azh-control").trigger("azh-init")})}),azh.content_wrapper=!1,azh.body.find(".azh-content-wrapper").length?(azh.content_wrapper=azh.body.find(".azh-content-wrapper").first(),azh.structure_refresh(azh.content_wrapper),azh.library_init(azh.content_wrapper)):azh.body.is(".page-template-azexo-html-template")?(azh.content_wrapper=azh.body.find("> .page"),azh.structure_refresh(azh.content_wrapper),azh.library_init(azh.content_wrapper)):azh.body.is(".page")&&("azexo"in azh.window?azh.content_wrapper=azh.body.find("#content > .entry > .entry-content"):azh.content_wrapper=azh.body.find("[data-section]").parent(),azh.structure_refresh(azh.content_wrapper),azh.library_init(azh.content_wrapper)),azh.content_wrapper?(setTimeout(function(){B(azh.content_wrapper)}),azh.body.find("a[href]").on("click",function(t){t.preventDefault()})):alert(azh.i18n.content_wrapper_does_not_exists),azh.window.trigger("azh-customizer-after-init",{azh:azh}),r.trigger("azh-customizer-after-init",{azh:azh}),azh.changed=!1},azh.prepare=function(){v(azh.body.get(0))},azh.save=function(a){a||(a="azh_save"),azh.window.trigger("azh-before-save",{action:a}),azh.content_wrapper.find(".az-free-positioning").each(function(){$(azh.$(this),"data-height",azh.$(this).height()),$(azh.$(this),"data-width",azh.$(this).width())});var e=s(g(azh.content_wrapper));t.post(azh.ajaxurl,{action:a,post_id:azh.post_id,shortcodes:azh.shortcode_instances,content:e},function(e){e&&(r.trigger("azh-saved"),"azh_autosave"===a&&t('#azexo-html-library .azh-revisions .azh-panel-content .azh-revision[data-type="autosave"]').first().remove(),t("#azexo-html-library .azh-revisions .azh-panel-content").prepend('<div class="azh-revision" data-id="'+e.id+'" data-type="'+e.type+'"><div class="azh-gravatar">'+e.gravatar+'</div><div class="azh-details"><div class="azh-date">'+e.date+'</div><div class="azh-meta">'+e.author+"</div></div></div>"))},"json"),azh.changed=!1},azh.change=function(){azh.changed=!0};var ut,vt;t.QueryString=z(window.location.search.substr(1).split("&")),"azh"in t.QueryString&&"customize"==t.QueryString.azh?window===window.parent&&("post-php"===window.adminpage?t(function(){l=t("body")}):(ut=function(){azh.body=azh.$("body"),v(azh.body.get(0))},vt=!1,azh.$.holdReady(!0),"complete"===azh.document.get(0).readyState?setTimeout(function(){vt||(vt=!0,ut(),azh.$.holdReady(!1))}):azh.document.get(0).addEventListener?(azh.document.get(0).addEventListener("DOMContentLoaded",function(){vt||(vt=!0,ut(),azh.$.holdReady(!1))},!1),azh.window.get(0).addEventListener("load",function(){vt||(vt=!0,ut(),azh.$.holdReady(!1))},!1)):(azh.document.get(0).attachEvent("onreadystatechange",function(){vt||(vt=!0,ut(),azh.$.holdReady(!1))}),azh.window.get(0).attachEvent("onload",function(){vt||(vt=!0,ut(),azh.$.holdReady(!1))})),t(function(){l=t("body"),azh.customizer_init()}))):t(function(){window===window.parent&&(azh.edit_links_refresh=function(){function a(a){t(a.data("edit-link-control")).css({top:a.offset().top,left:a.offset().left,width:a.outerWidth(),height:a.outerHeight()}).show()}function e(a){t(a.data("edit-link-control")).hide()}function n(i){var o=!0;return r.width()<i.offset().left+i.outerWidth()&&(o=!1),i.is(":visible")||(o=!1),i.parents().each(function(){var s=t(this),r=s.data("elements-with-azh-edit-link");r||(r=[]),r=r.concat(i.get()),r=t.unique(r),s.data("elements-with-azh-edit-link",r),"none"!=s.css("display")&&"0"!=s.css("opacity")&&"hidden"!=s.css("visibility")||(o=!1,s.off("click.azh mouseenter.azh mouseleave.azh").on("click.azh mouseenter.azh mouseleave.azh",function(){var i=s.data("elements-with-azh-edit-link");t(i).each(function(){n(t(this))?a(t(this)):e(t(this))})}))}),o}var i=!1;for(var o in t(".azh-edit-links").length?(i=t(".azh-edit-links")).detach():i=t('<div class="azh-edit-links"></div>'),azh.edit_links){var s=Object.keys(azh.edit_links[o].links);s.sort(function(t,a){return a.length-t.length});for(var h=0;h<s.length;h++){var c=s[h],d=0;t(c).each(function(){if(!t(this).data("edit-link-control")){var s=t('<div class="azh-edit-link" data-edit-link-control=""><a href="'+azh.edit_links[o].links[c]+"&occurrence="+d+'" target="'+azh.edit_links[o].target+'">'+azh.edit_links[o].text+"</a></div>").appendTo(i).css({top:"0",left:"0",width:"0",height:"0","z-index":"9999999","pointer-events":"none",position:"absolute"}).hide();d++,s.find("a").css({position:"absolute",display:"inline-block",padding:"5px 10px",color:"black","font-weight":"bold","background-color":"white","box-shadow":"0px 5px 5px rgba(0, 0, 0, 0.1)","pointer-events":"all"}).on("mouseenter",function(){t(this).parent().css("background-color","rgba(0, 255, 0, 0.1)"),azh.edit_links_refresh()}).on("mouseleave",function(){t(this).parent().css("background-color","transparent")}),"css"in azh.edit_links[o]&&t(s).find("a").css(azh.edit_links[o].css),t(this).data("edit-link-control",s),t(s).data("azh-linked-element",this)}n(t(this))?a(t(this)):e(t(this))})}}i.appendTo(l)},"azh"in window&&"edit_links"in azh&&(r.on("resize.azh scroll.azh",_.throttle(function(){azh.edit_links_refresh()},1e3)),setTimeout(function(){azh.edit_links_refresh()},100)),t("#wp-admin-bar-edit-links").addClass("azh-edit-links-active"),t("#wp-admin-bar-edit-links").off("click.azh").on("click.azh",function(a){var e=t(this);e.is(".azh-edit-links-active")?(t(".azh-edit-links div.azh-edit-link[style] a[href][style][target]").each(function(){var a=t(this);a.is(":visible")&&(a.data("visible",!0),a.hide())}),t(".azh-edit-links div.azh-edit-link[style] a[href][style][target]").hide(),e.removeClass("azh-edit-links-active"),e.css("opacity","0.4"),r.off("resize.azh scroll.azh")):(t(".azh-edit-links div.azh-edit-link[style] a[href][style][target]").each(function(){var a=t(this);a.data("visible")&&a.show()}),e.addClass("azh-edit-links-active"),e.css("opacity","1"),r.on("resize.azh scroll.azh",function(){azh.edit_links_refresh()})),a.preventDefault()}))})}(window.jQuery);
